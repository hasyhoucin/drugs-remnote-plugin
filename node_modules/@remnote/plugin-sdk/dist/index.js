var Da=Object.defineProperty,kd=Object.defineProperties;var Md=Object.getOwnPropertyDescriptors;var Aa=Object.getOwnPropertySymbols;var Ld=Object.prototype.hasOwnProperty,Fd=Object.prototype.propertyIsEnumerable;var Ca=(fe,X,Y)=>X in fe?Da(fe,X,{enumerable:!0,configurable:!0,writable:!0,value:Y}):fe[X]=Y,p=(fe,X)=>{for(var Y in X||(X={}))Ld.call(X,Y)&&Ca(fe,Y,X[Y]);if(Aa)for(var Y of Aa(X))Fd.call(X,Y)&&Ca(fe,Y,X[Y]);return fe},H=(fe,X)=>kd(fe,Md(X)),a=(fe,X)=>Da(fe,"name",{value:X,configurable:!0});var ot=(fe,X,Y)=>new Promise((an,J)=>{var kt=N=>{try{S(Y.next(N))}catch(ie){J(ie)}},A=N=>{try{S(Y.throw(N))}catch(ie){J(ie)}},S=N=>N.done?an(N.value):Promise.resolve(N.value).then(kt,A);S((Y=Y.apply(fe,X)).next())});a(function(X,Y){typeof exports=="object"&&typeof module=="object"?module.exports=Y(require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","react-dom"],Y):typeof exports=="object"?exports.rn=Y(require("react"),require("react-dom")):X.rn=Y(X.React,X.ReactDOM)},"webpackUniversalModuleDefinition")(self,function(fe,X){return function(){var Y={579:function(A){var S=1e3,N=S*60,ie=N*60,ue=ie*24,Oe=ue*7,v=ue*365.25;A.exports=function(E,b){b=b||{};var W=typeof E;if(W==="string"&&E.length>0)return ye(E);if(W==="number"&&isFinite(E))return b.long?V(E):Q(E);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(E))};function ye(E){if(E=String(E),!(E.length>100)){var b=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(E);if(!!b){var W=parseFloat(b[1]),R=(b[2]||"ms").toLowerCase();switch(R){case"years":case"year":case"yrs":case"yr":case"y":return W*v;case"weeks":case"week":case"w":return W*Oe;case"days":case"day":case"d":return W*ue;case"hours":case"hour":case"hrs":case"hr":case"h":return W*ie;case"minutes":case"minute":case"mins":case"min":case"m":return W*N;case"seconds":case"second":case"secs":case"sec":case"s":return W*S;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return W;default:return}}}}a(ye,"parse");function Q(E){var b=Math.abs(E);return b>=ue?Math.round(E/ue)+"d":b>=ie?Math.round(E/ie)+"h":b>=N?Math.round(E/N)+"m":b>=S?Math.round(E/S)+"s":E+"ms"}a(Q,"fmtShort");function V(E){var b=Math.abs(E);return b>=ue?U(E,b,ue,"day"):b>=ie?U(E,b,ie,"hour"):b>=N?U(E,b,N,"minute"):b>=S?U(E,b,S,"second"):E+" ms"}a(V,"fmtLong");function U(E,b,W,R){var C=b>=W*1.5;return Math.round(E/W)+" "+R+(C?"s":"")}a(U,"plural")},700:function(A,S,N){S.formatArgs=ue,S.save=Oe,S.load=v,S.useColors=ie,S.storage=ye(),S.destroy=(()=>{let V=!1;return()=>{V||(V=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),S.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ie(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}a(ie,"useColors");function ue(V){if(V[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+V[0]+(this.useColors?"%c ":" ")+"+"+A.exports.humanize(this.diff),!this.useColors)return;const U="color: "+this.color;V.splice(1,0,U,"color: inherit");let E=0,b=0;V[0].replace(/%[a-zA-Z%]/g,W=>{W!=="%%"&&(E++,W==="%c"&&(b=E))}),V.splice(b,0,U)}a(ue,"formatArgs"),S.log=console.debug||console.log||(()=>{});function Oe(V){try{V?S.storage.setItem("debug",V):S.storage.removeItem("debug")}catch(U){}}a(Oe,"save");function v(){let V;try{V=S.storage.getItem("debug")}catch(U){}return!V&&typeof process!="undefined"&&"env"in process&&(V=process.env.DEBUG),V}a(v,"load");function ye(){try{return localStorage}catch(V){}}a(ye,"localstorage"),A.exports=N(144)(S);const{formatters:Q}=A.exports;Q.j=function(V){try{return JSON.stringify(V)}catch(U){return"[UnexpectedJSONParseError]: "+U.message}}},144:function(A,S,N){function ie(ue){v.debug=v,v.default=v,v.coerce=b,v.disable=V,v.enable=Q,v.enabled=U,v.humanize=N(579),v.destroy=W,Object.keys(ue).forEach(R=>{v[R]=ue[R]}),v.names=[],v.skips=[],v.formatters={};function Oe(R){let C=0;for(let q=0;q<R.length;q++)C=(C<<5)-C+R.charCodeAt(q),C|=0;return v.colors[Math.abs(C)%v.colors.length]}a(Oe,"selectColor"),v.selectColor=Oe;function v(R){let C,q=null,Le,Mt;function x(..._e){if(!x.enabled)return;const D=x,y=Number(new Date),Fe=y-(C||y);D.diff=Fe,D.prev=C,D.curr=y,C=y,_e[0]=v.coerce(_e[0]),typeof _e[0]!="string"&&_e.unshift("%O");let g=0;_e[0]=_e[0].replace(/%([a-zA-Z%])/g,(Re,ut)=>{if(Re==="%%")return"%";g++;const Lt=v.formatters[ut];if(typeof Lt=="function"){const Nn=_e[g];Re=Lt.call(D,Nn),_e.splice(g,1),g--}return Re}),v.formatArgs.call(D,_e),(D.log||v.log).apply(D,_e)}return a(x,"debug"),x.namespace=R,x.useColors=v.useColors(),x.color=v.selectColor(R),x.extend=ye,x.destroy=v.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>q!==null?q:(Le!==v.namespaces&&(Le=v.namespaces,Mt=v.enabled(R)),Mt),set:_e=>{q=_e}}),typeof v.init=="function"&&v.init(x),x}a(v,"createDebug");function ye(R,C){const q=v(this.namespace+(typeof C=="undefined"?":":C)+R);return q.log=this.log,q}a(ye,"extend");function Q(R){v.save(R),v.namespaces=R,v.names=[],v.skips=[];let C;const q=(typeof R=="string"?R:"").split(/[\s,]+/),Le=q.length;for(C=0;C<Le;C++)!q[C]||(R=q[C].replace(/\*/g,".*?"),R[0]==="-"?v.skips.push(new RegExp("^"+R.slice(1)+"$")):v.names.push(new RegExp("^"+R+"$")))}a(Q,"enable");function V(){const R=[...v.names.map(E),...v.skips.map(E).map(C=>"-"+C)].join(",");return v.enable(""),R}a(V,"disable");function U(R){if(R[R.length-1]==="*")return!0;let C,q;for(C=0,q=v.skips.length;C<q;C++)if(v.skips[C].test(R))return!1;for(C=0,q=v.names.length;C<q;C++)if(v.names[C].test(R))return!0;return!1}a(U,"enabled");function E(R){return R.toString().substring(2,R.toString().length-2).replace(/\.\*\?$/,"*")}a(E,"toNamespace");function b(R){return R instanceof Error?R.stack||R.message:R}a(b,"coerce");function W(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return a(W,"destroy"),v.enable(v.load()),v}a(ie,"setup"),A.exports=ie},914:function(A){"use strict";/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var S=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;function ue(v){if(v==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(v)}a(ue,"toObject");function Oe(){try{if(!Object.assign)return!1;var v=new String("abc");if(v[5]="de",Object.getOwnPropertyNames(v)[0]==="5")return!1;for(var ye={},Q=0;Q<10;Q++)ye["_"+String.fromCharCode(Q)]=Q;var V=Object.getOwnPropertyNames(ye).map(function(E){return ye[E]});if(V.join("")!=="0123456789")return!1;var U={};return"abcdefghijklmnopqrst".split("").forEach(function(E){U[E]=E}),Object.keys(Object.assign({},U)).join("")==="abcdefghijklmnopqrst"}catch(E){return!1}}a(Oe,"shouldUseNative"),A.exports=Oe()?Object.assign:function(v,ye){for(var Q,V=ue(v),U,E=1;E<arguments.length;E++){Q=Object(arguments[E]);for(var b in Q)N.call(Q,b)&&(V[b]=Q[b]);if(S){U=S(Q);for(var W=0;W<U.length;W++)ie.call(Q,U[W])&&(V[U[W]]=Q[U[W]])}}return V}},222:function(A,S,N){"use strict";var ie;/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */N(914);var ue=N(359),Oe=60103;if(ie=60107,typeof Symbol=="function"&&Symbol.for){var v=Symbol.for;Oe=v("react.element"),ie=v("react.fragment")}var ye=ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Q=Object.prototype.hasOwnProperty,V={key:!0,ref:!0,__self:!0,__source:!0};function U(E,b,W){var R,C={},q=null,Le=null;W!==void 0&&(q=""+W),b.key!==void 0&&(q=""+b.key),b.ref!==void 0&&(Le=b.ref);for(R in b)Q.call(b,R)&&!V.hasOwnProperty(R)&&(C[R]=b[R]);if(E&&E.defaultProps)for(R in b=E.defaultProps,b)C[R]===void 0&&(C[R]=b[R]);return{$$typeof:Oe,type:E,key:q,ref:Le,props:C,_owner:ye.current}}a(U,"q"),S.jsx=U,S.jsxs=U},568:function(A,S,N){"use strict";A.exports=N(222)},359:function(A){"use strict";A.exports=fe},318:function(A){"use strict";A.exports=X}},an={};function J(A){var S=an[A];if(S!==void 0)return S.exports;var N=an[A]={exports:{}};return Y[A](N,N.exports,J),N.exports}a(J,"__webpack_require__"),function(){J.n=function(A){var S=A&&A.__esModule?function(){return A.default}:function(){return A};return J.d(S,{a:S}),S}}(),function(){J.d=function(A,S){for(var N in S)J.o(S,N)&&!J.o(A,N)&&Object.defineProperty(A,N,{enumerable:!0,get:S[N]})}}(),function(){J.o=function(A,S){return Object.prototype.hasOwnProperty.call(A,S)}}(),function(){J.r=function(A){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})}}();var kt={};return function(){"use strict";J.r(kt),J.d(kt,{AppEvents:function(){return x},AppNamespace:function(){return Yn},BuiltInPowerupCodes:function(){return xt},Card:function(){return bt},CardNamespace:function(){return Wn},ComponentFocusableItemType:function(){return pi},DEPRECATED_RICH_TEXT_ELEMENT_TYPES:function(){return Be},DEPRECATED_RICH_TEXT_ELEMENT_TYPES_TO_NEW_FORMATTING:function(){return Co},DEPRECATED_RICH_TEXT_FORMATTING_TYPES:function(){return Ao},DateNamespace:function(){return qn},EditorEvents:function(){return V},EditorNamespace:function(){return Gn},EmbedComponentType:function(){return je},EventNamespace:function(){return ur},FocusEvents:function(){return Mt},FocusNamespace:function(){return Kn},FocusPropsType:function(){return mi},GlobalEvent:function(){return ye},KnowledgeBaseNamespace:function(){return lr},LoadingSpinner:function(){return sa},MessagingEvents:function(){return W},MessagingNamespace:function(){return Qn},MoveUnit:function(){return _i},PORTAL_TYPE:function(){return yi},PageType:function(){return Ri},PluginAccessScopeType:function(){return qe},PluginActionPermissionLevel:function(){return zn},PowerupEvent:function(){return E},PowerupNamespace:function(){return Xn},PowerupSlotCodeMap:function(){return Kt},PreviewRemCards:function(){return aa},Queue:function(){return ia},QueueEvent:function(){return Q},QueueInteractionScore:function(){return gi},QueueNamespace:function(){return dr},REM_TYPE:function(){return vi},RICH_TEXT_ELEMENT_TYPE:function(){return Oo},RICH_TEXT_FORMATTING:function(){return $e},RNPlugin:function(){return hr},ReactRNPlugin:function(){return An},Rem:function(){return ze},RemColor:function(){return hn},RemEvent:function(){return U},RemHierarchyEditorTree:function(){return ra},RemNamespace:function(){return jn},RemRichTextEditor:function(){return na},RemType:function(){return hi},RemViewer:function(){return ta},RichText:function(){return ea},RichTextEditor:function(){return Js},RichTextNamespace:function(){return er},SchedulerNamespace:function(){return cr},SearchNamespace:function(){return tr},SelectSourceType:function(){return Ei},SelectionType:function(){return fn},SetRemType:function(){return fi},SettingEvents:function(){return R},SettingsNamespace:function(){return rr},SidebarEvents:function(){return b},SpecialPluginCallback:function(){return wi},StorageEvents:function(){return C},StorageNamespace:function(){return ir},WidgetEvents:function(){return q},WidgetLocation:function(){return di},WidgetNamespace:function(){return sr},WindowEvents:function(){return Le},WindowNamespace:function(){return ar},createReactiveApi:function(){return $r},declareIndexPlugin:function(){return Yc},filterAsync:function(){return dd},isAppEvent:function(){return _e},makeNamespacedCall:function(){return Un},numberValidatorSig:function(){return To},parseManifest:function(){return Cd},renderWidget:function(){return ca},richTextFormatNameCodeMap:function(){return ci},stringValidatorSig:function(){return xo},useAPIEventListener:function(){return zr},useGetRemsByIdsReactive:function(){return ad},useLocalStorageState:function(){return ud},useOnMessageBroadcast:function(){return Jc},usePlugin:function(){return Xe},useRunAsync:function(){return cd},useSessionStorageState:function(){return od},useSyncedStorageState:function(){return ld},useTracker:function(){return _d}});var A={};J.r(A),J.d(A,{VERSION:function(){return ji},after:function(){return Kl},all:function(){return Fs},allKeys:function(){return en},any:function(){return Vs},assign:function(){return En},before:function(){return Os},bind:function(){return xs},bindAll:function(){return Zl},chain:function(){return Hl},chunk:function(){return Rc},clone:function(){return Pl},collect:function(){return gt},compact:function(){return pc},compose:function(){return Gl},constant:function(){return rs},contains:function(){return Qe},countBy:function(){return uc},create:function(){return Rl},debounce:function(){return ql},default:function(){return Pc},defaults:function(){return vs},defer:function(){return zl},delay:function(){return Ts},detect:function(){return kr},difference:function(){return zs},drop:function(){return Sn},each:function(){return Ke},escape:function(){return Al},every:function(){return Fs},extend:function(){return gs},extendOwn:function(){return En},filter:function(){return Ct},find:function(){return kr},findIndex:function(){return Ir},findKey:function(){return As},findLastIndex:function(){return Ds},findWhere:function(){return Yl},first:function(){return Fr},flatten:function(){return mc},foldl:function(){return Mr},foldr:function(){return Ls},forEach:function(){return Ke},functions:function(){return Pr},get:function(){return ws},groupBy:function(){return ac},has:function(){return bl},head:function(){return Fr},identity:function(){return xr},include:function(){return Qe},includes:function(){return Qe},indexBy:function(){return oc},indexOf:function(){return ks},initial:function(){return Ws},inject:function(){return Mr},intersection:function(){return yc},invert:function(){return ms},invoke:function(){return ec},isArguments:function(){return yr},isArray:function(){return pt},isArrayBuffer:function(){return Yi},isBoolean:function(){return Ki},isDataView:function(){return _n},isDate:function(){return tl},isElement:function(){return el},isEmpty:function(){return fl},isEqual:function(){return hl},isError:function(){return rl},isFinite:function(){return ol},isFunction:function(){return Ee},isMap:function(){return gl},isMatch:function(){return us},isNaN:function(){return ns},isNull:function(){return Ju},isNumber:function(){return Qi},isObject:function(){return ht},isRegExp:function(){return nl},isSet:function(){return yl},isString:function(){return mr},isSymbol:function(){return Xi},isTypedArray:function(){return as},isUndefined:function(){return Gi},isWeakMap:function(){return vl},isWeakSet:function(){return _l},iteratee:function(){return Or},keys:function(){return le},last:function(){return hc},lastIndexOf:function(){return Xl},map:function(){return gt},mapObject:function(){return xl},matcher:function(){return nn},matches:function(){return nn},max:function(){return js},memoize:function(){return Wl},methods:function(){return Pr},min:function(){return nc},mixin:function(){return Us},negate:function(){return Nr},noop:function(){return Rs},now:function(){return sn},object:function(){return wc},omit:function(){return fc},once:function(){return Ql},pairs:function(){return wl},partial:function(){return Rn},partition:function(){return lc},pick:function(){return Zs},pluck:function(){return Lr},property:function(){return Tr},propertyOf:function(){return Tl},random:function(){return Ar},range:function(){return Ec},reduce:function(){return Mr},reduceRight:function(){return Ls},reject:function(){return Jl},rest:function(){return Sn},restArguments:function(){return Se},result:function(){return Vl},sample:function(){return Hs},select:function(){return Ct},shuffle:function(){return ic},size:function(){return cc},some:function(){return Vs},sortBy:function(){return sc},sortedIndex:function(){return Ns},tail:function(){return Sn},take:function(){return Fr},tap:function(){return Sl},template:function(){return Fl},templateSettings:function(){return Nl},throttle:function(){return Ul},times:function(){return Ol},toArray:function(){return Bs},toPath:function(){return _s},transpose:function(){return jr},unescape:function(){return Dl},union:function(){return vc},uniq:function(){return Vr},unique:function(){return Vr},uniqueId:function(){return Bl},unzip:function(){return jr},values:function(){return At},where:function(){return tc},without:function(){return gc},wrap:function(){return $l},zip:function(){return _c}});var S=Object.defineProperty,N=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable,Oe=a((e,t,n)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"__defNormalProp"),v=a((e,t)=>{for(var n in t||(t={}))ie.call(t,n)&&Oe(e,n,t[n]);if(N)for(var n of N(t))ue.call(t,n)&&Oe(e,n,t[n]);return e},"__spreadValues");const ye={GlobalOpenRem:"global.open-rem",URLChange:"global.url-change"},Q={QueueLoadCard:"queue.load-card",QueueCompleteCard:"queue.complete-card",QueueEnter:"queue.enter",QueueExit:"queue.exit",RevealAnswer:"queue.reveal-answer"},V={EditorSelectionChanged:"editor.selection-changed",EditorTextEdited:"editor.text-edited"},U={RemChanged:"rem.changed",GlobalRemChanged:"global.rem.changed"},E={PowerupSlotChanged:"powerup.slot.changed",ClickRemReference:"powerup.click-rem-reference",MouseOverLink:"powerup.mouse-enter-link",MouseOutLink:"powerup.mouse-out-link"},b={ClickSidebarItem:"sidebar.click-item"},W={MessageBroadcast:"messaging.broadcast"},R={SettingChanged:"setting.changed"},C={StorageSessionChange:"storage.session.changed",StorageSyncedChange:"storage.synced.changed",StorageLocalChange:"storage.local.changed"},q={FakeEmbedComponentDimensionChange:"widget.virtual-embed-dimension-change",FakeEmbedDOMEvent:"widget.virtual-embed-dom-event",StealKeyEvent:"widget.steal-key-event"},Le={FocusedPaneChange:"window.focusedPane.changed",CurrentWindowTreeChange:"window.PaneIdWindowTree.changed"},Mt={FocusedRemChange:"window.focusedRem.changed",FocusedPortalChange:"window.focusedPortal.changed"},x=v(v(v(v(v(v(v(v(v(v(v(v({onActivate:"onActivate",onDeactivate:"onDeactivate",setDarkMode:"setDarkMode",setCustomCSS:"setCustomCSS"},Le),W),b),E),U),ye),Q),C),q),V),R),Mt);function _e(e){return Object.values(x).includes(e)}a(_e,"isAppEvent");var D;(function(e){e.assertEqual=i=>i;function t(i){}a(t,"assertIs"),e.assertIs=t;function n(i){throw new Error}a(n,"assertNever"),e.assertNever=n,e.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},e.getValidEnumValues=i=>{const s=e.objectKeys(i).filter(u=>typeof i[i[u]]!="number"),o={};for(const u of s)o[u]=i[u];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(s){return i[s]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},e.find=(i,s)=>{for(const o of i)if(s(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}a(r,"joinValues"),e.joinValues=r,e.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(D||(D={}));const y=D.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fe=a(e=>{switch(typeof e){case"undefined":return y.undefined;case"string":return y.string;case"number":return isNaN(e)?y.nan:y.number;case"boolean":return y.boolean;case"function":return y.function;case"bigint":return y.bigint;case"object":return Array.isArray(e)?y.array:e===null?y.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?y.promise:typeof Map!="undefined"&&e instanceof Map?y.map:typeof Set!="undefined"&&e instanceof Set?y.set:typeof Date!="undefined"&&e instanceof Date?y.date:y.object;default:return y.unknown}},"getParsedType"),g=D.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of"]),Qr=a(e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson");class Re extends Error{constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const n=t||function(s){return s.message},r={_errors:[]},i=a(s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let u=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(u[c]=u[c]||{_errors:[]},u[c]._errors.push(n(o))):u[c]=u[c]||{_errors:[]},u=u[c],l++}}},"processError");return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,D.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}a(Re,"ZodError"),Re.create=e=>new Re(e);const ut=a((e,t)=>{let n;switch(e.code){case g.invalid_type:e.received===y.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case g.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,D.jsonStringifyReplacer)}`;break;case g.unrecognized_keys:n=`Unrecognized key(s) in object: ${D.joinValues(e.keys,", ")}`;break;case g.invalid_union:n="Invalid input";break;case g.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${D.joinValues(e.options)}`;break;case g.invalid_enum_value:n=`Invalid enum value. Expected ${D.joinValues(e.options)}, received '${e.received}'`;break;case g.invalid_arguments:n="Invalid function arguments";break;case g.invalid_return_type:n="Invalid function return type";break;case g.invalid_date:n="Invalid date";break;case g.invalid_string:typeof e.validation=="object"?"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:D.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case g.too_small:e.type==="array"?n=`Array must contain ${e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be greater than ${e.inclusive?"or equal to ":""}${e.minimum}`:e.type==="date"?n=`Date must be greater than ${e.inclusive?"or equal to ":""}${new Date(e.minimum)}`:n="Invalid input";break;case g.too_big:e.type==="array"?n=`Array must contain ${e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be less than ${e.inclusive?"or equal to ":""}${e.maximum}`:e.type==="date"?n=`Date must be smaller than ${e.inclusive?"or equal to ":""}${new Date(e.maximum)}`:n="Invalid input";break;case g.custom:n="Invalid input";break;case g.invalid_intersection_types:n="Intersection results could not be merged";break;case g.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;default:n=t.defaultError,D.assertNever(e)}return{message:n}},"errorMap");let Lt=ut;function Nn(e){Lt=e}a(Nn,"setErrorMap");function on(){return Lt}a(on,"getErrorMap");const un=a(e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,s=[...n,...i.path||[]],o=H(p({},i),{path:s});let u="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)u=c(o,{data:t,defaultError:u}).message;return H(p({},i),{path:s,message:i.message||u})},"makeIssue"),Na=[];function _(e,t){const n=un({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,on(),ut].filter(r=>!!r)});e.common.issues.push(n)}a(_,"addIssueToContext");class he{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return O;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static mergeObjectAsync(t,n){return ot(this,null,function*(){const r=[];for(const i of n)r.push({key:yield i.key,value:yield i.value});return he.mergeObjectSync(t,r)})}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return O;s.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),(typeof o.value!="undefined"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:t.value,value:r}}}a(he,"ParseStatus");const O=Object.freeze({status:"aborted"}),Ia=a(e=>({status:"dirty",value:e}),"DIRTY"),we=a(e=>({status:"valid",value:e}),"OK"),In=a(e=>e.status==="aborted","isAborted"),kn=a(e=>e.status==="dirty","isDirty"),ln=a(e=>e.status==="valid","isValid"),Mn=a(e=>typeof Promise!==void 0&&e instanceof Promise,"isAsync");var j;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(j||(j={}));class De{constructor(t,n,r,i){this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._path.concat(this._key)}}a(De,"ParseInputLazyPath");const Xr=a((e,t)=>{if(ln(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new Re(e.common.issues)}},"handleResult");function M(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:a((o,u)=>o.code!=="invalid_type"?{message:u.defaultError}:typeof u.data=="undefined"?{message:r!=null?r:u.defaultError}:{message:n!=null?n:u.defaultError},"customMap"),description:i}}a(M,"processCreateParams");class I{constructor(t){this.spa=this.safeParseAsync,this.superRefine=this._refinement,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.default=this.default.bind(this),this.describe=this.describe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return Fe(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Fe(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new he,ctx:{common:t.parent.common,data:t.data,parsedType:Fe(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Mn(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Fe(t)},s=this._parseSync({data:t,path:i.path,parent:i});return Xr(i,s)}parseAsync(t,n){return ot(this,null,function*(){const r=yield this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error})}safeParseAsync(t,n){return ot(this,null,function*(){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Fe(t)},i=this._parse({data:t,path:[],parent:r}),s=yield Mn(i)?i:Promise.resolve(i);return Xr(r,s)})}refine(t,n){const r=a(i=>typeof n=="string"||typeof n=="undefined"?{message:n}:typeof n=="function"?n(i):n,"getIssueProperties");return this._refinement((i,s)=>{const o=t(i),u=a(()=>s.addIssue(p({code:g.custom},r(i))),"setError");return typeof Promise!="undefined"&&o instanceof Promise?o.then(l=>l?!0:(u(),!1)):o?!0:(u(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new ke({schema:this,typeName:T.ZodEffects,effect:{type:"refinement",refinement:t}})}optional(){return Me.create(this)}nullable(){return rt.create(this)}nullish(){return this.optional().nullable()}array(){return Ne.create(this)}promise(){return ft.create(this)}or(t){return Rt.create([this,t])}and(t){return Pt.create(this,t)}transform(t){return new ke({schema:this,typeName:T.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new dn({innerType:this,defaultValue:n,typeName:T.ZodDefault})}brand(){return new Fn(p({typeName:T.ZodBranded,type:this},M(void 0)))}describe(t){const n=this.constructor;return new n(H(p({},this._def),{description:t}))}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}a(I,"ZodType");const ka=/^c[^\s-]{8,}$/i,Ma=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,La=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;class We extends I{constructor(){super(...arguments),this._regex=(t,n,r)=>this.refinement(i=>t.test(i),p({validation:n,code:g.invalid_string},j.errToObj(r))),this.nonempty=t=>this.min(1,j.errToObj(t)),this.trim=()=>new We(H(p({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}_parse(t){if(this._getType(t)!==y.string){const s=this._getOrReturnCtx(t);return _(s,{code:g.invalid_type,expected:y.string,received:s.parsedType}),O}const r=new he;let i;for(const s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(i=this._getOrReturnCtx(t,i),_(i,{code:g.too_small,minimum:s.value,type:"string",inclusive:!0,message:s.message}),r.dirty());else if(s.kind==="max")t.data.length>s.value&&(i=this._getOrReturnCtx(t,i),_(i,{code:g.too_big,maximum:s.value,type:"string",inclusive:!0,message:s.message}),r.dirty());else if(s.kind==="email")La.test(t.data)||(i=this._getOrReturnCtx(t,i),_(i,{validation:"email",code:g.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")Ma.test(t.data)||(i=this._getOrReturnCtx(t,i),_(i,{validation:"uuid",code:g.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")ka.test(t.data)||(i=this._getOrReturnCtx(t,i),_(i,{validation:"cuid",code:g.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(t.data)}catch(o){i=this._getOrReturnCtx(t,i),_(i,{validation:"url",code:g.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),_(i,{validation:"regex",code:g.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="startsWith"?t.data.startsWith(s.value)||(i=this._getOrReturnCtx(t,i),_(i,{code:g.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(i=this._getOrReturnCtx(t,i),_(i,{code:g.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):D.assertNever(s);return{status:r.value,value:t.data}}_addCheck(t){return new We(H(p({},this._def),{checks:[...this._def.checks,t]}))}email(t){return this._addCheck(p({kind:"email"},j.errToObj(t)))}url(t){return this._addCheck(p({kind:"url"},j.errToObj(t)))}uuid(t){return this._addCheck(p({kind:"uuid"},j.errToObj(t)))}cuid(t){return this._addCheck(p({kind:"cuid"},j.errToObj(t)))}regex(t,n){return this._addCheck(p({kind:"regex",regex:t},j.errToObj(n)))}startsWith(t,n){return this._addCheck(p({kind:"startsWith",value:t},j.errToObj(n)))}endsWith(t,n){return this._addCheck(p({kind:"endsWith",value:t},j.errToObj(n)))}min(t,n){return this._addCheck(p({kind:"min",value:t},j.errToObj(n)))}max(t,n){return this._addCheck(p({kind:"max",value:t},j.errToObj(n)))}length(t,n){return this.min(t,n).max(t,n)}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}a(We,"ZodString"),We.create=e=>new We(p({checks:[],typeName:T.ZodString},M(e)));function Fa(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(e.toFixed(i).replace(".","")),o=parseInt(t.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}a(Fa,"floatSafeRemainder");class et extends I{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._getType(t)!==y.number){const s=this._getOrReturnCtx(t);return _(s,{code:g.invalid_type,expected:y.number,received:s.parsedType}),O}let r;const i=new he;for(const s of this._def.checks)s.kind==="int"?D.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),_(r,{code:g.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),_(r,{code:g.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),_(r,{code:g.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?Fa(t.data,s.value)!==0&&(r=this._getOrReturnCtx(t,r),_(r,{code:g.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):D.assertNever(s);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,j.toString(n))}gt(t,n){return this.setLimit("min",t,!1,j.toString(n))}lte(t,n){return this.setLimit("max",t,!0,j.toString(n))}lt(t,n){return this.setLimit("max",t,!1,j.toString(n))}setLimit(t,n,r,i){return new et(H(p({},this._def),{checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:j.toString(i)}]}))}_addCheck(t){return new et(H(p({},this._def),{checks:[...this._def.checks,t]}))}int(t){return this._addCheck({kind:"int",message:j.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:j.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:j.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:j.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:j.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:j.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int")}}a(et,"ZodNumber"),et.create=e=>new et(p({checks:[],typeName:T.ZodNumber},M(e)));class Ft extends I{_parse(t){if(this._getType(t)!==y.bigint){const r=this._getOrReturnCtx(t);return _(r,{code:g.invalid_type,expected:y.bigint,received:r.parsedType}),O}return we(t.data)}}a(Ft,"ZodBigInt"),Ft.create=e=>new Ft(p({typeName:T.ZodBigInt},M(e)));class Vt extends I{_parse(t){if(this._getType(t)!==y.boolean){const r=this._getOrReturnCtx(t);return _(r,{code:g.invalid_type,expected:y.boolean,received:r.parsedType}),O}return we(t.data)}}a(Vt,"ZodBoolean"),Vt.create=e=>new Vt(p({typeName:T.ZodBoolean},M(e)));class lt extends I{_parse(t){if(this._getType(t)!==y.date){const s=this._getOrReturnCtx(t);return _(s,{code:g.invalid_type,expected:y.date,received:s.parsedType}),O}if(isNaN(t.data.getTime())){const s=this._getOrReturnCtx(t);return _(s,{code:g.invalid_date}),O}const r=new he;let i;for(const s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(i=this._getOrReturnCtx(t,i),_(i,{code:g.too_small,message:s.message,inclusive:!0,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(i=this._getOrReturnCtx(t,i),_(i,{code:g.too_big,message:s.message,inclusive:!0,maximum:s.value,type:"date"}),r.dirty()):D.assertNever(s);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new lt(H(p({},this._def),{checks:[...this._def.checks,t]}))}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:j.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:j.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}a(lt,"ZodDate"),lt.create=e=>new lt(p({checks:[],typeName:T.ZodDate},M(e)));class jt extends I{_parse(t){if(this._getType(t)!==y.undefined){const r=this._getOrReturnCtx(t);return _(r,{code:g.invalid_type,expected:y.undefined,received:r.parsedType}),O}return we(t.data)}}a(jt,"ZodUndefined"),jt.create=e=>new jt(p({typeName:T.ZodUndefined},M(e)));class Bt extends I{_parse(t){if(this._getType(t)!==y.null){const r=this._getOrReturnCtx(t);return _(r,{code:g.invalid_type,expected:y.null,received:r.parsedType}),O}return we(t.data)}}a(Bt,"ZodNull"),Bt.create=e=>new Bt(p({typeName:T.ZodNull},M(e)));class ct extends I{constructor(){super(...arguments),this._any=!0}_parse(t){return we(t.data)}}a(ct,"ZodAny"),ct.create=e=>new ct(p({typeName:T.ZodAny},M(e)));class tt extends I{constructor(){super(...arguments),this._unknown=!0}_parse(t){return we(t.data)}}a(tt,"ZodUnknown"),tt.create=e=>new tt(p({typeName:T.ZodUnknown},M(e)));class Ve extends I{_parse(t){const n=this._getOrReturnCtx(t);return _(n,{code:g.invalid_type,expected:y.never,received:n.parsedType}),O}}a(Ve,"ZodNever"),Ve.create=e=>new Ve(p({typeName:T.ZodNever},M(e)));class Ht extends I{_parse(t){if(this._getType(t)!==y.undefined){const r=this._getOrReturnCtx(t);return _(r,{code:g.invalid_type,expected:y.void,received:r.parsedType}),O}return we(t.data)}}a(Ht,"ZodVoid"),Ht.create=e=>new Ht(p({typeName:T.ZodVoid},M(e)));class Ne extends I{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==y.array)return _(n,{code:g.invalid_type,expected:y.array,received:n.parsedType}),O;if(i.minLength!==null&&n.data.length<i.minLength.value&&(_(n,{code:g.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(_(n,{code:g.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all(n.data.map((o,u)=>i.type._parseAsync(new De(n,o,n.path,u)))).then(o=>he.mergeArray(r,o));const s=n.data.map((o,u)=>i.type._parseSync(new De(n,o,n.path,u)));return he.mergeArray(r,s)}get element(){return this._def.type}min(t,n){return new Ne(H(p({},this._def),{minLength:{value:t,message:j.toString(n)}}))}max(t,n){return new Ne(H(p({},this._def),{maxLength:{value:t,message:j.toString(n)}}))}length(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}a(Ne,"ZodArray"),Ne.create=(e,t)=>new Ne(p({type:e,minLength:null,maxLength:null,typeName:T.ZodArray},M(t)));var cn;(function(e){e.mergeShapes=(t,n)=>p(p({},t),n)})(cn||(cn={}));const Yr=a(e=>t=>new G(H(p({},e),{shape:()=>p(p({},e.shape()),t)})),"AugmentFactory");function Et(e){if(e instanceof G){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Me.create(Et(r))}return new G(H(p({},e._def),{shape:()=>t}))}else return e instanceof Ne?Ne.create(Et(e.element)):e instanceof Me?Me.create(Et(e.unwrap())):e instanceof rt?rt.create(Et(e.unwrap())):e instanceof Ie?Ie.create(e.items.map(t=>Et(t))):e}a(Et,"deepPartialify");class G extends I{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=Yr(this._def),this.extend=Yr(this._def)}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=D.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==y.object){const c=this._getOrReturnCtx(t);return _(c,{code:g.invalid_type,expected:y.object,received:c.parsedType}),O}const{status:r,ctx:i}=this._processInputParams(t),{shape:s,keys:o}=this._getCached(),u=[];if(!(this._def.catchall instanceof Ve&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||u.push(c);const l=[];for(const c of o){const m=s[c],P=i.data[c];l.push({key:{status:"valid",value:c},value:m._parse(new De(i,P,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof Ve){const c=this._def.unknownKeys;if(c==="passthrough")for(const m of u)l.push({key:{status:"valid",value:m},value:{status:"valid",value:i.data[m]}});else if(c==="strict")u.length>0&&(_(i,{code:g.unrecognized_keys,keys:u}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const m of u){const P=i.data[m];l.push({key:{status:"valid",value:m},value:c._parse(new De(i,P,i.path,m)),alwaysSet:m in i.data})}}return i.common.async?Promise.resolve().then(()=>ot(this,null,function*(){const c=[];for(const m of l){const P=yield m.key;c.push({key:P,value:yield m.value,alwaysSet:m.alwaysSet})}return c})).then(c=>he.mergeObjectSync(r,c)):he.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return j.errToObj,new G(p(H(p({},this._def),{unknownKeys:"strict"}),t!==void 0?{errorMap:(n,r)=>{var i,s,o,u;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(u=j.errToObj(t).message)!==null&&u!==void 0?u:l}:{message:l}}}:{}))}strip(){return new G(H(p({},this._def),{unknownKeys:"strip"}))}passthrough(){return new G(H(p({},this._def),{unknownKeys:"passthrough"}))}setKey(t,n){return this.augment({[t]:n})}merge(t){return new G({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>cn.mergeShapes(this._def.shape(),t._def.shape()),typeName:T.ZodObject})}catchall(t){return new G(H(p({},this._def),{catchall:t}))}pick(t){const n={};return D.objectKeys(t).map(r=>{this.shape[r]&&(n[r]=this.shape[r])}),new G(H(p({},this._def),{shape:()=>n}))}omit(t){const n={};return D.objectKeys(this.shape).map(r=>{D.objectKeys(t).indexOf(r)===-1&&(n[r]=this.shape[r])}),new G(H(p({},this._def),{shape:()=>n}))}deepPartial(){return Et(this)}partial(t){const n={};if(t)return D.objectKeys(this.shape).map(r=>{D.objectKeys(t).indexOf(r)===-1?n[r]=this.shape[r]:n[r]=this.shape[r].optional()}),new G(H(p({},this._def),{shape:()=>n}));for(const r in this.shape){const i=this.shape[r];n[r]=i.optional()}return new G(H(p({},this._def),{shape:()=>n}))}required(){const t={};for(const n in this.shape){let i=this.shape[n];for(;i instanceof Me;)i=i._def.innerType;t[n]=i}return new G(H(p({},this._def),{shape:()=>t}))}keyof(){return Jr(D.objectKeys(this.shape))}}a(G,"ZodObject"),G.create=(e,t)=>new G(p({shape:()=>e,unknownKeys:"strip",catchall:Ve.create(),typeName:T.ZodObject},M(t))),G.strictCreate=(e,t)=>new G(p({shape:()=>e,unknownKeys:"strict",catchall:Ve.create(),typeName:T.ZodObject},M(t))),G.lazycreate=(e,t)=>new G(p({shape:e,unknownKeys:"strip",catchall:Ve.create(),typeName:T.ZodObject},M(t)));class Rt extends I{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(s){for(const u of s)if(u.result.status==="valid")return u.result;for(const u of s)if(u.result.status==="dirty")return n.common.issues.push(...u.ctx.common.issues),u.result;const o=s.map(u=>new Re(u.ctx.common.issues));return _(n,{code:g.invalid_union,unionErrors:o}),O}if(a(i,"handleResults"),n.common.async)return Promise.all(r.map(s=>ot(this,null,function*(){const o=H(p({},n),{common:H(p({},n.common),{issues:[]}),parent:null});return{result:yield s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}}))).then(i);{let s;const o=[];for(const l of r){const c=H(p({},n),{common:H(p({},n.common),{issues:[]}),parent:null}),m=l._parseSync({data:n.data,path:n.path,parent:c});if(m.status==="valid")return m;m.status==="dirty"&&!s&&(s={result:m,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const u=o.map(l=>new Re(l));return _(n,{code:g.invalid_union,unionErrors:u}),O}}get options(){return this._def.options}}a(Rt,"ZodUnion"),Rt.create=(e,t)=>new Rt(p({options:e,typeName:T.ZodUnion},M(t)));class Zt extends I{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==y.object)return _(n,{code:g.invalid_type,expected:y.object,received:n.parsedType}),O;const r=this.discriminator,i=n.data[r],s=this.options.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(_(n,{code:g.invalid_union_discriminator,options:this.validDiscriminatorValues,path:[r]}),O)}get discriminator(){return this._def.discriminator}get validDiscriminatorValues(){return Array.from(this.options.keys())}get options(){return this._def.options}static create(t,n,r){const i=new Map;try{n.forEach(s=>{const o=s.shape[t].value;i.set(o,s)})}catch(s){throw new Error("The discriminator value could not be extracted from all the provided schemas")}if(i.size!==n.length)throw new Error("Some of the discriminator values are not unique");return new Zt(p({typeName:T.ZodDiscriminatedUnion,discriminator:t,options:i},M(r)))}}a(Zt,"ZodDiscriminatedUnion");function Ln(e,t){const n=Fe(e),r=Fe(t);if(e===t)return{valid:!0,data:e};if(n===y.object&&r===y.object){const i=D.objectKeys(t),s=D.objectKeys(e).filter(u=>i.indexOf(u)!==-1),o=p(p({},e),t);for(const u of s){const l=Ln(e[u],t[u]);if(!l.valid)return{valid:!1};o[u]=l.data}return{valid:!0,data:o}}else if(n===y.array&&r===y.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let s=0;s<e.length;s++){const o=e[s],u=t[s],l=Ln(o,u);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===y.date&&r===y.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}a(Ln,"mergeValues");class Pt extends I{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=a((s,o)=>{if(In(s)||In(o))return O;const u=Ln(s.value,o.value);return u.valid?((kn(s)||kn(o))&&n.dirty(),{status:n.value,value:u.data}):(_(r,{code:g.invalid_intersection_types}),O)},"handleParsed");return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}a(Pt,"ZodIntersection"),Pt.create=(e,t,n)=>new Pt(p({left:e,right:t,typeName:T.ZodIntersection},M(n)));class Ie extends I{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==y.array)return _(r,{code:g.invalid_type,expected:y.array,received:r.parsedType}),O;if(r.data.length<this._def.items.length)return _(r,{code:g.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),O;!this._def.rest&&r.data.length>this._def.items.length&&(_(r,{code:g.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),n.dirty());const s=r.data.map((o,u)=>{const l=this._def.items[u]||this._def.rest;return l?l._parse(new De(r,o,r.path,u)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>he.mergeArray(n,o)):he.mergeArray(n,s)}get items(){return this._def.items}rest(t){return new Ie(H(p({},this._def),{rest:t}))}}a(Ie,"ZodTuple"),Ie.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ie(p({items:e,typeName:T.ZodTuple,rest:null},M(t)))};class St extends I{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==y.object)return _(r,{code:g.invalid_type,expected:y.object,received:r.parsedType}),O;const i=[],s=this._def.keyType,o=this._def.valueType;for(const u in r.data)i.push({key:s._parse(new De(r,u,r.path,u)),value:o._parse(new De(r,r.data[u],r.path,u))});return r.common.async?he.mergeObjectAsync(n,i):he.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof I?new St(p({keyType:t,valueType:n,typeName:T.ZodRecord},M(r))):new St(p({keyType:We.create(),valueType:t,typeName:T.ZodRecord},M(n)))}}a(St,"ZodRecord");class Wt extends I{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==y.map)return _(r,{code:g.invalid_type,expected:y.map,received:r.parsedType}),O;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([u,l],c)=>({key:i._parse(new De(r,u,r.path,[c,"key"])),value:s._parse(new De(r,l,r.path,[c,"value"]))}));if(r.common.async){const u=new Map;return Promise.resolve().then(()=>ot(this,null,function*(){for(const l of o){const c=yield l.key,m=yield l.value;if(c.status==="aborted"||m.status==="aborted")return O;(c.status==="dirty"||m.status==="dirty")&&n.dirty(),u.set(c.value,m.value)}return{status:n.value,value:u}}))}else{const u=new Map;for(const l of o){const c=l.key,m=l.value;if(c.status==="aborted"||m.status==="aborted")return O;(c.status==="dirty"||m.status==="dirty")&&n.dirty(),u.set(c.value,m.value)}return{status:n.value,value:u}}}}a(Wt,"ZodMap"),Wt.create=(e,t,n)=>new Wt(p({valueType:t,keyType:e,typeName:T.ZodMap},M(n)));class nt extends I{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==y.set)return _(r,{code:g.invalid_type,expected:y.set,received:r.parsedType}),O;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(_(r,{code:g.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(_(r,{code:g.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const m of l){if(m.status==="aborted")return O;m.status==="dirty"&&n.dirty(),c.add(m.value)}return{status:n.value,value:c}}a(o,"finalizeSet");const u=[...r.data.values()].map((l,c)=>s._parse(new De(r,l,r.path,c)));return r.common.async?Promise.all(u).then(l=>o(l)):o(u)}min(t,n){return new nt(H(p({},this._def),{minSize:{value:t,message:j.toString(n)}}))}max(t,n){return new nt(H(p({},this._def),{maxSize:{value:t,message:j.toString(n)}}))}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}a(nt,"ZodSet"),nt.create=(e,t)=>new nt(p({valueType:e,minSize:null,maxSize:null,typeName:T.ZodSet},M(t)));class dt extends I{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==y.function)return _(n,{code:g.invalid_type,expected:y.function,received:n.parsedType}),O;function r(u,l){return un({data:u,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,on(),ut].filter(c=>!!c),issueData:{code:g.invalid_arguments,argumentsError:l}})}a(r,"makeArgsIssue");function i(u,l){return un({data:u,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,on(),ut].filter(c=>!!c),issueData:{code:g.invalid_return_type,returnTypeError:l}})}a(i,"makeReturnsIssue");const s={errorMap:n.common.contextualErrorMap},o=n.data;return this._def.returns instanceof ft?we((...u)=>ot(this,null,function*(){const l=new Re([]),c=yield this._def.args.parseAsync(u,s).catch(de=>{throw l.addIssue(r(u,de)),l}),m=yield o(...c);return yield this._def.returns._def.type.parseAsync(m,s).catch(de=>{throw l.addIssue(i(m,de)),l})})):we((...u)=>{const l=this._def.args.safeParse(u,s);if(!l.success)throw new Re([r(u,l.error)]);const c=o(...l.data),m=this._def.returns.safeParse(c,s);if(!m.success)throw new Re([i(c,m.error)]);return m.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new dt(H(p({},this._def),{args:Ie.create(t).rest(tt.create())}))}returns(t){return new dt(H(p({},this._def),{returns:t}))}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new dt(p({args:t||Ie.create([]).rest(tt.create()),returns:n||tt.create(),typeName:T.ZodFunction},M(r)))}}a(dt,"ZodFunction");class zt extends I{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}a(zt,"ZodLazy"),zt.create=(e,t)=>new zt(p({getter:e,typeName:T.ZodLazy},M(t)));class Ut extends I{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return _(n,{code:g.invalid_literal,expected:this._def.value}),O}return{status:"valid",value:t.data}}get value(){return this._def.value}}a(Ut,"ZodLiteral"),Ut.create=(e,t)=>new Ut(p({value:e,typeName:T.ZodLiteral},M(t)));function Jr(e,t){return new qt(p({values:e,typeName:T.ZodEnum},M(t)))}a(Jr,"createZodEnum");class qt extends I{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return _(n,{expected:D.joinValues(r),received:n.parsedType,code:g.invalid_type}),O}if(this._def.values.indexOf(t.data)===-1){const n=this._getOrReturnCtx(t),r=this._def.values;return _(n,{received:n.data,code:g.invalid_enum_value,options:r}),O}return we(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}}a(qt,"ZodEnum"),qt.create=Jr;class $t extends I{_parse(t){const n=D.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==y.string&&r.parsedType!==y.number){const i=D.objectValues(n);return _(r,{expected:D.joinValues(i),received:r.parsedType,code:g.invalid_type}),O}if(n.indexOf(t.data)===-1){const i=D.objectValues(n);return _(r,{received:r.data,code:g.invalid_enum_value,options:i}),O}return we(t.data)}get enum(){return this._def.values}}a($t,"ZodNativeEnum"),$t.create=(e,t)=>new $t(p({values:e,typeName:T.ZodNativeEnum},M(t)));class ft extends I{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==y.promise&&n.common.async===!1)return _(n,{code:g.invalid_type,expected:y.promise,received:n.parsedType}),O;const r=n.parsedType===y.promise?n.data:Promise.resolve(n.data);return we(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}a(ft,"ZodPromise"),ft.create=(e,t)=>new ft(p({type:e,typeName:T.ZodPromise},M(t)));class ke extends I{innerType(){return this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null;if(i.type==="preprocess"){const o=i.transform(r.data);return r.common.async?Promise.resolve(o).then(u=>this._def.schema._parseAsync({data:u,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}const s={addIssue:o=>{_(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="refinement"){const o=a(u=>{const l=i.refinement(u,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u},"executeRefinement");if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?O:(u.status==="dirty"&&n.dirty(),o(u.value),{status:n.value,value:u.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>u.status==="aborted"?O:(u.status==="dirty"&&n.dirty(),o(u.value).then(()=>({status:n.value,value:u.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ln(o))return o;const u=i.transform(o.value,s);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:u}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>ln(o)?Promise.resolve(i.transform(o.value,s)).then(u=>({status:n.value,value:u})):o);D.assertNever(i)}}a(ke,"ZodEffects"),ke.create=(e,t,n)=>new ke(p({schema:e,typeName:T.ZodEffects,effect:t},M(n))),ke.createWithPreprocess=(e,t,n)=>new ke(p({schema:t,effect:{type:"preprocess",transform:e},typeName:T.ZodEffects},M(n)));class Me extends I{_parse(t){return this._getType(t)===y.undefined?we(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}a(Me,"ZodOptional"),Me.create=(e,t)=>new Me(p({innerType:e,typeName:T.ZodOptional},M(t)));class rt extends I{_parse(t){return this._getType(t)===y.null?we(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}a(rt,"ZodNullable"),rt.create=(e,t)=>new rt(p({innerType:e,typeName:T.ZodNullable},M(t)));class dn extends I{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===y.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}a(dn,"ZodDefault"),dn.create=(e,t)=>new Me(p({innerType:e,typeName:T.ZodOptional},M(t)));class Gt extends I{_parse(t){if(this._getType(t)!==y.nan){const r=this._getOrReturnCtx(t);return _(r,{code:g.invalid_type,expected:y.nan,received:r.parsedType}),O}return{status:"valid",value:t.data}}}a(Gt,"ZodNaN"),Gt.create=e=>new Gt(p({typeName:T.ZodNaN},M(e)));const Va=Symbol("zod_brand");class Fn extends I{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}a(Fn,"ZodBranded");const ei=a((e,t={},n)=>e?ct.create().superRefine((r,i)=>{if(!e(r)){const s=typeof t=="function"?t(r):t,o=typeof s=="string"?{message:s}:s;i.addIssue(H(p({code:"custom"},o),{fatal:n}))}}):ct.create(),"custom"),ja={object:G.lazycreate};var T;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded"})(T||(T={}));const Ba=a((e,t={message:`Input not instance of ${e.name}`})=>ei(n=>n instanceof e,t,!0),"instanceOfType"),ti=We.create,ni=et.create,Ha=Gt.create,Za=Ft.create,ri=Vt.create,Wa=lt.create,za=jt.create,Ua=Bt.create,qa=ct.create,$a=tt.create,Ga=Ve.create,Ka=Ht.create,Qa=Ne.create,Xa=G.create,Ya=G.strictCreate,Ja=Rt.create,eo=Zt.create,to=Pt.create,no=Ie.create,ro=St.create,io=Wt.create,so=nt.create,ao=dt.create,oo=zt.create,uo=Ut.create,lo=qt.create,co=$t.create,fo=ft.create,ii=ke.create,ho=Me.create,po=rt.create,mo=ke.createWithPreprocess;var h=Object.freeze({__proto__:null,getParsedType:Fe,ZodParsedType:y,defaultErrorMap:ut,setErrorMap:Nn,getErrorMap:on,makeIssue:un,EMPTY_PATH:Na,addIssueToContext:_,ParseStatus:he,INVALID:O,DIRTY:Ia,OK:we,isAborted:In,isDirty:kn,isValid:ln,isAsync:Mn,ZodType:I,ZodString:We,ZodNumber:et,ZodBigInt:Ft,ZodBoolean:Vt,ZodDate:lt,ZodUndefined:jt,ZodNull:Bt,ZodAny:ct,ZodUnknown:tt,ZodNever:Ve,ZodVoid:Ht,ZodArray:Ne,get objectUtil(){return cn},ZodObject:G,ZodUnion:Rt,ZodDiscriminatedUnion:Zt,ZodIntersection:Pt,ZodTuple:Ie,ZodRecord:St,ZodMap:Wt,ZodSet:nt,ZodFunction:dt,ZodLazy:zt,ZodLiteral:Ut,ZodEnum:qt,ZodNativeEnum:$t,ZodPromise:ft,ZodEffects:ke,ZodTransformer:ke,ZodOptional:Me,ZodNullable:rt,ZodDefault:dn,ZodNaN:Gt,BRAND:Va,ZodBranded:Fn,custom:ei,Schema:I,ZodSchema:I,late:ja,get ZodFirstPartyTypeKind(){return T},any:qa,array:Qa,bigint:Za,boolean:ri,date:Wa,discriminatedUnion:eo,effect:ii,enum:lo,function:ao,instanceof:Ba,intersection:to,lazy:oo,literal:uo,map:io,nan:Ha,nativeEnum:co,never:Ga,null:Ua,nullable:po,number:ni,object:Xa,oboolean:a(()=>ri().optional(),"oboolean"),onumber:a(()=>ni().optional(),"onumber"),optional:ho,ostring:a(()=>ti().optional(),"ostring"),preprocess:mo,promise:fo,record:ro,set:so,strictObject:Ya,string:ti,transformer:ii,tuple:no,undefined:za,union:Ja,unknown:$a,void:Ka,NEVER:O,ZodIssueCode:g,quotelessJson:Qr,ZodError:Re}),go=Object.defineProperty,vo=a((e,t,n)=>t in e?go(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"base_defNormalProp"),si=a((e,t,n)=>(vo(e,typeof t!="symbol"?t+"":t,n),n),"__publicField");class oe{constructor(t,n){si(this,"_call"),si(this,"call"),this._call=t,this.call=Un(this._call,n)}}a(oe,"NamespaceBase");function pe(e){return typeof e=="string"?e:e instanceof ze?e._id:e}a(pe,"getRemId");const ai=a(e=>e.map(pe),"getRemIds");var yo=Object.defineProperty,oi=Object.getOwnPropertySymbols,_o=Object.prototype.hasOwnProperty,wo=Object.prototype.propertyIsEnumerable,Vn=a((e,t,n)=>t in e?yo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"rem_defNormalProp"),Eo=a((e,t)=>{for(var n in t||(t={}))_o.call(t,n)&&Vn(e,n,t[n]);if(oi)for(var n of oi(t))wo.call(t,n)&&Vn(e,n,t[n]);return e},"rem_spreadValues"),d=a((e,t,n)=>(Vn(e,typeof t!="symbol"?t+"":t,n),n),"rem_publicField"),f=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"__async");class ze{constructor(t,n){d(this,"_id"),d(this,"createdAt"),d(this,"localUpdatedAt"),d(this,"updatedAt"),d(this,"parent"),d(this,"children"),d(this,"type"),d(this,"text"),d(this,"backText"),d(this,"_callMethod"),d(this,"call",(r,i)=>f(this,null,function*(){return yield this._callMethod(r,Eo({remId:this._id},i),Bn)})),d(this,"callAndReturnRem",(r,i)=>f(this,null,function*(){const s=yield this.call(r,i);if(s)return new ze(s,this._callMethod.bind(this))})),d(this,"callAndReturnManyRem",(r,i)=>f(this,null,function*(){const s=yield this.call(r,i);return s?s.map(o=>new ze(o,this._callMethod.bind(this))):[]})),d(this,"positionAmongstSiblings",r=>f(this,null,function*(){return this.call("positionAmongstSiblings",{portalId:r})})),d(this,"positionAmongstVisibleSiblings",r=>f(this,null,function*(){return this.call("positionAmongstVisibleSiblings",{portalId:r})})),d(this,"hasPowerup",r=>f(this,null,function*(){return yield this.call("hasPowerup",{powerupCode:r})})),d(this,"getHiddenExplicitlyIncludedState",r=>f(this,null,function*(){return yield this.call("getHiddenExplicitlyIncludedState",{portalId:r})})),d(this,"setHiddenExplicitlyIncludedState",(r,i)=>f(this,null,function*(){return yield this.call("setHiddenExplicitlyIncludedState",{hiddenExplicitlyIncludedState:r,portalId:i})})),d(this,"getLastPracticed",()=>f(this,null,function*(){return yield this.call("getLastPracticed",{})})),d(this,"addPowerup",r=>f(this,null,function*(){return yield this.call("addPowerup",{powerupCode:r})})),d(this,"getLastTimeMovedTo",()=>f(this,null,function*(){return yield this.call("getLastTimeMovedTo",{})})),d(this,"getSchemaVersion",()=>f(this,null,function*(){return yield this.call("getSchemaVersion",{})})),d(this,"embeddedQueueViewMode",()=>f(this,null,function*(){return yield this.call("embeddedQueueViewMode",{})})),d(this,"isCollapsed",r=>f(this,null,function*(){return yield this.call("isCollapsed",{portalId:r})})),d(this,"setIsCollapsed",(r,i)=>f(this,null,function*(){return yield this.call("setIsCollapsed",{isCollapsed:r,portalId:i})})),d(this,"timesSelectedInSearch",()=>f(this,null,function*(){return yield this.call("timesSelectedInSearch",{})})),d(this,"getPortalType",()=>f(this,null,function*(){return yield this.call("getPortalType",{})})),d(this,"getPortalDirectlyIncludedRem",()=>f(this,null,function*(){return yield this.call("getPortalDirectlyIncludedRem",{})})),d(this,"getType",()=>f(this,null,function*(){return yield this.call("getType",{})})),d(this,"setPowerupProperty",(r,i,s)=>f(this,null,function*(){const o=Object.values(xt).includes(r)?Kt[r][i]:i;return yield this.call("setPowerupProperty",{powerupCode:r,powerupSlot:o,value:s})})),d(this,"getPowerupProperty",(r,i)=>f(this,null,function*(){const s=Object.values(xt).includes(r)?Kt[r][i]:i;return yield this.call("getPowerupProperty",{powerupCode:r,powerupSlot:s})})),d(this,"getPowerupPropertyAsRichText",(r,i)=>f(this,null,function*(){const s=Object.values(xt).includes(r)?Kt[r][i]:i;return yield this.call("getPowerupPropertyAsRichText",{powerupCode:r,powerupSlot:s})})),d(this,"setText",r=>f(this,null,function*(){return yield this.call("setText",{text:r})})),d(this,"setBackText",r=>f(this,null,function*(){return yield this.call("setBackText",{backText:r})})),d(this,"removeTag",(r,i=!1)=>f(this,null,function*(){return yield this.call(i?"removeTagAndSlots":"removeTag",{tagId:r})})),d(this,"removePowerup",r=>f(this,null,function*(){return yield this.call("removePowerup",{powerupCode:r})})),d(this,"addTag",r=>f(this,null,function*(){const i=pe(r);return yield this.call("addTag",{tagId:i})})),d(this,"remove",()=>f(this,null,function*(){return yield this.call("remove",{})})),d(this,"getTagRems",()=>f(this,null,function*(){return this.callAndReturnManyRem("getTagRems",{})})),d(this,"addToPortal",r=>f(this,null,function*(){const i=pe(r);return yield this.call("addToPortal",{portalId:i})})),d(this,"removeFromPortal",r=>f(this,null,function*(){const i=pe(r);return yield this.call("removeFromPortal",{portalId:i})})),d(this,"setParent",(r,i)=>f(this,null,function*(){const s=pe(r);return yield this.call("setParent",{parentId:s,positionAmongstSiblings:i})})),d(this,"getOrCreateAliasWithText",r=>f(this,null,function*(){return yield this.callAndReturnRem("getOrCreateAliasWithText",{aliasText:r})})),d(this,"getChildrenRem",()=>f(this,null,function*(){return yield this.callAndReturnManyRem("getChildrenRem")})),d(this,"allRemInDocumentOrPortal",()=>f(this,null,function*(){return yield this.callAndReturnManyRem("allRemInDocumentOrPortal")})),d(this,"expand",(r,i)=>f(this,null,function*(){const s=pe(r);return yield this.call("expand",{portalId:s,recurse:i})})),d(this,"collapse",r=>f(this,null,function*(){const i=pe(r);return yield this.call("collapse",{portalId:i})})),d(this,"siblingRem",()=>f(this,null,function*(){return yield this.callAndReturnManyRem("siblingRem")})),d(this,"visibleSiblingRem",r=>f(this,null,function*(){return yield this.callAndReturnManyRem("visibleSiblingRem",{portalId:r})})),d(this,"taggedRem",()=>f(this,null,function*(){return yield this.callAndReturnManyRem("taggedRem")})),d(this,"ancestorTagRem",()=>f(this,null,function*(){return yield this.callAndReturnManyRem("ancestorTagRem")})),d(this,"descendantTagRem",()=>f(this,null,function*(){return yield this.callAndReturnManyRem("descendantTagRem")})),d(this,"getDescendants",()=>f(this,null,function*(){return yield this.callAndReturnManyRem("getDescendants")})),d(this,"getCards",()=>f(this,null,function*(){const r=yield this.call("getCards");return(r==null?void 0:r.map(i=>new bt(i,this._callMethod)))||[]})),d(this,"getAliases",()=>f(this,null,function*(){return yield this.callAndReturnManyRem("getAliases")})),d(this,"getParentRem",()=>f(this,null,function*(){return yield this.callAndReturnRem("getParentRem")})),d(this,"portalsAndDocumentsIn",()=>f(this,null,function*(){return yield this.callAndReturnManyRem("portalsAndDocumentsIn")})),d(this,"merge",r=>f(this,null,function*(){return yield this.call("merge",{remIdToMergeIntoThisOne:r})})),d(this,"mergeAndSetAlias",r=>f(this,null,function*(){const i=pe(r);return yield this.call("mergeAndSetAlias",{remIdToMergeIntoThisOne:i})})),d(this,"indent",r=>f(this,null,function*(){const i=pe(r);return yield this.call("indent",{portalId:i})})),d(this,"outdent",r=>f(this,null,function*(){const i=pe(r);return yield this.call("outdent",{portalId:i})})),d(this,"setType",r=>f(this,null,function*(){return yield this.call("setType",{type:r})})),d(this,"remsReferencingThis",()=>f(this,null,function*(){return yield this.callAndReturnManyRem("remsReferencingThis")})),d(this,"remsBeingReferenced",()=>f(this,null,function*(){return yield this.callAndReturnManyRem("remsBeingReferenced")})),d(this,"deepRemsBeingReferenced",()=>f(this,null,function*(){return yield this.callAndReturnManyRem("deepRemsBeingReferenced")})),d(this,"getSources",()=>f(this,null,function*(){return yield this.callAndReturnManyRem("getSources")})),d(this,"addSource",r=>f(this,null,function*(){const i=pe(r);return yield this.call("addSource",{sourceId:i})})),d(this,"removeSource",r=>f(this,null,function*(){const i=pe(r);return yield this.call("removeSource",{sourceId:i})})),d(this,"isDocument",()=>f(this,null,function*(){return yield this.call("isDocument")})),d(this,"setIsDocument",r=>f(this,null,function*(){return yield this.call("setIsDocument",{isDocument:r})})),d(this,"isListItem",()=>f(this,null,function*(){return yield this.call("isListItem")})),d(this,"setIsListItem",r=>f(this,null,function*(){return yield this.call("setIsListItem",{isListItem:r})})),d(this,"isCardItem",()=>f(this,null,function*(){return yield this.call("isMultilineCard")})),d(this,"setIsCardItem",r=>f(this,null,function*(){return yield this.call("setIsMultilineCard",{isCardItem:r})})),d(this,"isQuote",()=>f(this,null,function*(){return yield this.call("isQuote")})),d(this,"setIsQuote",r=>f(this,null,function*(){yield this.call("setIsQuote",{isQuote:r})})),d(this,"isCode",()=>f(this,null,function*(){return yield this.call("isCode")})),d(this,"setIsCode",r=>f(this,null,function*(){yield this.call("setIsCode",{isCode:r})})),d(this,"isTodo",()=>f(this,null,function*(){return yield this.call("isTodo")})),d(this,"setIsTodo",r=>f(this,null,function*(){yield this.call("setIsTodo",{isTodo:r})})),d(this,"getTodoStatus",()=>f(this,null,function*(){return yield this.call("getTodoStatus")})),d(this,"setTodoStatus",r=>f(this,null,function*(){return yield this.call("setTodoStatus",{todoStatus:r})})),d(this,"getFontSize",()=>f(this,null,function*(){return yield this.call("getFontSize")})),d(this,"setFontSize",r=>f(this,null,function*(){return yield this.call("setFontSize",{fontSize:r})})),d(this,"getHighlightColor",()=>f(this,null,function*(){return yield this.call("getHighlightColor")})),d(this,"setHighlightColor",r=>f(this,null,function*(){return yield this.call("setHighlightColor",{highlightColor:r})})),d(this,"isPowerup",()=>f(this,null,function*(){return yield this.call("isPowerup")})),d(this,"isPowerupEnum",()=>f(this,null,function*(){return yield this.call("isPowerupEnum")})),d(this,"isPowerupPropertyListItem",()=>f(this,null,function*(){return yield this.call("isPowerupPropertyListItem")})),d(this,"isPowerupSlot",()=>f(this,null,function*(){return yield this.call("isPowerupSlot")})),d(this,"isPowerupProperty",()=>f(this,null,function*(){return yield this.call("isPowerupProperty")})),d(this,"isSlot",()=>f(this,null,function*(){return yield this.call("isSlot")})),d(this,"setIsSlot",r=>f(this,null,function*(){return yield this.call("setIsSlot",{isSlot:r})})),d(this,"openRemInContext",()=>f(this,null,function*(){yield this.call("openRemInContext")})),d(this,"openRemAsPage",()=>f(this,null,function*(){yield this.call("openRemAsPage")})),d(this,"getEnablePractice",()=>f(this,null,function*(){return yield this.call("getEnablePractice")})),d(this,"getPracticeDirection",()=>f(this,null,function*(){return yield this.call("getPracticeDirection")})),d(this,"setEnablePractice",r=>f(this,null,function*(){return yield this.call("setEnablePractice",{enablePractice:r})})),d(this,"setPracticeDirection",r=>f(this,null,function*(){return yield this.call("setPracticeDirection",{direction:r})})),d(this,"copyPortalReferenceToClipboard",()=>f(this,null,function*(){return yield this.call("copyPortalReferenceToClipboard")})),d(this,"copyTagReferenceToClipboard",()=>f(this,null,function*(){return yield this.call("copyTagReferenceToClipboard")})),d(this,"copyReferenceToClipboard",()=>f(this,null,function*(){return yield this.call("copyReferenceToClipboard")})),this._id=t._id,this.parent=t.parent,this.children=t.children,this.type=t.type,this.text=t.text,this.backText=t.backText,this.updatedAt=t.u,this.localUpdatedAt=t.o,this.createdAt=t.createdAt,this._callMethod=n}}a(ze,"Rem");class jn extends oe{constructor(t){super(t,Bn),d(this,"findOne",n=>f(this,null,function*(){if(!n)return;const r=yield this.call("findOne",{remId:n});if(r)return new me(r,this.call)})),d(this,"createSingleRemWithMarkdown",(n,r)=>f(this,null,function*(){const i=yield this.call("createSingleRemWithMarkdown",{markdown:n,parentId:r});return i&&new me(i,this.call)})),d(this,"createTreeWithMarkdown",(n,r)=>f(this,null,function*(){return((yield this.call("createTreeWithMarkdown",{markdown:n,parentId:r}))||[]).map(s=>new me(s,this.call))})),d(this,"findByName",(n,r)=>f(this,null,function*(){const i=yield this.call("findByName",{name:n,parentId:r});if(i)return new me(i,this.call)})),d(this,"moveRems",(n,r,i,s)=>f(this,null,function*(){const o=ai(n),u=pe(r),l=pe(s);yield this.call("moveRems",{portalId:l,remIds:o,newParentId:u,positionAmongstSiblings:i})})),d(this,"getAll",()=>f(this,null,function*(){return((yield this.call("getAll",{}))||[]).map(r=>new me(r,this._call))})),d(this,"findMany",n=>f(this,null,function*(){const r=ai(n),i=yield this.call("findMany",{remIds:r});if(i)return i.map(s=>new me(s,this._call))})),d(this,"createPortal",()=>f(this,null,function*(){const n=yield this.call("createPortal",{});return n?new me(n,this._call):void 0})),d(this,"createLinkRem",(n,r=!0)=>f(this,null,function*(){const i=yield this.call("createLinkRem",{url:n,addTitle:r});if(i)return new me(i,this._call)})),d(this,"createRem",()=>f(this,null,function*(){const n=yield this.call("createRem",{});if(n)return new me(n,this._call)}))}}a(jn,"RemNamespace");const me=ze,Bn="rem";var Ro=Object.defineProperty,ui=Object.getOwnPropertySymbols,Po=Object.prototype.hasOwnProperty,So=Object.prototype.propertyIsEnumerable,Hn=a((e,t,n)=>t in e?Ro(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"card_defNormalProp"),li=a((e,t)=>{for(var n in t||(t={}))Po.call(t,n)&&Hn(e,n,t[n]);if(ui)for(var n of ui(t))So.call(t,n)&&Hn(e,n,t[n]);return e},"card_spreadValues"),ce=a((e,t,n)=>(Hn(e,typeof t!="symbol"?t+"":t,n),n),"card_publicField"),Ue=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"card_async");const Zn="card";class Wn extends oe{constructor(t){super(t,Zn),ce(this,"findOne",n=>Ue(this,null,function*(){if(!n)return;const r=yield this.call("findOne",{id:n});return r?new bt(r,this._call):void 0})),ce(this,"getAll",()=>Ue(this,null,function*(){const n=yield this.call("getAll",{});return(n==null?void 0:n.map(r=>new bt(r,this._call)))||[]})),ce(this,"findMany",n=>Ue(this,null,function*(){const r=yield this.call("findMany",{ids:n});return(r==null?void 0:r.map(i=>new bt(i,this._call)))||[]}))}}a(Wn,"CardNamespace");class bt extends oe{constructor(t,n){super(n,Zn),ce(this,"_id"),ce(this,"remId"),ce(this,"type"),ce(this,"createdAt"),ce(this,"repetitionHistory"),ce(this,"nextRepetitionTime"),ce(this,"timesWrongInRow"),ce(this,"lastRepetitionTime"),ce(this,"callCard",(i,s)=>Ue(this,null,function*(){return yield this._call(i,li({id:this._id},s),Zn)})),ce(this,"callRem",(i,s)=>Ue(this,null,function*(){return yield this._call(i,li({},s),Bn)})),ce(this,"getType",()=>Ue(this,null,function*(){return yield this.callCard("getType",{id:this._id})})),ce(this,"getRem",()=>Ue(this,null,function*(){return yield this.callRem("findOne",{remId:this.remId})})),ce(this,"remove",()=>Ue(this,null,function*(){return yield this.callCard("remove",{})})),ce(this,"updateCardRepetitionStatus",i=>Ue(this,null,function*(){return yield this.callCard("updateCardRepetitionStatus",{score:i})})),this._id=t._id,this.remId=t.remId;const r=t.cardType;this.type=r==="f"?"forward":r==="b"?"backward":{clozeId:r},this.createdAt=t.createdAt,this.repetitionHistory=t.history,this.nextRepetitionTime=t.activeNextTime,this.timesWrongInRow=t.timesWrongInRow}}a(bt,"Card");var fn=(e=>(e.Rem="Rem",e.Text="Text",e))(fn||{});const ci={quote:"q",underline:"u",bold:"b",italic:"l"};var hn=(e=>(e[e.undefined=0]="undefined",e[e.Red=1]="Red",e[e.Orange=2]="Orange",e[e.Yellow=3]="Yellow",e[e.Green=4]="Green",e[e.Blue=6]="Blue",e[e.Purple=5]="Purple",e[e.Gray=7]="Gray",e[e.Brown=8]="Brown",e[e.Pink=9]="Pink",e))(hn||{}),zn=(e=>(e.Read="Read",e.ReadCreate="ReadCreate",e.ReadCreateModify="ReadCreateModify",e.ReadCreateModifyDelete="ReadCreateModifyDelete",e))(zn||{}),qe=(e=>(e.All="All",e.DescendantsOfName="DescendantsOfName",e.DescendantsOfId="DescendantsOfId",e.Powerup="Powerup",e.FocusedSubtree="FocusedSubtree",e.KnowledgeBaseInfo="KnowledgeBaseInfo",e))(qe||{}),di=(e=>(e.FloatingWidget="FloatingWidget",e.PaneHeader="PaneHeader",e.Index="Index",e.TopBar="TopBar",e.QueueToolbar="QueueToolbar",e.DocumentAboveToolbar="AboveDocumentToolbar",e.DocumentBelowToolbar="DocumentBelowToolbar",e.DocumentBelowEditor="DocumentBelowEditor",e.DocumentBelowTitle="DocumentBelowTitle",e.SidebarEnd="SidebarEnd",e.RemReferencePopupStart="RemReferencePopupStart",e.RemReferencePopupRight="RemReferencePopupRight",e.Pane="Pane",e.FlashcardAnswer="FlashcardAnswer",e.Flashcard="Flashcard",e.FlashcardExtraDetail="FlashcardExtraDetail",e.RightSidebar="RightSidebar",e.LeftSidebar="LeftSidebar",e.Popup="Popup",e.UnderRemEditor="UnderRemEditor",e.RightSideOfEditor="RightSideOfEditor",e.SelectedTextMenu="SelectedTextMenu",e.PDFHighlightToolbarLocation="PDFHighlightToolbarLocation",e.PDFHighlightPopupLocation="PDFHighlightPopupLocation",e.DeckPage="DeckPage",e.LearningProgressPage="LearningProgressPage",e))(di||{}),xt=(e=>(e.Aliases="l",e.AutoSort="a",e.AutoTemplate="m",e.CustomCSS="c",e.DailyDocument="d",e.DisableCards="u",e.Divider="dv",e.Document="o",e.DocumentSidebar="s",e.EditLater="e",e.Emoji="j",e.ExtraCardDetail="x",e.Header="r",e.Highlight="h",e.Link="b",e.List="i",e.MultiLineCard="w",e.PDFPageNumber="pn",e.PDFHighlight="n",e.QuickAdd="q",e.Quote="qt",e.RestoredFromTrash="rt",e.Slot="y",e.Sources="os",e.SuperPrivate="k",e.UsedAsTag="g",e.Todo="t",e.UploadedFile="f",e.WebHighlight="p",e.Website="z",e.Code="cd",e.TypeInAnswer="ty",e.Deck="de",e.SearchPortal="sp",e.Collection="ct",e.HTMLHighlight="hh",e))(xt||{});const Kt={l:{Aliases:"a"},ct:{Template:"t"},a:{SortDirection:"d"},cd:{Language:"l",DontWrap:"w",DontBoundHeight:"b"},m:{},c:{},d:{Timestamp:"s",Date:"d"},u:{},o:{Status:"s",DeprecatedSource:"o"},s:{},dv:{},e:{Message:"m"},j:{},x:{},r:{Size:"s"},h:{Color:"c"},b:{URL:"u",Title:"t",ReadPercent:"r",LastReadDate:"d",FileURL:"f"},i:{},w:{},n:{Data:"d",PdfId:"p"},hh:{Data:"d",HTMLId:"h"},pn:{},q:{},qt:{},rt:{Date:"d"},y:{SelectTag:"t",ExtraSlotsOnFrontOfCard:"f",ExtraSlotsOnBackOfCard:"b"},os:{Sources:"os"},sp:{Query:"q",Filter:"f",AutomaticBacklinkSearchPortalFor:"b"},k:{},g:{},t:{Status:"s"},f:{Type:"t",URL:"u",Name:"n",Authors:"a",Keywords:"k",Title:"i",ViewerData:"v",ReadPercent:"r",LastReadDate:"d",Theme:"h"},p:{Data:"d",Url:"w"},z:{Hostname:"u"},ty:{},de:{Topics:"t",Status:"s",MaxNewCardsPerDay:"m",MaxTotalCardsPerDay:"c",ExamDate:"e"}};var fi=(e=>(e[e.DEFAULT_TYPE=void 0]="DEFAULT_TYPE",e[e.CONCEPT=1]="CONCEPT",e[e.DESCRIPTOR=2]="DESCRIPTOR",e))(fi||{}),hi=(e=>(e[e.DEFAULT_TYPE=void 0]="DEFAULT_TYPE",e[e.CONCEPT=1]="CONCEPT",e[e.DESCRIPTOR=2]="DESCRIPTOR",e[e.PORTAL=6]="PORTAL",e))(hi||{}),pi=(e=>(e.MultipleWindows="multipleWindows",e.MultipleWindowsPanel="multipleWindowsPanel",e.Dropdown="Dropdown",e.FloatingDiscussion="floatingDiscussion",e.WindowManager="windowManager",e.WindowPane="windowPane",e.Document="document",e.NotificationPanel="notificationPanel",e.HierarchyEditorTree="hierarchyEditorTree",e.ChangeCodeLanguage="ChangeCodeLanguage",e.HierarchyEditorTreePortal="hierarchyEditorTreePortal",e.HierarchyEditorTreeRem="hierarchyEditorTreeRem",e.RichTextEditor="richTextEditor",e.RichTextEditorItem="richTextEditorItem",e.RichTextEditorAliasPopup="richTextEditorAliasPopup",e.TableCellList="tableCellList",e.ColumnConfigurationMenu="columnConfigurationMenu",e.Popup="popup",e.Omnibar="omnibar",e.QuickAdd="quickAdd",e.Date="date",e.Queue="queue",e.TypeAnswerBox="typeAnswerBox",e.QueryBuilder="queryBuilder",e.PublishedKnowledgeBase="publishedKnowledgeBase",e.ArticleViewer="articleViewer",e.Article="article",e.FullPageSearch="fullPageSearch",e.ExtraDate="extraDate",e.DropToOpenAsDocument="dropToOpenAsDocument",e.PDF="pdf",e.PdfPageNumber="pdfPageNumber",e.NotesPopup="notesPopup",e.PDFUploader="pdfUploader",e.Reader="reader",e.RemSearchPopup="remSearchPopup",e.Debugger="debugger",e.SelectRem="selectRem",e.HiddenChildren="hiddenChildren",e.TableTitle="tableTitle",e.TableColumnTitle="tableColumnTitle",e.Toolbar="toolbar",e.Title="title",e.ArticleQueue="articleQueue",e.UserDocument="userDocument",e.DocumentSidebar="documentSidebar",e.PluginSidebar="pluginSidebar",e.Documents="documents",e.AudioVideo="audioVideo",e.ImageNode="imageNode",e.QueryNodeEditor="queryNodeEditor",e.LinkBox="linkBox",e.SelectedTextMenu="selectedTextMenu",e.RemReferenceNode="remReferenceNode",e.DeckTopicsList="deckTopics",e.DeckTopic="deckTopic",e.AddDeckTopic="addDeckTopic",e.DocSources="docSources",e.DocTags="docTags",e.AddSources="addSources",e.AddTags="addTags",e.InlineLink="inlineLink",e.ImageSelector="imageSelector",e.Latex="latex",e.Image="image",e.Cloze="cloze",e.Alias="alias",e.QueueFolderDropdownSelector="queueFolderDropdownSelector",e.CustomEditLaterMessage="customEditLaterMessage",e.DocumentParents="documentParents",e.AreaHighlight="areaHighlight",e.WindowOne="windowOne",e.WindowTwo="windowTwo",e.Replace="replace",e.Find="find",e.Tag="tag",e.TagBar="tagBar",e.Menu="menu",e.Screenshot="screenshot",e.HelpMessage="helpMessage",e.AddNode="addNode",e.EditEdge="editEdge",e.Controls="controls",e.DocumentSource="documentSource",e.Merge="merge",e.HierarchyEditorTemplateFields="hierarchyEditorTemplateFields",e.SearchExistingTable="searchExistingTable",e.PluginRemRichTextEditor="pluginRemRichTextEditor",e.PluginRichTextViewer="pluginRichTextViewer",e.RemHierarchyEditorTree="remHierarchyEditorTree",e.PluginQueue="pluginQueue",e.RichTextEditorFakeEmbed="richTextEditorFakeEmbed",e.DocumentHeader="documentHeader",e.TemplateValueEditor="TemplateValueEditor",e.TemplateValueTextEditor="TemplateValueTextEditor",e.Key="key",e.Value="value",e.CtrlF="ctrlF",e.CtrlFFind="ctrlFind",e.CtrlFReplace="ctrlReplace",e.CtrlFFilter="ctrlFilter",e.SearchResult="searchResult",e.SearchResultItem="searchResultItem",e.FocusableInput="focusableInput",e.RightSidebarHelpInput="RightSidebarHelpInput",e.LeftSidebarTutorial="LeftSidebarTutorial",e))(pi||{}),mi=(e=>(e.Text="text",e.SelectedRange="selectedRange",e))(mi||{}),bo=(e=>(e.Global="global",e.RemFocused="rem-focused",e.RemSelected="rem-selected",e))(bo||{});const xo=h.union([h.object({type:h.literal("email")}),h.object({type:h.literal("url")}),h.object({type:h.literal("regex"),arg:h.string()}),h.object({type:h.literal("startsWith"),arg:h.string()}),h.object({type:h.literal("endsWith"),arg:h.string()}),h.object({type:h.literal("min"),arg:h.number().positive()}),h.object({type:h.literal("max"),arg:h.number().positive()}),h.object({type:h.literal("length"),arg:h.number().positive()})]),To=h.union([h.object({type:h.literal("gte"),arg:h.number()}),h.object({type:h.literal("min"),arg:h.number()}),h.object({type:h.literal("gt"),arg:h.number()}),h.object({type:h.literal("lt"),arg:h.number()}),h.object({type:h.literal("lte"),arg:h.number()}),h.object({type:h.literal("int")}),h.object({type:h.literal("multipleOf"),arg:h.number()}),h.object({type:h.literal("step"),arg:h.number()}),h.object({type:h.literal("positive")}),h.object({type:h.literal("negative")}),h.object({type:h.literal("max"),arg:h.number()})]);var gi=(e=>(e[e.TOO_EARLY=.01]="TOO_EARLY",e[e.AGAIN=0]="AGAIN",e[e.HARD=.5]="HARD",e[e.GOOD=1]="GOOD",e[e.EASY=1.5]="EASY",e[e.VIEWED_AS_LEECH=2]="VIEWED_AS_LEECH",e[e.RESET=3]="RESET",e))(gi||{});function Un(e,t){return(n,r)=>e(n,r,t)}a(Un,"makeNamespacedCall");var je=(e=>(e.Queue="Queue",e.PreviewRemCards="ViewAsCard",e.LoadingSpinner="LoadingSpinner",e.RichTextEditor="RichTextEditor",e.RichText="RichTextViewer",e.RemRichTextEditor="RemRichTextEditor",e.RemViewer="RemViewer",e.RemHierarchyEditorTree="RemHierarchyEditorTree",e))(je||{});const Oo={REM:"q",IMAGE:"i",AUDIO:"a",PLUGIN:"p",DRAWING:"r",GLOBAL_NAME:"g",DEPRECATED_CODE:"o",ANNOTATION:"n",TEXT:"m",LATEX:"x",CARD_DELIMITER:"s"},$e={CLOZE:"cId",UNDERLINE:"u",BOLD:"b",ITALIC:"l",INLINE_LINK:"qId",INLINE_CODE:"q",QUOTE:"qt",HIDDEN_CLOZE:"hiddenCloze",REVEALED_CLOZE:"revealedCloze",HIGHLIGHT:"h",TEXT_COLOR:"tc",DEPRECATED_LINK:"url",CODE:"code",CODE_LANGUAGE:"language",COMMENT_ID:"c"},Be={UNDERLINE:"u",BOLD:"b",ITALIC:"t",INLINE_CODE:"c",CLOZE:"e",HIDDEN_CLOZE:"z",LINK:"l",HIGHLIGHT:"h",DATE:"d"},Ao={LATEX:"x"},Co={[Be.UNDERLINE]:$e.UNDERLINE,[Be.BOLD]:$e.BOLD,[Be.ITALIC]:$e.ITALIC,[Be.INLINE_CODE]:$e.INLINE_CODE,[Be.CLOZE]:$e.CLOZE,[Be.HIDDEN_CLOZE]:$e.HIDDEN_CLOZE,[Be.LINK]:$e.DEPRECATED_LINK,[Be.HIGHLIGHT]:$e.HIGHLIGHT,[Be.DATE]:!0};var vi=(e=>(e[e.DEFAULT_TYPE=void 0]="DEFAULT_TYPE",e[e.CONCEPT=1]="CONCEPT",e[e.DESCRIPTOR=2]="DESCRIPTOR",e[e.DEPRECATED_BASIC_CARD=4]="DEPRECATED_BASIC_CARD",e[e.PORTAL=6]="PORTAL",e[e.DEPRECATED_SLOT=3]="DEPRECATED_SLOT",e[e.DEPRECATED_PATTERN=5]="DEPRECATED_PATTERN",e[e.DEPRECATED_COLLECTION=7]="DEPRECATED_COLLECTION",e[e.DEPRECATED_TEXT=8]="DEPRECATED_TEXT",e))(vi||{}),yi=(e=>(e[e.PORTAL=void 0]="PORTAL",e[e.EMBEDDED_QUEUE=2]="EMBEDDED_QUEUE",e[e.SCAFFOLD=3]="SCAFFOLD",e[e.SEARCH_PORTAL=4]="SEARCH_PORTAL",e))(yi||{}),_i=(e=>(e[e.OFFSET=0]="OFFSET",e[e.UNIT=1]="UNIT",e[e.CHARACTER=2]="CHARACTER",e[e.WORD=3]="WORD",e[e.WORD_START=4]="WORD_START",e[e.WORD_END=5]="WORD_END",e[e.LINE=6]="LINE",e))(_i||{}),wi=(e=>(e.SRSScheduleCard="SRSScheduleCard",e))(wi||{}),Ei=(e=>(e[e.Enum=void 0]="Enum",e.AnyRem="any",e.Relation="relation",e))(Ei||{}),Ri=(e=>(e.Queue="Queue",e))(Ri||{}),Do=J(700),Pi=J.n(Do),No=Object.defineProperty,Io=a((e,t,n)=>t in e?No(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"date_defNormalProp"),Si=a((e,t,n)=>(Io(e,typeof t!="symbol"?t+"":t,n),n),"date_publicField"),bi=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"date_async");const ko="date";class qn extends oe{constructor(t){super(t,ko),Si(this,"getDailyDoc",n=>bi(this,null,function*(){const r=yield this.call("getDailyDoc",{date:n});if(r)return new me(r,this._call)})),Si(this,"getTodaysDoc",()=>bi(this,null,function*(){const n=yield this.call("getTodaysDoc",{});if(n)return new me(n,this._call)}))}}a(qn,"DateNamespace");var Mo=Object.defineProperty,xi=Object.getOwnPropertySymbols,Lo=Object.prototype.hasOwnProperty,Fo=Object.prototype.propertyIsEnumerable,$n=a((e,t,n)=>t in e?Mo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"editor_defNormalProp"),Vo=a((e,t)=>{for(var n in t||(t={}))Lo.call(t,n)&&$n(e,n,t[n]);if(xi)for(var n of xi(t))Fo.call(t,n)&&$n(e,n,t[n]);return e},"editor_spreadValues"),se=a((e,t,n)=>($n(e,typeof t!="symbol"?t+"":t,n),n),"editor_publicField"),ae=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"editor_async");const jo="editor";class Gn extends oe{constructor(t){super(t,jo),se(this,"setText",n=>ae(this,null,function*(){return this.call("setText",{richText:n})})),se(this,"copy",()=>ae(this,null,function*(){return this.call("copy",{})})),se(this,"cut",()=>ae(this,null,function*(){return this.call("cut",{})})),se(this,"deleteCharacters",(n,r)=>ae(this,null,function*(){return this.call("deleteCharacters",{characters:n,direction:r})})),se(this,"delete",()=>ae(this,null,function*(){return this.call("delete",{})})),se(this,"getSelectedRem",()=>ae(this,null,function*(){const n=yield this.getSelection();return n&&n.type===fn.Rem?n:void 0})),se(this,"getSelectedText",()=>ae(this,null,function*(){const n=yield this.getSelection();return n&&n.type===fn.Text?n:void 0})),se(this,"getSelection",()=>ae(this,null,function*(){return this.call("getSelection",{})})),se(this,"selectRem",(n,r)=>ae(this,null,function*(){return this.call("setSelectedLines",{range:n,portalId:r})})),se(this,"selectText",n=>ae(this,null,function*(){return this.call("setSelectedRichText",Vo({},n))})),se(this,"collapseSelection",n=>ae(this,null,function*(){return this.call("collapseSelection",{to:n})})),se(this,"undo",()=>ae(this,null,function*(){return this.call("undo",{})})),se(this,"redo",()=>ae(this,null,function*(){return this.call("redo",{})})),se(this,"moveCaret",(n,r)=>ae(this,null,function*(){return this.call("moveCaret",{amount:n,unit:r})})),se(this,"moveCaretVertical",n=>ae(this,null,function*(){return this.call("moveCaretVertical",{direction:n})})),se(this,"getCaretPosition",()=>ae(this,null,function*(){return this.call("getCaretPosition",{})})),se(this,"insertPlainText",n=>ae(this,null,function*(){return this.call("insertPlainText",{string:n})})),se(this,"insertRichText",n=>ae(this,null,function*(){return this.call("insertRichText",{richText:n})})),se(this,"insertMarkdown",n=>ae(this,null,function*(){return this.call("insertMarkdown",{markdown:n})})),se(this,"getFocusedEditorText",()=>ae(this,null,function*(){return this.call("getFocusedEditorText",{})}))}}a(Gn,"EditorNamespace");var Bo=Object.defineProperty,Ho=a((e,t,n)=>t in e?Bo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"focus_defNormalProp"),Ti=a((e,t,n)=>(Ho(e,typeof t!="symbol"?t+"":t,n),n),"focus_publicField"),Oi=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"focus_async");const Zo="focus";class Kn extends oe{constructor(t){super(t,Zo),Ti(this,"getFocusedRem",()=>Oi(this,null,function*(){const n=yield this.call("getFocusedRem",{});return n?new me(n,this._call):void 0})),Ti(this,"getFocusedPortal",()=>Oi(this,null,function*(){const n=yield this.call("getFocusedPortal",{});return n?new me(n,this._call):void 0}))}}a(Kn,"FocusNamespace");var Wo=Object.defineProperty,zo=a((e,t,n)=>t in e?Wo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"messaging_defNormalProp"),Uo=a((e,t,n)=>(zo(e,typeof t!="symbol"?t+"":t,n),n),"messaging_publicField"),qo=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"messaging_async");const $o="messaging";class Qn extends oe{constructor(t){super(t,$o),Uo(this,"broadcast",n=>qo(this,null,function*(){return console.log("Send broadcast"),this.call("broadcast",{message:n})}))}}a(Qn,"MessagingNamespace");var Go=Object.defineProperty,Ko=a((e,t,n)=>t in e?Go(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"powerup_defNormalProp"),Ai=a((e,t,n)=>(Ko(e,typeof t!="symbol"?t+"":t,n),n),"powerup_publicField"),Ci=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"powerup_async");const Qo="powerup";class Xn extends oe{constructor(t){super(t,Qo),Ai(this,"getPowerupByCode",n=>Ci(this,null,function*(){const r=yield this.call("getPowerupByCode",{powerupCode:n});if(r)return new me(r,this._call)})),Ai(this,"getPowerupSlotByCode",(n,r)=>Ci(this,null,function*(){const i=Object.values(xt).includes(n)?Kt[n][r]:r,s=yield this.call("getPowerupSlotByCode",{powerupCode:n,powerupSlot:i});if(s)return new me(s,this._call)}))}}a(Xn,"PowerupNamespace");var Xo=Object.defineProperty,Di=Object.getOwnPropertySymbols,Yo=Object.prototype.hasOwnProperty,Jo=Object.prototype.propertyIsEnumerable,eu=a((e,t,n)=>t in e?Xo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"app_defNormalProp"),tu=a((e,t)=>{var n={};for(var r in e)Yo.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Di)for(var r of Di(e))t.indexOf(r)<0&&Jo.call(e,r)&&(n[r]=e[r]);return n},"__objRest"),ge=a((e,t,n)=>(eu(e,typeof t!="symbol"?t+"":t,n),n),"app_publicField"),Pe=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"app_async");const nu="app";class Yn extends oe{constructor(t,n){super(t,nu),ge(this,"plugin"),ge(this,"registerPowerup",(r,i,s,o)=>Pe(this,null,function*(){yield this._call("registerPowerup",{name:r,code:i,description:s,options:o})})),ge(this,"registerWidget",(r,i,s)=>Pe(this,null,function*(){yield this._call("registerWidget",{fileName:r,location:i,options:s})})),ge(this,"unregisterWidget",(r,i)=>Pe(this,null,function*(){yield this._call("unregisterWidget",{fileName:r,location:i})})),ge(this,"registerCommand",r=>Pe(this,null,function*(){const i=r,{action:s}=i,o=tu(i,["action"]),u=r.id;this.plugin.model[u]=s,yield this._call("registerCommand",o)})),ge(this,"registerSidebarButton",r=>Pe(this,null,function*(){const{id:i,name:s,action:o}=r;this.plugin.model[i]=o,yield this._call("registerSidebarButton",{id:i,name:s})})),ge(this,"registerRemMenuItem",r=>Pe(this,null,function*(){const{id:i,name:s,action:o}=r;this.plugin.model[i]=o,yield this._call("registerRemMenuItem",{id:i,name:s})})),ge(this,"stealKeys",r=>Pe(this,null,function*(){yield this._call("stealKeys",{keys:r})})),ge(this,"releaseKeys",r=>Pe(this,null,function*(){yield this._call("releaseKeys",{keys:r})})),ge(this,"registerCSS",(r,i)=>Pe(this,null,function*(){yield this._call("registerCSS",{id:r,css:i})})),ge(this,"registerStatusBarItem",(r,i)=>Pe(this,null,function*(){yield this._call("registerStatusBarItem",{id:r,html:i})})),ge(this,"getOperatingSystem",()=>Pe(this,null,function*(){return yield this._call("getOperatingSystem",{})})),ge(this,"getPlatform",()=>Pe(this,null,function*(){return yield this._call("getPlatform",{})})),ge(this,"registerCallback",(r,i)=>{this.plugin.model[r]=i}),ge(this,"transaction",r=>Pe(this,null,function*(){const i=Math.random().toString();this.registerCallback(i,r);const s=yield this._call("transaction",{id:i});return delete this.plugin.model[i],s})),ge(this,"toast",r=>Pe(this,null,function*(){yield this._call("toast",{message:r,options:{}})})),this.plugin=n}}a(Yn,"AppNamespace");var ru=Object.defineProperty,iu=Object.defineProperties,su=Object.getOwnPropertyDescriptors,Ni=Object.getOwnPropertySymbols,au=Object.prototype.hasOwnProperty,ou=Object.prototype.propertyIsEnumerable,Jn=a((e,t,n)=>t in e?ru(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"rich_text_defNormalProp"),uu=a((e,t)=>{for(var n in t||(t={}))au.call(t,n)&&Jn(e,n,t[n]);if(Ni)for(var n of Ni(t))ou.call(t,n)&&Jn(e,n,t[n]);return e},"rich_text_spreadValues"),lu=a((e,t)=>iu(e,su(t)),"__spreadProps"),k=a((e,t,n)=>(Jn(e,typeof t!="symbol"?t+"":t,n),n),"rich_text_publicField"),$=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"rich_text_async");const cu="richText";class Ge{constructor(t){k(this,"richText",[]),k(this,"richTextNamespace"),k(this,"code",(n,r)=>(this.richText.push({i:"m",code:!0,language:r,text:n}),this)),k(this,"image",(n,r,i)=>(this.richText.push({i:"i",url:n,width:r,height:i}),this)),k(this,"rem",n=>{const i={i:"q",_id:pe(n)};return this.richText.push(i),this}),k(this,"text",(n,r=[])=>{if(r.length===0)return this.richText.push(n),this;const i=Object.fromEntries(r.map(s=>hn[s]?["h",hn[s]]:[ci[s],!0])||[]);return this.richText.push(lu(uu({i:"m"},i),{text:n})),this}),k(this,"audio",n=>(this.richText.push({i:"a",url:n,onlyAudio:!0}),this)),k(this,"latex",(n,r=!1)=>(this.richText.push({i:"x",text:n,block:r}),this)),k(this,"video",n=>(this.richText.push({i:"a",url:n,onlyAudio:!1}),this)),k(this,"newline",()=>(this.richText.push(`
`),this)),k(this,"value",()=>this.richTextNamespace.normalize(this.richText)),this.richTextNamespace=t}}a(Ge,"RichTextBuilder");class er extends oe{constructor(t){super(t,cu),k(this,"indexOfElementAt",(n,r)=>$(this,null,function*(){return this.call("indexOfElementAt",{richText:n,position:r})})),k(this,"normalize",n=>$(this,null,function*(){return this.call("normalize",{richText:n})})),k(this,"removeTextFormatFromRange",(n,r,i,s)=>$(this,null,function*(){return this.call("removeTextFormatFromRange",{text:n,start:r,end:i,format:s})})),k(this,"applyTextFormatToRange",(n,r,i,s)=>$(this,null,function*(){return this.call("applyTextFormatToRange",{text:n,start:r,end:i,format:s})})),k(this,"toggleTextFormatOnRange",(n,r,i,s)=>$(this,null,function*(){return this.call("toggleTextFormatOnRange",{text:n,start:r,end:i,format:s})})),k(this,"replaceAllRichText",(n,r,i)=>$(this,null,function*(){return this.call("replaceAllRichText",{richText:n,findText:r,replacementText:i})})),k(this,"splitRichText",(n,r)=>$(this,null,function*(){return this.call("splitRichText",{richText:n,splitText:r})})),k(this,"empty",(n,r)=>$(this,null,function*(){return this.call("empty",{richText:n,allowSpaces:r})})),k(this,"indexOf",(n,r,i)=>$(this,null,function*(){return this.call("indexOf",{richText:n,character:r,startChar:i})})),k(this,"toHTML",n=>$(this,null,function*(){return this.call("toHTML",{richText:n})})),k(this,"length",n=>$(this,null,function*(){return this.call("length",{richText:n})})),k(this,"trimEnd",n=>$(this,null,function*(){return this.call("trimEnd",{richText:n})})),k(this,"trimStart",n=>$(this,null,function*(){return this.call("trimStart",{richText:n})})),k(this,"trim",n=>$(this,null,function*(){return this.call("trim",{richText:n})})),k(this,"split",(n,r)=>$(this,null,function*(){return this.call("split",{richText:n,separationCharacter:r})})),k(this,"deepGetRemAndAliasIdsFromRichText",n=>$(this,null,function*(){return this.call("deepGetRemAndAliasIdsFromRichText",{richText:n})})),k(this,"deepGetRemIdsFromRichText",n=>$(this,null,function*(){return this.call("deepGetRemIdsFromRichText",{richText:n})})),k(this,"findAllExternalURLs",n=>$(this,null,function*(){return this.call("findAllExternalURLs",{richText:n})})),k(this,"getRemAndAliasIdsFromRichText",n=>$(this,null,function*(){return this.call("getRemAndAliasIdsFromRichText",{richText:n})})),k(this,"getRemIdsFromRichText",n=>$(this,null,function*(){return this.call("getRemIdsFromRichText",{richText:n})})),k(this,"equals",(n,r)=>$(this,null,function*(){return this.call("equals",{richText1:n,richText2:r})})),k(this,"substring",(n,r,i)=>$(this,null,function*(){return this.call("substring",{richText:n,start:r,end:i})})),k(this,"charAt",(n,r)=>$(this,null,function*(){return this.call("charAt",{richText:n,index:r})})),k(this,"toString",n=>$(this,null,function*(){return this.call("toString",{richText:n})})),k(this,"toMarkdown",n=>$(this,null,function*(){return this.call("toMarkdown",{richText:n})})),k(this,"parseFromMarkdown",n=>$(this,null,function*(){return this.call("parseFromMarkdown",{markdown:n})}))}get code(){return new Ge(this).code}get image(){return new Ge(this).image}get rem(){return new Ge(this).rem}get text(){return new Ge(this).text}get audio(){return new Ge(this).audio}get latex(){return new Ge(this).latex}get video(){return new Ge(this).video}get newline(){return new Ge(this).newline}}a(er,"RichTextNamespace");var du=Object.defineProperty,fu=a((e,t,n)=>t in e?du(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"search_defNormalProp"),hu=a((e,t,n)=>(fu(e,typeof t!="symbol"?t+"":t,n),n),"search_publicField"),pu=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"search_async");const mu="search";class tr extends oe{constructor(t){super(t,mu),hu(this,"search",(n,r,i)=>pu(this,null,function*(){const s=pe(r);return((yield this.call("search",{queryText:n,searchContextRemId:s,options:i}))||[]).map(u=>new me(u,this._call))}))}}a(tr,"SearchNamespace");var gu=Object.defineProperty,Ii=Object.getOwnPropertySymbols,vu=Object.prototype.hasOwnProperty,yu=Object.prototype.propertyIsEnumerable,nr=a((e,t,n)=>t in e?gu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"settings_defNormalProp"),pn=a((e,t)=>{for(var n in t||(t={}))vu.call(t,n)&&nr(e,n,t[n]);if(Ii)for(var n of Ii(t))yu.call(t,n)&&nr(e,n,t[n]);return e},"settings_spreadValues"),Qt=a((e,t,n)=>(nr(e,typeof t!="symbol"?t+"":t,n),n),"settings_publicField"),Xt=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"settings_async");const _u="settings";class rr extends oe{constructor(t){super(t,_u),Qt(this,"registerDropdownSetting",n=>Xt(this,null,function*(){return this.call("registerDropdownSetting",pn({},n))})),Qt(this,"registerBooleanSetting",n=>Xt(this,null,function*(){return this.call("registerBooleanSetting",pn({},n))})),Qt(this,"registerStringSetting",n=>Xt(this,null,function*(){return this.call("registerStringSetting",pn({},n))})),Qt(this,"registerNumberSetting",n=>Xt(this,null,function*(){return this.call("registerNumberSetting",pn({},n))})),Qt(this,"getSetting",n=>Xt(this,null,function*(){return yield this.call("getSetting",{settingId:n})}))}}a(rr,"SettingsNamespace");var wu=Object.defineProperty,Eu=a((e,t,n)=>t in e?wu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"storage_defNormalProp"),Tt=a((e,t,n)=>(Eu(e,typeof t!="symbol"?t+"":t,n),n),"storage_publicField"),Ot=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"storage_async");const Ru="storage";class ir extends oe{constructor(t){super(t,Ru),Tt(this,"setSession",(n,r)=>Ot(this,null,function*(){return this.call("setSession",{key:n,value:r})})),Tt(this,"getSession",n=>Ot(this,null,function*(){if(!!n)return this.call("getSession",{key:n})})),Tt(this,"setSynced",(n,r)=>Ot(this,null,function*(){return this.call("setSynced",{key:n,value:r})})),Tt(this,"getSynced",n=>Ot(this,null,function*(){if(!!n)return this.call("getSynced",{key:n})})),Tt(this,"setLocal",(n,r)=>Ot(this,null,function*(){return this.call("setLocal",{key:n,value:r})})),Tt(this,"getLocal",n=>Ot(this,null,function*(){if(!!n)return this.call("getLocal",{key:n})}))}}a(ir,"StorageNamespace");var Pu=Object.defineProperty,Su=a((e,t,n)=>t in e?Pu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"widget_defNormalProp"),mn=a((e,t,n)=>(Su(e,typeof t!="symbol"?t+"":t,n),n),"widget_publicField"),gn=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"widget_async");const bu="widget";class sr extends oe{constructor(t){super(t,bu),mn(this,"getDimensions",n=>gn(this,null,function*(){return this.call("getDimensions",{widgetInstanceId:n})})),mn(this,"openPopup",(n,r,i)=>gn(this,null,function*(){return this.call("openPopup",{widgetFileName:n,contextData:r,clickOutsideToClose:i})})),mn(this,"closePopup",(n=!0)=>gn(this,null,function*(){return this.call("closePopup",{restoreFocus:n})})),mn(this,"getWidgetContext",()=>gn(this,null,function*(){return this.call("getWidgetContext",{})}))}}a(sr,"WidgetNamespace");var xu=Object.defineProperty,Tu=a((e,t,n)=>t in e?xu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"window_defNormalProp"),ee=a((e,t,n)=>(Tu(e,typeof t!="symbol"?t+"":t,n),n),"window_publicField"),te=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"window_async");const Ou="window";class ar extends oe{constructor(t){super(t,Ou),ee(this,"stealKeys",(n,r)=>te(this,null,function*(){yield this.call("stealKeys",{keys:r,id:n})})),ee(this,"releaseKeys",(n,r)=>te(this,null,function*(){yield this.call("releaseKeys",{keys:r,id:n})})),ee(this,"openFloatingWidget",(n,r,i,s)=>te(this,null,function*(){return yield this.call("openFloatingWidget",{fileName:n,position:r,classContainer:i,closeWhenClickOutside:s})})),ee(this,"closeFloatingWidget",n=>te(this,null,function*(){return yield this.call("closeFloatingWidget",{floatingWidgetId:n})})),ee(this,"isFloatingWidgetOpen",n=>te(this,null,function*(){return yield this.call("isFloatingWidgetOpen",{floatingWidgetId:n})})),ee(this,"setFloatingWidgetPosition",(n,r)=>te(this,null,function*(){return yield this.call("setFloatingWidgetPosition",{floatingWidgetId:n,position:r})})),ee(this,"closeAllFloatingWidgets",()=>te(this,null,function*(){return yield this.call("closeAllFloatingWidgets",{})})),ee(this,"getCurrentWindowTree",()=>te(this,null,function*(){return yield this.call("getCurrentWindowTree",{})})),ee(this,"setRemWindowTree",n=>te(this,null,function*(){return yield this.call("setRemWindowTree",{tree:n})})),ee(this,"getLastFocusedPane",()=>te(this,null,function*(){return yield this.call("getLastFocusedPane",{})})),ee(this,"setCurrentWindowTreeFromString",n=>te(this,null,function*(){return yield this.call("setCurrentWindowTreeFromString",{treeString:n})})),ee(this,"getOpenPaneIds",()=>te(this,null,function*(){return yield this.call("getOpenPaneIds",{})})),ee(this,"getFocusedPaneId",()=>te(this,null,function*(){return yield this.call("getFocusedPaneId",{})})),ee(this,"setFocusedPaneId",n=>te(this,null,function*(){return yield this.call("setFocusedPaneId",{paneId:n})})),ee(this,"getURL",()=>te(this,null,function*(){return yield this.call("getURL",{})})),ee(this,"setURL",n=>te(this,null,function*(){return yield this.call("setURL",{url:n})})),ee(this,"openRem",n=>te(this,null,function*(){return yield this.call("openRem",{remId:n._id})})),ee(this,"getOpenPaneRemIds",()=>te(this,null,function*(){return yield this.call("getOpenPaneRemIds",{})})),ee(this,"getOpenPaneRemId",n=>te(this,null,function*(){if(n)return yield this.call("getOpenPaneRemId",{paneId:n})})),ee(this,"openWidgetInPane",(n,r)=>te(this,null,function*(){return yield this.call("openWidgetInPane",{fileName:n,contextData:r})})),ee(this,"openWidgetInRightSidebar",(n,r)=>te(this,null,function*(){return yield this.call("openWidgetInRightSidebar",{fileName:n,contextData:r})})),ee(this,"isOnPage",n=>te(this,null,function*(){return yield this.call("isOnPage",{page:n})}))}}a(ar,"WindowNamespace");var Au=Object.defineProperty,Cu=a((e,t,n)=>t in e?Au(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"event_defNormalProp"),or=a((e,t,n)=>(Cu(e,typeof t!="symbol"?t+"":t,n),n),"event_publicField");const Du="event";class ur extends oe{constructor(t,n){super(t,Du),or(this,"plugin"),or(this,"addListener",(r,i,s)=>{r in this.plugin.listeners||(this.plugin.listeners[r]=new Map),this.plugin.listeners[r].get(i)||this.plugin.listeners[r].set(i,[]),!this.plugin.listeners[r].get(i).includes(s)&&(this.plugin.listeners[r].get(i).push(s),this._call("events.addListener",{eventId:r,listenerKey:i}))}),or(this,"removeListener",(r,i,s)=>{const o=this.plugin.listeners[r];if(!o)return;const u=o.get(i);if(!!u){if(s){const l=u.indexOf(s);if(l==-1)return;u.splice(l,1)}else u.splice(0,u.length);u.length===0&&(o.delete(i),this._call("events.removeListener",{eventId:r,listenerKey:i}))}}),this.plugin=n}}a(ur,"EventNamespace");var Nu=Object.defineProperty,Iu=a((e,t,n)=>t in e?Nu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"knowledge_base_defNormalProp"),vn=a((e,t,n)=>(Iu(e,typeof t!="symbol"?t+"":t,n),n),"knowledge_base_publicField"),ki=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"knowledge_base_async");const ku="kb";class lr{constructor(t){vn(this,"_call"),vn(this,"call"),vn(this,"getCurrentKnowledgeBaseData",()=>ki(this,null,function*(){return this.call("getCurrentKnowledgeBaseData",{})})),vn(this,"isPrimaryKnowledgeBase",()=>ki(this,null,function*(){return this.call("isPrimaryKnowledgeBase",{})})),this._call=t,this.call=Un(this._call,ku)}}a(lr,"KnowledgeBaseNamespace");const Mu="scheduler";class cr extends oe{constructor(t){super(t,Mu)}registerCustomScheduler(t,n){return this.call("registerCustomScheduler",{name:t,parameters:n})}}a(cr,"SchedulerNamespace");var Lu=Object.defineProperty,Fu=a((e,t,n)=>t in e?Lu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"queue_defNormalProp"),Mi=a((e,t,n)=>(Fu(e,typeof t!="symbol"?t+"":t,n),n),"queue_publicField"),Li=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"queue_async");const Vu="queue";class dr extends oe{constructor(t){super(t,Vu),Mi(this,"getNumRemainingCards",()=>Li(this,null,function*(){return yield this.call("getNumRemainingCards",{})})),Mi(this,"getCurrentStreak",()=>Li(this,null,function*(){return yield this.call("getCurrentStreak",{})}))}}a(dr,"QueueNamespace");var ju=Object.defineProperty,Fi=Object.getOwnPropertySymbols,Bu=Object.prototype.hasOwnProperty,Hu=Object.prototype.propertyIsEnumerable,fr=a((e,t,n)=>t in e?ju(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"plugin_base_defNormalProp"),Zu=a((e,t)=>{for(var n in t||(t={}))Bu.call(t,n)&&fr(e,n,t[n]);if(Fi)for(var n of Fi(t))Hu.call(t,n)&&fr(e,n,t[n]);return e},"plugin_base_spreadValues"),Z=a((e,t,n)=>(fr(e,typeof t!="symbol"?t+"":t,n),n),"plugin_base_publicField"),Ce=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"plugin_base_async");class hr{constructor(){Z(this,"apiCallPromise",{}),Z(this,"model",{}),Z(this,"listeners",{}),Z(this,"usedMessageIds",1),Z(this,"widgetInstanceId"),Z(this,"inSandbox"),Z(this,"isNative"),Z(this,"rootURL"),Z(this,"mountDiv"),Z(this,"widgetBodyResizeObserver",null),Z(this,"widgetOptions"),Z(this,"manifest"),Z(this,"id"),Z(this,"app",new Yn(this._call.bind(this),this)),Z(this,"editor",new Gn(this._call.bind(this))),Z(this,"event",new ur(this._call.bind(this),this)),Z(this,"messaging",new Qn(this._call.bind(this))),Z(this,"focus",new Kn(this._call.bind(this))),Z(this,"date",new qn(this._call.bind(this))),Z(this,"widget",new sr(this._call.bind(this))),Z(this,"window",new ar(this._call.bind(this))),Z(this,"powerup",new Xn(this._call.bind(this))),Z(this,"richText",new er(this._call.bind(this))),Z(this,"rem",new jn(this._call.bind(this))),Z(this,"card",new Wn(this._call.bind(this))),Z(this,"storage",new ir(this._call.bind(this))),Z(this,"settings",new rr(this._call.bind(this))),Z(this,"search",new tr(this._call.bind(this))),Z(this,"kb",new lr(this._call.bind(this))),Z(this,"scheduler",new cr(this._call.bind(this))),Z(this,"queue",new dr(this._call.bind(this))),window.onmessage=t=>{this._receive(t)},this.pluginLogger=Pi()(`plugin:${this.id||"Plugin"}`),this.logApi=Pi()(`plugin:API:${this.id||"Plugin"}`),this.logApi("START"),this.event.addListener(x.onActivate,void 0,this.receiveActivateMessage.bind(this)),this.event.addListener(x.onDeactivate,void 0,this.receiveDeactivateMessage.bind(this)),this.event.addListener(x.setDarkMode,void 0,this.setDarkMode.bind(this)),this.event.addListener(x.setCustomCSS,void 0,this.setCustomCSS.bind(this)),this._call("askToActivate",{})}pluginLogger(...t){}logApi(...t){}setDarkMode({darkMode:t}){this.inSandbox&&(document.body.classList.add(t?"dark":"light"),document.body.classList.remove(t?"light":"dark"))}setCustomCSS({cssBlocks:t,cssUrls:n}){const r=document.getElementsByTagName("head")[0];for(const i of[...r.children])i.classList.contains("custom-css")&&i.remove();for(const i of t){const s=document.createElement("style");s.classList.add("custom-css"),s.innerHTML=i,r.appendChild(s)}for(const i of n){const s=document.createElement("link");s.classList.add("custom-css"),s.rel="stylesheet",s.href=i,r.appendChild(s)}}track(t){let n=!1,r=!1,i=!1,s=[];const o=a(()=>{if(n){for(const{event:u,key:l}of s.flatMap(c=>c.reactiveDeps))this.event.removeListener(u,l,o);return}else r?i=!0:(r=!0,a(()=>Ce(this,null,function*(){s=yield $r(this,t,o,()=>{},s||[]),r=!1,i&&(i=!1,o())}),"effect")())},"run");return o(),()=>{n=!0}}loadManifest(){return Ce(this,null,function*(){if(!this.manifest)try{const t=yield fetch(this.rootURL+"manifest.json");if(t.ok){const n=yield t.json();this.manifest=n,this.id=n.id}}catch(t){console.log("Failed to load manifest.json",t)}})}receiveActivateMessage(t){return Ce(this,null,function*(){var n,r,i,s,o;if(!t.inSandbox&&!((n=window.activeWidgetIds)!=null&&n.has(t.widgetInstanceId))){console.error("Not activating widget",t.widgetInstanceId,"as it is already unmounted");return}if(!t.inSandbox&&!t.mountDiv)throw"Native plugin didn't receive mountDiv";const u=t.inSandbox?this.createMountDiv():t.mountDiv;this.inSandbox=t.inSandbox,this.isNative=!t.inSandbox,this.widgetOptions=t.widgetOptions,this.widgetInstanceId=t.widgetInstanceId,this.rootURL=t.rootURL,this.mountDiv=u,yield this.loadManifest(),this.isNative&&(window.widgetIdToWidget[this.widgetInstanceId]=this),this.onActivate(u,t.rootURL);const l=(i=(r=t.widgetOptions)==null?void 0:r.dimensions)==null?void 0:i.height,c=(o=(s=t.widgetOptions)==null?void 0:s.dimensions)==null?void 0:o.width;if(c=="auto"&&t.inSandbox&&(u.style.display="inline-block"),(l==="auto"||c==="auto")&&this.autoAdjustWidgetContainerDimension(),t.inSandbox&&(l==="auto"&&(document.documentElement.style.overflowY="hidden"),c==="auto"&&(document.documentElement.style.overflowX="hidden")),t.inSandbox)for(const m of t.styleSheetHREFs){const P=document.createElement("link");P.href=m,P.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(P)}yield this._call("activateCompleted",{})})}receiveDeactivateMessage(t){return Ce(this,null,function*(){this.widgetBodyResizeObserver&&this.widgetBodyResizeObserver.disconnect(),this.onDeactivate()})}createMountDiv(){const t=document.createElement("div");return document.body.appendChild(t),t}log(...t){this.pluginLogger(t)}_call(t,n,r){return Ce(this,null,function*(){const i=this.usedMessageIds++;typeof r=="string"?t=r+"."+t:typeof r=="object"&&(t=[...r,t].join("."));const s={pluginId:this.id,widgetInstanceId:this.widgetInstanceId,methodName:t,args:n,messageId:i,isIntendedForRemNoteAPIMain:!0};this.logApi("Call",i);const o=this.isNative?window:window.parent,l=yield new Promise((c,m)=>{this.apiCallPromise[i]=c;try{o.postMessage(s,"*")}catch(P){console.error(`Failed to call plugin method with arguments: ${t} ${n}`)}});if(this.logApi("Got response",l),l!=null&&l.error)throw new Error("Plugin Error: "+l.error);return l==null?void 0:l.response})}_receive(t){return Ce(this,null,function*(){var n,r,i;if((n=t.data)!=null&&n.isIntendedForRemNoteAPIPlugin){const s=t.data;if("messageId"in s){const o=s.messageId;this.logApi("API _receive",o,s,this.apiCallPromise[o]),this.apiCallPromise[o](s),delete this.apiCallPromise[o]}else if("callbackId"in s){const o=this.model[s.callbackId];o||console.error(`Tried to execute callback ${s.callbackId}, but it was not registered`);const u=yield o(s.args);s.callbackReturnValueHandlerId&&this._call("handleCallbackResponse",{result:u,callbackReturnValueHandlerId:s.callbackReturnValueHandlerId},"callback")}else if("eventId"in s){if(!_e(s.eventId))throw"Invalid event "+s.eventId;(i=(r=this.listeners[s.eventId])==null?void 0:r.get(s.listenerKey))==null||i.forEach(o=>o(s.args))}}})}autoAdjustWidgetContainerDimension(){return Ce(this,null,function*(){const t=new ResizeObserver(r=>{for(let i of r)if(i.contentBoxSize){const s=window.getComputedStyle(i.target),o=parseFloat(s.getPropertyValue("margin-block-start"))||0,u=parseFloat(s.getPropertyValue("margin-block-end"))||0,l=parseFloat(s.getPropertyValue("margin-inline-start"))||0,c=parseFloat(s.getPropertyValue("margin-inline-end"))||0,m={height:i.contentBoxSize[0].blockSize+o+u,width:i.contentBoxSize[0].inlineSize+l+c};this._call("widgetEvents.updateWidgetContainerDimension",m)}}),n=this.inSandbox?this.mountDiv:this.mountDiv.firstChild;!n||(t.observe(n),this.widgetBodyResizeObserver=t)})}createFakeEmbedComponent(t){return Ce(this,null,function*(){return this._call("widgetEvents.createFakeEmbedComponent",t)})}unmountFakeEmbedComponent(t){return Ce(this,null,function*(){return this._call("widgetEvents.unmountFakeEmbedComponent",{id:t})})}updateFakeEmbedComponentRect(t,n){return Ce(this,null,function*(){return this._call("widgetEvents.updateFakeEmbedComponentRect",Zu({id:t},n))})}updateFakeEmbedExternalProps(t,n){return Ce(this,null,function*(){return this._call("widgetEvents.updateFakeEmbedExternalProps",{id:t,externalProps:n})})}ping(){return Ce(this,null,function*(){return yield this._call("ping",{})})}}a(hr,"RNPlugin");var ne=J(568);let Wu=a(e=>crypto.getRandomValues(new Uint8Array(e)),"random"),zu=a((e,t,n)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*r*t/e.length);return(s=t)=>{let o="";for(;;){let u=n(i),l=i;for(;l--;)if(o+=e[u[l]&r]||"",o.length===s)return o}}},"customRandom"),Zd=a((e,t=21)=>zu(e,t,Wu),"customAlphabet"),Uu=a((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),""),"nanoid");var w=J(359),Vi=J.n(w),ji="1.13.6",Bi=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},yn=Array.prototype,pr=Object.prototype,Hi=typeof Symbol!="undefined"?Symbol.prototype:null,qu=yn.push,Yt=yn.slice,Jt=pr.toString,$u=pr.hasOwnProperty,Zi=typeof ArrayBuffer!="undefined",Gu=typeof DataView!="undefined",Ku=Array.isArray,Wi=Object.keys,zi=Object.create,Ui=Zi&&ArrayBuffer.isView,Qu=isNaN,Xu=isFinite,qi=!{toString:null}.propertyIsEnumerable("toString"),$i=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Yu=Math.pow(2,53)-1;function Se(e,t){return t=t==null?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var s=Array(t+1);for(i=0;i<t;i++)s[i]=arguments[i];return s[t]=r,e.apply(this,s)}}a(Se,"restArguments");function ht(e){var t=typeof e;return t==="function"||t==="object"&&!!e}a(ht,"isObject");function Ju(e){return e===null}a(Ju,"isNull");function Gi(e){return e===void 0}a(Gi,"isUndefined");function Ki(e){return e===!0||e===!1||Jt.call(e)==="[object Boolean]"}a(Ki,"isBoolean");function el(e){return!!(e&&e.nodeType===1)}a(el,"isElement");function ve(e){var t="[object "+e+"]";return function(n){return Jt.call(n)===t}}a(ve,"tagTester");var mr=ve("String"),Qi=ve("Number"),tl=ve("Date"),nl=ve("RegExp"),rl=ve("Error"),Xi=ve("Symbol"),Yi=ve("ArrayBuffer"),Ji=ve("Function"),il=Bi.document&&Bi.document.childNodes;typeof Int8Array!="object"&&typeof il!="function"&&(Ji=a(function(e){return typeof e=="function"||!1},"isFunction"));var Ee=Ji,es=ve("Object"),ts=Gu&&es(new DataView(new ArrayBuffer(8))),gr=typeof Map!="undefined"&&es(new Map),sl=ve("DataView");function al(e){return e!=null&&Ee(e.getInt8)&&Yi(e.buffer)}a(al,"ie10IsDataView");var _n=ts?al:sl,pt=Ku||ve("Array");function it(e,t){return e!=null&&$u.call(e,t)}a(it,"has");var vr=ve("Arguments");(function(){vr(arguments)||(vr=a(function(e){return it(e,"callee")},"isArguments"))})();var yr=vr;function ol(e){return!Xi(e)&&Xu(e)&&!isNaN(parseFloat(e))}a(ol,"isFinite_isFinite");function ns(e){return Qi(e)&&Qu(e)}a(ns,"isNaN_isNaN");function rs(e){return function(){return e}}a(rs,"constant");function is(e){return function(t){var n=e(t);return typeof n=="number"&&n>=0&&n<=Yu}}a(is,"createSizePropertyCheck");function ss(e){return function(t){return t==null?void 0:t[e]}}a(ss,"shallowProperty");var wn=ss("byteLength"),ul=is(wn),ll=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function cl(e){return Ui?Ui(e)&&!_n(e):ul(e)&&ll.test(Jt.call(e))}a(cl,"isTypedArray");var as=Zi?cl:rs(!1),be=ss("length");function dl(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return{contains:function(i){return t[i]===!0},push:function(i){return t[i]=!0,e.push(i)}}}a(dl,"emulatedSet");function os(e,t){t=dl(t);var n=$i.length,r=e.constructor,i=Ee(r)&&r.prototype||pr,s="constructor";for(it(e,s)&&!t.contains(s)&&t.push(s);n--;)s=$i[n],s in e&&e[s]!==i[s]&&!t.contains(s)&&t.push(s)}a(os,"collectNonEnumProps");function le(e){if(!ht(e))return[];if(Wi)return Wi(e);var t=[];for(var n in e)it(e,n)&&t.push(n);return qi&&os(e,t),t}a(le,"keys");function fl(e){if(e==null)return!0;var t=be(e);return typeof t=="number"&&(pt(e)||mr(e)||yr(e))?t===0:be(le(e))===0}a(fl,"isEmpty");function us(e,t){var n=le(t),r=n.length;if(e==null)return!r;for(var i=Object(e),s=0;s<r;s++){var o=n[s];if(t[o]!==i[o]||!(o in i))return!1}return!0}a(us,"isMatch");function z(e){if(e instanceof z)return e;if(!(this instanceof z))return new z(e);this._wrapped=e}a(z,"_"),z.VERSION=ji,z.prototype.value=function(){return this._wrapped},z.prototype.valueOf=z.prototype.toJSON=z.prototype.value,z.prototype.toString=function(){return String(this._wrapped)};function ls(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,wn(e))}a(ls,"toBufferView");var cs="[object DataView]";function _r(e,t,n,r){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var i=typeof e;return i!=="function"&&i!=="object"&&typeof t!="object"?!1:ds(e,t,n,r)}a(_r,"eq");function ds(e,t,n,r){e instanceof z&&(e=e._wrapped),t instanceof z&&(t=t._wrapped);var i=Jt.call(e);if(i!==Jt.call(t))return!1;if(ts&&i=="[object Object]"&&_n(e)){if(!_n(t))return!1;i=cs}switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return Hi.valueOf.call(e)===Hi.valueOf.call(t);case"[object ArrayBuffer]":case cs:return ds(ls(e),ls(t),n,r)}var s=i==="[object Array]";if(!s&&as(e)){var o=wn(e);if(o!==wn(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;s=!0}if(!s){if(typeof e!="object"||typeof t!="object")return!1;var u=e.constructor,l=t.constructor;if(u!==l&&!(Ee(u)&&u instanceof u&&Ee(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var c=n.length;c--;)if(n[c]===e)return r[c]===t;if(n.push(e),r.push(t),s){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!_r(e[c],t[c],n,r))return!1}else{var m=le(e),P;if(c=m.length,le(t).length!==c)return!1;for(;c--;)if(P=m[c],!(it(t,P)&&_r(e[P],t[P],n,r)))return!1}return n.pop(),r.pop(),!0}a(ds,"deepEq");function hl(e,t){return _r(e,t)}a(hl,"isEqual");function en(e){if(!ht(e))return[];var t=[];for(var n in e)t.push(n);return qi&&os(e,t),t}a(en,"allKeys");function wr(e){var t=be(e);return function(n){if(n==null)return!1;var r=en(n);if(be(r))return!1;for(var i=0;i<t;i++)if(!Ee(n[e[i]]))return!1;return e!==ps||!Ee(n[Er])}}a(wr,"ie11fingerprint");var Er="forEach",fs="has",Rr=["clear","delete"],hs=["get",fs,"set"],pl=Rr.concat(Er,hs),ps=Rr.concat(hs),ml=["add"].concat(Rr,Er,fs),gl=gr?wr(pl):ve("Map"),vl=gr?wr(ps):ve("WeakMap"),yl=gr?wr(ml):ve("Set"),_l=ve("WeakSet");function At(e){for(var t=le(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r}a(At,"values");function wl(e){for(var t=le(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r}a(wl,"pairs");function ms(e){for(var t={},n=le(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t}a(ms,"invert");function Pr(e){var t=[];for(var n in e)Ee(e[n])&&t.push(n);return t.sort()}a(Pr,"functions");function Sr(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||n==null)return n;for(var i=1;i<r;i++)for(var s=arguments[i],o=e(s),u=o.length,l=0;l<u;l++){var c=o[l];(!t||n[c]===void 0)&&(n[c]=s[c])}return n}}a(Sr,"createAssigner");var gs=Sr(en),En=Sr(le),vs=Sr(en,!0);function El(){return function(){}}a(El,"ctor");function ys(e){if(!ht(e))return{};if(zi)return zi(e);var t=El();t.prototype=e;var n=new t;return t.prototype=null,n}a(ys,"baseCreate");function Rl(e,t){var n=ys(e);return t&&En(n,t),n}a(Rl,"create");function Pl(e){return ht(e)?pt(e)?e.slice():gs({},e):e}a(Pl,"clone");function Sl(e,t){return t(e),e}a(Sl,"tap");function _s(e){return pt(e)?e:[e]}a(_s,"toPath"),z.toPath=_s;function tn(e){return z.toPath(e)}a(tn,"_toPath_toPath");function br(e,t){for(var n=t.length,r=0;r<n;r++){if(e==null)return;e=e[t[r]]}return n?e:void 0}a(br,"deepGet");function ws(e,t,n){var r=br(e,tn(t));return Gi(r)?n:r}a(ws,"get");function bl(e,t){t=tn(t);for(var n=t.length,r=0;r<n;r++){var i=t[r];if(!it(e,i))return!1;e=e[i]}return!!n}a(bl,"has_has");function xr(e){return e}a(xr,"identity");function nn(e){return e=En({},e),function(t){return us(t,e)}}a(nn,"matcher");function Tr(e){return e=tn(e),function(t){return br(t,e)}}a(Tr,"property");function rn(e,t,n){if(t===void 0)return e;switch(n==null?3:n){case 1:return function(r){return e.call(t,r)};case 3:return function(r,i,s){return e.call(t,r,i,s)};case 4:return function(r,i,s,o){return e.call(t,r,i,s,o)}}return function(){return e.apply(t,arguments)}}a(rn,"optimizeCb");function Es(e,t,n){return e==null?xr:Ee(e)?rn(e,t,n):ht(e)&&!pt(e)?nn(e):Tr(e)}a(Es,"baseIteratee");function Or(e,t){return Es(e,t,1/0)}a(Or,"iteratee"),z.iteratee=Or;function xe(e,t,n){return z.iteratee!==Or?z.iteratee(e,t):Es(e,t,n)}a(xe,"cb");function xl(e,t,n){t=xe(t,n);for(var r=le(e),i=r.length,s={},o=0;o<i;o++){var u=r[o];s[u]=t(e[u],u,e)}return s}a(xl,"mapObject");function Rs(){}a(Rs,"noop");function Tl(e){return e==null?Rs:function(t){return ws(e,t)}}a(Tl,"propertyOf");function Ol(e,t,n){var r=Array(Math.max(0,e));t=rn(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r}a(Ol,"times");function Ar(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}a(Ar,"random_random");var sn=Date.now||function(){return new Date().getTime()};function Ps(e){var t=a(function(s){return e[s]},"escaper"),n="(?:"+le(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(s){return s=s==null?"":""+s,r.test(s)?s.replace(i,t):s}}a(Ps,"createEscaper");var Ss={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Al=Ps(Ss),Cl=ms(Ss),Dl=Ps(Cl),Nl=z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Cr=/(.)^/,Il={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},kl=/\\|'|\r|\n|\u2028|\u2029/g;function Ml(e){return"\\"+Il[e]}a(Ml,"escapeChar");var Ll=/^\s*(\w|\$)+\s*$/;function Fl(e,t,n){!t&&n&&(t=n),t=vs({},t,z.templateSettings);var r=RegExp([(t.escape||Cr).source,(t.interpolate||Cr).source,(t.evaluate||Cr).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(c,m,P,de,L){return s+=e.slice(i,L).replace(kl,Ml),i=L+c.length,m?s+=`'+
((__t=(`+m+`))==null?'':_.escape(__t))+
'`:P?s+=`'+
((__t=(`+P+`))==null?'':__t)+
'`:de&&(s+=`';
`+de+`
__p+='`),c}),s+=`';
`;var o=t.variable;if(o){if(!Ll.test(o))throw new Error("variable is not a bare identifier: "+o)}else s=`with(obj||{}){
`+s+`}
`,o="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var u;try{u=new Function(o,"_",s)}catch(c){throw c.source=s,c}var l=a(function(c){return u.call(this,c,z)},"template");return l.source="function("+o+`){
`+s+"}",l}a(Fl,"template");function Vl(e,t,n){t=tn(t);var r=t.length;if(!r)return Ee(n)?n.call(e):n;for(var i=0;i<r;i++){var s=e==null?void 0:e[t[i]];s===void 0&&(s=n,i=r),e=Ee(s)?s.call(e):s}return e}a(Vl,"result");var jl=0;function Bl(e){var t=++jl+"";return e?e+t:t}a(Bl,"uniqueId");function Hl(e){var t=z(e);return t._chain=!0,t}a(Hl,"chain");function bs(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var s=ys(e.prototype),o=e.apply(s,i);return ht(o)?o:s}a(bs,"executeBound");var Dr=Se(function(e,t){var n=Dr.placeholder,r=a(function(){for(var i=0,s=t.length,o=Array(s),u=0;u<s;u++)o[u]=t[u]===n?arguments[i++]:t[u];for(;i<arguments.length;)o.push(arguments[i++]);return bs(e,r,this,this,o)},"bound");return r});Dr.placeholder=z;var Rn=Dr,xs=Se(function(e,t,n){if(!Ee(e))throw new TypeError("Bind must be called on a function");var r=Se(function(i){return bs(e,r,t,this,n.concat(i))});return r}),Ae=is(be);function mt(e,t,n,r){if(r=r||[],!t&&t!==0)t=1/0;else if(t<=0)return r.concat(e);for(var i=r.length,s=0,o=be(e);s<o;s++){var u=e[s];if(Ae(u)&&(pt(u)||yr(u)))if(t>1)mt(u,t-1,n,r),i=r.length;else for(var l=0,c=u.length;l<c;)r[i++]=u[l++];else n||(r[i++]=u)}return r}a(mt,"flatten");var Zl=Se(function(e,t){t=mt(t,!1,!1);var n=t.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=xs(e[r],e)}return e});function Wl(e,t){var n=a(function(r){var i=n.cache,s=""+(t?t.apply(this,arguments):r);return it(i,s)||(i[s]=e.apply(this,arguments)),i[s]},"memoize");return n.cache={},n}a(Wl,"memoize");var Ts=Se(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),zl=Rn(Ts,z,1);function Ul(e,t,n){var r,i,s,o,u=0;n||(n={});var l=a(function(){u=n.leading===!1?0:sn(),r=null,o=e.apply(i,s),r||(i=s=null)},"later"),c=a(function(){var m=sn();!u&&n.leading===!1&&(u=m);var P=t-(m-u);return i=this,s=arguments,P<=0||P>t?(r&&(clearTimeout(r),r=null),u=m,o=e.apply(i,s),r||(i=s=null)):!r&&n.trailing!==!1&&(r=setTimeout(l,P)),o},"throttled");return c.cancel=function(){clearTimeout(r),u=0,r=i=s=null},c}a(Ul,"throttle");function ql(e,t,n){var r,i,s,o,u,l=a(function(){var m=sn()-i;t>m?r=setTimeout(l,t-m):(r=null,n||(o=e.apply(u,s)),r||(s=u=null))},"later"),c=Se(function(m){return u=this,s=m,i=sn(),r||(r=setTimeout(l,t),n&&(o=e.apply(u,s))),o});return c.cancel=function(){clearTimeout(r),r=s=u=null},c}a(ql,"debounce");function $l(e,t){return Rn(t,e)}a($l,"wrap");function Nr(e){return function(){return!e.apply(this,arguments)}}a(Nr,"negate");function Gl(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}a(Gl,"compose");function Kl(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}a(Kl,"after");function Os(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}a(Os,"before");var Ql=Rn(Os,2);function As(e,t,n){t=xe(t,n);for(var r=le(e),i,s=0,o=r.length;s<o;s++)if(i=r[s],t(e[i],i,e))return i}a(As,"findKey");function Cs(e){return function(t,n,r){n=xe(n,r);for(var i=be(t),s=e>0?0:i-1;s>=0&&s<i;s+=e)if(n(t[s],s,t))return s;return-1}}a(Cs,"createPredicateIndexFinder");var Ir=Cs(1),Ds=Cs(-1);function Ns(e,t,n,r){n=xe(n,r,1);for(var i=n(t),s=0,o=be(e);s<o;){var u=Math.floor((s+o)/2);n(e[u])<i?s=u+1:o=u}return s}a(Ns,"sortedIndex");function Is(e,t,n){return function(r,i,s){var o=0,u=be(r);if(typeof s=="number")e>0?o=s>=0?s:Math.max(s+u,o):u=s>=0?Math.min(s+1,u):s+u+1;else if(n&&s&&u)return s=n(r,i),r[s]===i?s:-1;if(i!==i)return s=t(Yt.call(r,o,u),ns),s>=0?s+o:-1;for(s=e>0?o:u-1;s>=0&&s<u;s+=e)if(r[s]===i)return s;return-1}}a(Is,"createIndexFinder");var ks=Is(1,Ir,Ns),Xl=Is(-1,Ds);function kr(e,t,n){var r=Ae(e)?Ir:As,i=r(e,t,n);if(i!==void 0&&i!==-1)return e[i]}a(kr,"find");function Yl(e,t){return kr(e,nn(t))}a(Yl,"findWhere");function Ke(e,t,n){t=rn(t,n);var r,i;if(Ae(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var s=le(e);for(r=0,i=s.length;r<i;r++)t(e[s[r]],s[r],e)}return e}a(Ke,"each");function gt(e,t,n){t=xe(t,n);for(var r=!Ae(e)&&le(e),i=(r||e).length,s=Array(i),o=0;o<i;o++){var u=r?r[o]:o;s[o]=t(e[u],u,e)}return s}a(gt,"map");function Ms(e){var t=a(function(n,r,i,s){var o=!Ae(n)&&le(n),u=(o||n).length,l=e>0?0:u-1;for(s||(i=n[o?o[l]:l],l+=e);l>=0&&l<u;l+=e){var c=o?o[l]:l;i=r(i,n[c],c,n)}return i},"reducer");return function(n,r,i,s){var o=arguments.length>=3;return t(n,rn(r,s,4),i,o)}}a(Ms,"createReduce");var Mr=Ms(1),Ls=Ms(-1);function Ct(e,t,n){var r=[];return t=xe(t,n),Ke(e,function(i,s,o){t(i,s,o)&&r.push(i)}),r}a(Ct,"filter");function Jl(e,t,n){return Ct(e,Nr(xe(t)),n)}a(Jl,"reject");function Fs(e,t,n){t=xe(t,n);for(var r=!Ae(e)&&le(e),i=(r||e).length,s=0;s<i;s++){var o=r?r[s]:s;if(!t(e[o],o,e))return!1}return!0}a(Fs,"every");function Vs(e,t,n){t=xe(t,n);for(var r=!Ae(e)&&le(e),i=(r||e).length,s=0;s<i;s++){var o=r?r[s]:s;if(t(e[o],o,e))return!0}return!1}a(Vs,"some");function Qe(e,t,n,r){return Ae(e)||(e=At(e)),(typeof n!="number"||r)&&(n=0),ks(e,t,n)>=0}a(Qe,"contains");var ec=Se(function(e,t,n){var r,i;return Ee(t)?i=t:(t=tn(t),r=t.slice(0,-1),t=t[t.length-1]),gt(e,function(s){var o=i;if(!o){if(r&&r.length&&(s=br(s,r)),s==null)return;o=s[t]}return o==null?o:o.apply(s,n)})});function Lr(e,t){return gt(e,Tr(t))}a(Lr,"pluck");function tc(e,t){return Ct(e,nn(t))}a(tc,"where");function js(e,t,n){var r=-1/0,i=-1/0,s,o;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=Ae(e)?e:At(e);for(var u=0,l=e.length;u<l;u++)s=e[u],s!=null&&s>r&&(r=s)}else t=xe(t,n),Ke(e,function(c,m,P){o=t(c,m,P),(o>i||o===-1/0&&r===-1/0)&&(r=c,i=o)});return r}a(js,"max");function nc(e,t,n){var r=1/0,i=1/0,s,o;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=Ae(e)?e:At(e);for(var u=0,l=e.length;u<l;u++)s=e[u],s!=null&&s<r&&(r=s)}else t=xe(t,n),Ke(e,function(c,m,P){o=t(c,m,P),(o<i||o===1/0&&r===1/0)&&(r=c,i=o)});return r}a(nc,"min");var rc=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Bs(e){return e?pt(e)?Yt.call(e):mr(e)?e.match(rc):Ae(e)?gt(e,xr):At(e):[]}a(Bs,"toArray");function Hs(e,t,n){if(t==null||n)return Ae(e)||(e=At(e)),e[Ar(e.length-1)];var r=Bs(e),i=be(r);t=Math.max(Math.min(t,i),0);for(var s=i-1,o=0;o<t;o++){var u=Ar(o,s),l=r[o];r[o]=r[u],r[u]=l}return r.slice(0,t)}a(Hs,"sample");function ic(e){return Hs(e,1/0)}a(ic,"shuffle");function sc(e,t,n){var r=0;return t=xe(t,n),Lr(gt(e,function(i,s,o){return{value:i,index:r++,criteria:t(i,s,o)}}).sort(function(i,s){var o=i.criteria,u=s.criteria;if(o!==u){if(o>u||o===void 0)return 1;if(o<u||u===void 0)return-1}return i.index-s.index}),"value")}a(sc,"sortBy");function Pn(e,t){return function(n,r,i){var s=t?[[],[]]:{};return r=xe(r,i),Ke(n,function(o,u){var l=r(o,u,n);e(s,o,l)}),s}}a(Pn,"group");var ac=Pn(function(e,t,n){it(e,n)?e[n].push(t):e[n]=[t]}),oc=Pn(function(e,t,n){e[n]=t}),uc=Pn(function(e,t,n){it(e,n)?e[n]++:e[n]=1}),lc=Pn(function(e,t,n){e[n?0:1].push(t)},!0);function cc(e){return e==null?0:Ae(e)?e.length:le(e).length}a(cc,"size");function dc(e,t,n){return t in n}a(dc,"keyInObj");var Zs=Se(function(e,t){var n={},r=t[0];if(e==null)return n;Ee(r)?(t.length>1&&(r=rn(r,t[1])),t=en(e)):(r=dc,t=mt(t,!1,!1),e=Object(e));for(var i=0,s=t.length;i<s;i++){var o=t[i],u=e[o];r(u,o,e)&&(n[o]=u)}return n}),fc=Se(function(e,t){var n=t[0],r;return Ee(n)?(n=Nr(n),t.length>1&&(r=t[1])):(t=gt(mt(t,!1,!1),String),n=a(function(i,s){return!Qe(t,s)},"iteratee")),Zs(e,n,r)});function Ws(e,t,n){return Yt.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))}a(Ws,"initial");function Fr(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[0]:Ws(e,e.length-t)}a(Fr,"first");function Sn(e,t,n){return Yt.call(e,t==null||n?1:t)}a(Sn,"rest");function hc(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[e.length-1]:Sn(e,Math.max(0,e.length-t))}a(hc,"last");function pc(e){return Ct(e,Boolean)}a(pc,"compact");function mc(e,t){return mt(e,t,!1)}a(mc,"flatten_flatten");var zs=Se(function(e,t){return t=mt(t,!0,!0),Ct(e,function(n){return!Qe(t,n)})}),gc=Se(function(e,t){return zs(e,t)});function Vr(e,t,n,r){Ki(t)||(r=n,n=t,t=!1),n!=null&&(n=xe(n,r));for(var i=[],s=[],o=0,u=be(e);o<u;o++){var l=e[o],c=n?n(l,o,e):l;t&&!n?((!o||s!==c)&&i.push(l),s=c):n?Qe(s,c)||(s.push(c),i.push(l)):Qe(i,l)||i.push(l)}return i}a(Vr,"uniq");var vc=Se(function(e){return Vr(mt(e,!0,!0))});function yc(e){for(var t=[],n=arguments.length,r=0,i=be(e);r<i;r++){var s=e[r];if(!Qe(t,s)){var o;for(o=1;o<n&&Qe(arguments[o],s);o++);o===n&&t.push(s)}}return t}a(yc,"intersection");function jr(e){for(var t=e&&js(e,be).length||0,n=Array(t),r=0;r<t;r++)n[r]=Lr(e,r);return n}a(jr,"unzip");var _c=Se(jr);function wc(e,t){for(var n={},r=0,i=be(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n}a(wc,"object");function Ec(e,t,n){t==null&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),s=0;s<r;s++,e+=n)i[s]=e;return i}a(Ec,"range");function Rc(e,t){if(t==null||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(Yt.call(e,r,r+=t));return n}a(Rc,"chunk");function Br(e,t){return e._chain?z(t).chain():t}a(Br,"chainResult");function Us(e){return Ke(Pr(e),function(t){var n=z[t]=e[t];z.prototype[t]=function(){var r=[this._wrapped];return qu.apply(r,arguments),Br(this,n.apply(z,r))}}),z}a(Us,"mixin"),Ke(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=yn[e];z.prototype[e]=function(){var n=this._wrapped;return n!=null&&(t.apply(n,arguments),(e==="shift"||e==="splice")&&n.length===0&&delete n[0]),Br(this,n)}}),Ke(["concat","join","slice"],function(e){var t=yn[e];z.prototype[e]=function(){var n=this._wrapped;return n!=null&&(n=t.apply(n,arguments)),Br(this,n)}});var Pc=z,Hr=Us(A);Hr._=Hr;var qs=Hr,Sc=Object.defineProperty,bc=a((e,t,n)=>t in e?Sc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"AncestorScrollDetector_defNormalProp"),Zr=a((e,t,n)=>(bc(e,typeof t!="symbol"?t+"":t,n),n),"AncestorScrollDetector_publicField");class $s{constructor(t){Zr(this,"tree",new Map),Zr(this,"rootNode"),Zr(this,"handleScroll",n=>{if(!n.target)return;const r=n.target;if(!this.tree.get(r))return;r.querySelectorAll(".js-fake-embed").forEach(o=>{const u=this.tree.get(o);!u||u.callback&&u.callback(r)})}),this.rootNode=t}addListener(t,n){var r;if(!((r=this.rootNode)!=null&&r.contains(t))||this.tree.has(t))return;let i=t;for(this.tree.set(i,{node:i,children:new Map,leaf:!0,callback:n});i&&i.parentElement;){const s=this.tree.get(i.parentElement);if(s){s.children.set(i,!0);break}this.tree.set(i.parentElement,{node:i.parentElement,children:new Map([[i,!0]])}),i.parentElement.addEventListener("scroll",this.handleScroll),i=i.parentElement}}removeListener(t){const n=this.tree.get(t);if(!n||!n.leaf)return;let r=t;for(;r;){const i=this.tree.get(r);if(!i)break;const s=r.parentElement?this.tree.get(r.parentElement):null;if(r!==this.rootNode&&!s||s&&!s.children.has(r)||(s&&(s==null||s.children.delete(r)),i.children.size!==0)||(r.removeEventListener("scroll",this.handleScroll),this.tree.delete(r),!s))break;r=s.node}}}a($s,"AncestorScrollDetector");const Wr=(0,w.createContext)({}),xc=a(({root:e,children:t})=>{const n=(0,w.useMemo)(()=>new $s(e),[]);return(0,ne.jsx)(Wr.Provider,{value:n,children:t})},"AncestorScrollDetectorProvider"),Tc=a(()=>(0,w.useContext)(Wr),"useAncestorScrollDetector"),Gs=(0,w.createContext)(null),Oc=a(({plugin:e,children:t})=>(0,ne.jsx)(Gs.Provider,{value:e,children:t}),"PluginProvider"),Xe=a(()=>{const e=(0,w.useContext)(Gs);if(!e)throw"You must wrap any RemNote API hooks in a <PluginProvider/>";return e},"usePlugin"),Ks=(0,w.createContext)(null),Ac=a(({pluginRoot:e,children:t})=>(0,ne.jsx)(Ks.Provider,{value:e,children:t}),"PluginRootProvider"),Cc=a(()=>(0,w.useContext)(Ks),"usePluginRootDivRef");function Dc(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(i){i(n)}),(r=e.get("*"))&&r.slice().map(function(i){i(t,n)})}}}a(Dc,"mitt");const bn=Dc();var xn=(e=>(e.PluginBodyResizeOrTreeRenders="PluginBodyResizeOrTreeRenders",e))(xn||{});const Nc=a((e,t)=>{(0,w.useEffect)(()=>(bn.on(e,t),()=>bn.off(e,t)),[e,t])},"useEvent");function Ic(e){const t=w.useRef(e),n=w.useRef(0);return qs.isEqual(e,t.current)||(t.current=e,n.current+=1),w.useMemo(()=>t.current,[n.current])}a(Ic,"useDeepCompareMemoize");function kc(e,t){return w.useEffect(e,Ic(t))}a(kc,"useDeepCompareEffectNoCheck");var Mc=Object.defineProperty,Lc=Object.defineProperties,Fc=Object.getOwnPropertyDescriptors,Tn=Object.getOwnPropertySymbols,Qs=Object.prototype.hasOwnProperty,Xs=Object.prototype.propertyIsEnumerable,Ys=a((e,t,n)=>t in e?Mc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"FakeEmbed_defNormalProp"),Ye=a((e,t)=>{for(var n in t||(t={}))Qs.call(t,n)&&Ys(e,n,t[n]);if(Tn)for(var n of Tn(t))Xs.call(t,n)&&Ys(e,n,t[n]);return e},"FakeEmbed_spreadValues"),Vc=a((e,t)=>Lc(e,Fc(t)),"FakeEmbed_spreadProps"),jc=a((e,t)=>{var n={};for(var r in e)Qs.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Tn)for(var r of Tn(e))t.indexOf(r)<0&&Xs.call(e,r)&&(n[r]=e[r]);return n},"FakeEmbed_objRest"),Bc=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"FakeEmbed_async");const Hc=a(e=>typeof e=="string"&&/[0-9]{1,}%/.test(e)?parseInt(e.replace("%","")):void 0,"parsePercentage"),Zc=a(e=>typeof e=="string"&&/[0-9]{1,}px/.test(e)?parseInt(e.replace("px","")):void 0,"parsePx"),On=a((e,t)=>{const n=Hc(t),r=Zc(t);return n?e*n/100:r||null},"dimensionToNumber"),Wc=a(({maxWidth:e,maxHeight:t,width:n,height:r,constraintWidth:i,constraintHeight:s})=>{const o=typeof n=="string"&&n!=="auto"?On(i,n):n,u=typeof e=="string"?On(i,e):e,l=typeof r=="string"&&r!=="auto"?On(s,r):r,c=typeof t=="string"?On(s,t):t;return{width:o,maxWidth:u,height:l,maxHeight:c}},"calculateStyles");function zc(e){return e.clientHeight<e.scrollHeight}a(zc,"isVerticallyScrollable");function Uc(e){return e.clientWidth<e.scrollWidth}a(Uc,"isHorizontallScrollable");const qc=a(({componentType:e,externalProps:t,maxHeight:n=null,maxWidth:r=null,height:i="auto",width:s="auto",constraintRef:o="parent"})=>{var u,l,c,m,P,de;(((l=(u=window==null?void 0:window.Env)==null?void 0:u.deploy)==null?void 0:l.isDevelopment)||((m=(c=window==null?void 0:window.Env)==null?void 0:c.deploy)==null?void 0:m.isStaging)||((de=(P=window==null?void 0:window.Env)==null?void 0:P.app)==null?void 0:de.isCypress))&&(console.error("You imported the wrong component!"),alert("You imported the wrong component!"));const L=(0,w.useRef)(null),F=Xe(),at=Cc(),Te=(0,w.useRef)(),[It,Dd]=(0,w.useState)(!1),Gr=Tc(),Dn=(0,w.useRef)(),Je=(0,w.useRef)({height:i,width:s,maxHeight:n,maxWidth:r}),vt=(0,w.useRef)(),Sa=(0,w.useCallback)(B=>{!L.current||B.height===void 0||B.width===void 0||F.isNative||(L.current.style.height=B.height+"px",L.current.style.width=B.width+"px")},[]),ba=a(B=>{var K;B.type=="wheel"?Nd(B):(K=L.current)==null||K.dispatchEvent(new Event(B.type,Vc(Ye({},B),{bubbles:!0})))},"onDOMEvent"),Nd=(0,w.useCallback)(B=>{if(!(!L.current||B.deltaY===void 0||B.deltaX===void 0)){if(B.deltaY){let K=L.current;for(;K&&!zc(K);)K=K.parentElement;K&&(K.scrollTop+=B.deltaY)}if(B.deltaX){let K=L.current;for(;K&&!Uc(K);)K=K.parentElement;K&&(K.scrollLeft+=B.deltaX)}}},[]),xa=a(()=>{if(!Te.current||!F)return;const B=Dn.current?Wc({constraintWidth:Dn.current.constraintWidth,constraintHeight:Dn.current.constraintHeight,height:Je.current.height,width:Je.current.width,maxHeight:Je.current.maxHeight,maxWidth:Je.current.maxWidth}):{height:Je.current.height,width:Je.current.width,maxHeight:Je.current.maxHeight,maxWidth:Je.current.maxWidth};F.updateFakeEmbedComponentRect(Te.current,B)},"updateDimensions"),Ta=a(()=>{var B;if(!(F!=null&&F.inSandbox)||!L.current||!Te.current)return;const{top:K,left:yt}=L.current.getBoundingClientRect(),_t=((B=at==null?void 0:at.current)==null?void 0:B.getBoundingClientRect())||{top:0,left:0},Ze=K-_t.top,wt=yt-_t.left;vt.current&&(vt==null?void 0:vt.current.top)===Ze&&(vt==null?void 0:vt.current.left)===wt||(vt.current={left:wt,top:Ze},F.updateFakeEmbedComponentRect(Te.current,{top:Ze,left:wt}))},"handleResizeOrScrollEvent");(0,w.useEffect)(()=>{if(F||console.error("You must wrap your components in a <PluginProvider/> or a renderWidget call."),!F||!L.current)return;Oa();const B=Uu();return Bc(void 0,null,function*(){var K;const{top:yt,left:_t}=L.current.getBoundingClientRect();vt.current={top:yt,left:_t};const Ze=((K=at==null?void 0:at.current)==null?void 0:K.getBoundingClientRect())||{top:0,left:0},wt=yt-Ze.top,Kr=_t-Ze.left;F.event.addListener(x.FakeEmbedComponentDimensionChange,B,Sa),F.event.addListener(x.FakeEmbedDOMEvent,B,ba),F.isNative&&window.nativePluginDivs.set("virtual-"+B,L.current),yield F.createFakeEmbedComponent({id:B,type:e,top:wt,left:Kr,externalProps:t}),Te.current=B,Dd(!0)}),()=>{!Te.current||(F.unmountFakeEmbedComponent(Te.current),F.isNative&&window.nativePluginDivs.delete("virtual-"+B),F.event.removeListener(x.FakeEmbedComponentDimensionChange,Te.current,Sa),F.event.removeListener(x.FakeEmbedDOMEvent,Te.current,ba))}},[]);function Oa(){try{JSON.stringify(t)}catch(B){throw console.error("ExternalProps are not serializable.",t),new Error(`All props passed to a RemNote React Component must be JSON serializable. Check the devtools to see your props for your ${e} component.`)}}a(Oa,"throwErrorIfExternalPropsAreNotSerializable");function Id(){Oa(),Te.current&&F.updateFakeEmbedExternalProps(Te.current,t)}return a(Id,"updateExternalProps"),kc(Id,[t]),(0,w.useEffect)(()=>{!It||(Je.current={maxHeight:n,maxWidth:r,height:i,width:s},xa())},[n,r,s,i,It]),(0,w.useEffect)(()=>{var B;if((F==null?void 0:F.inSandbox)&&Te.current&&It&&o){const K=o==="parent"?(B=L.current)==null?void 0:B.parentElement:o.current;if(!K)return;const yt=new ResizeObserver(_t=>{for(const Ze of _t)if(Ze.contentBoxSize){const wt=Ze.contentBoxSize[0].inlineSize,Kr=Ze.contentBoxSize[0].blockSize;Dn.current={constraintHeight:Kr,constraintWidth:wt},xa()}});return yt.observe(K),()=>yt.disconnect()}},[o,It]),Nc(xn.PluginBodyResizeOrTreeRenders,Ta),(0,w.useLayoutEffect)(()=>{if(!(!It||!L.current||!Gr))return Gr.addListener(L.current,qs.debounce(Ta,10)),()=>{L.current&&Gr.removeListener(L.current)}},[It]),(0,w.useEffect)(()=>()=>{F&&Te.current&&F.unmountFakeEmbedComponent(Te.current)},[]),(0,ne.jsx)("div",{ref:L,className:"js-fake-embed"})},"FakeEmbedHost"),st=a(e=>{const t=e,{width:n,maxHeight:r,constraintRef:i,height:s,maxWidth:o,componentType:u}=t,l=jc(t,["width","maxHeight","constraintRef","height","maxWidth","componentType"]);return(0,ne.jsx)(qc,{componentType:u,externalProps:l,width:n,height:s,maxHeight:r,maxWidth:o,constraintRef:i})},"FakeEmbedHostConcrete");class Js extends w.Component{render(){return(0,ne.jsx)(st,Ye({componentType:je.RichTextEditor},this.props))}}a(Js,"RichTextEditor");class ea extends w.Component{render(){return(0,ne.jsx)(st,Ye({componentType:je.RichText},this.props))}}a(ea,"RichText");class ta extends w.Component{render(){return(0,ne.jsx)(st,Ye({componentType:je.RemViewer},this.props))}}a(ta,"RemViewer");class na extends w.Component{render(){return(0,ne.jsx)(st,Ye({componentType:je.RemRichTextEditor},this.props))}}a(na,"RemRichTextEditor");class ra extends w.Component{render(){return(0,ne.jsx)(st,Ye({componentType:je.RemHierarchyEditorTree},this.props))}}a(ra,"RemHierarchyEditorTree");class ia extends w.Component{render(){return(0,ne.jsx)(st,Ye({componentType:je.Queue},this.props))}}a(ia,"Queue");class sa extends w.Component{render(){return(0,ne.jsx)(st,Ye({componentType:je.LoadingSpinner},this.props))}}a(sa,"LoadingSpinner");class aa extends w.Component{render(){return(0,ne.jsx)(st,Ye({componentType:je.PreviewRemCards},this.props))}}a(aa,"PreviewRemCards");var $c=J(318),oa=J.n($c),Gc=Object.defineProperty,Kc=a((e,t,n)=>t in e?Gc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"PluginRenderer_defNormalProp"),ua=a((e,t,n)=>(Kc(e,typeof t!="symbol"?t+"":t,n),n),"PluginRenderer_publicField"),la=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"PluginRenderer_async");const Qc=a(({plugin:e,children:t})=>{const n=(0,w.useRef)(null);(0,w.useEffect)(()=>{if(!n.current||!e.inSandbox)return;const u=new ResizeObserver(()=>{!n.current||bn.emit(xn.PluginBodyResizeOrTreeRenders)}),l=new MutationObserver((c,m)=>{for(const P of c)(P.type==="attributes"||P.type==="childList")&&bn.emit(xn.PluginBodyResizeOrTreeRenders)});return l.observe(n.current,{attributes:!0,childList:!0,subtree:!0}),u.observe(n.current),()=>{!n.current||(u.disconnect(),l.disconnect())}},[]);const r=e.inSandbox?{current:document.getElementsByTagName("html")[0]}:n,i=e.inSandbox?document.getElementsByTagName("html")[0]:e.mountDiv,s=e.inSandbox?xc:Xc,o=(0,ne.jsx)("div",{ref:n,className:"plugin rn-clr-content-primary rn-clr-background-primary","data-plugin-id":e.id,children:t});return(0,ne.jsx)(Oc,{plugin:e,children:(0,ne.jsx)(Ac,{pluginRoot:r,children:(0,ne.jsx)(s,{root:i,children:o})})})},"PluginWrapper");function Xc(e){return(0,ne.jsx)(Wr.Provider,{value:null,children:e.children})}a(Xc,"NoScrollDetector");class An extends hr{constructor(t,n){super(),ua(this,"initReact"),ua(this,"onDeactivateReact"),this.initReact=t,this.onDeactivateReact=n}onActivate(t,n){return la(this,null,function*(){this.initReact(this,t,n)})}onDeactivate(){return la(this,null,function*(){this.onDeactivateReact(this)})}}a(An,"ReactRNPlugin");const ca=a(e=>{const t=a(n=>{const r=a((s,o,u)=>oa().render((0,ne.jsxs)(w.StrictMode,{children:[(0,ne.jsx)(Qc,{plugin:s,children:(0,ne.jsx)(e,{})}),(0,ne.jsx)("link",{rel:"stylesheet",href:`${u}App.css`,as:"style",type:"text/css",crossOrigin:"anonymous"})]}),o),"initReact"),i=a(s=>{console.log("onDeactivateReact"),oa().unmountComponentAtNode(s.mountDiv)},"onDeactivateReact");return n?(window.__plugin?(console.log("[HMR] Hot reloading RemNote plugin widget."),i(window.__plugin),r(window.__plugin,window.__plugin.mountDiv,window.__plugin.rootURL)):window.__plugin=new An(r,i),window.__plugin):new An(r,i)},"makePlugin");try{const n=new URL(IMPORT_META.url).searchParams,r=n.get("widgetName"),i=n.get("pluginId");window.nativePluginRenderers.set(`${i}.${r}`,t)}catch(n){t(!0)}},"renderWidget");function Yc(e,t){function n(){const r=Xe();return(0,w.useEffect)(()=>(r&&e(r),()=>{r&&t(r)}),[r]),null}a(n,"IndexWidget"),ca(n)}a(Yc,"declareIndexPlugin");function Jc(e){return zr(x.MessageBroadcast,void 0,e)}a(Jc,"useOnMessageBroadcast");function zr(e,t,n){const r=Xe();(0,w.useEffect)(()=>(r.event.addListener(e,t,n),()=>{r.event.removeListener(e,t,n)}),[e,t,n])}a(zr,"useAPIEventListener");var ed=Object.defineProperty,da=Object.getOwnPropertySymbols,td=Object.prototype.hasOwnProperty,nd=Object.prototype.propertyIsEnumerable,fa=a((e,t,n)=>t in e?ed(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"rem_hooks_defNormalProp"),rd=a((e,t)=>{for(var n in t||(t={}))td.call(t,n)&&fa(e,n,t[n]);if(da)for(var n of da(t))nd.call(t,n)&&fa(e,n,t[n]);return e},"rem_hooks_spreadValues"),id=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"rem_hooks_async");function ha(e,t){const n=new Set(t);return e.filter(r=>!n.has(r))}a(ha,"rem_hooks_difference");function sd(e){return e.filter(t=>t)}a(sd,"rem_hooks_compact");function ad(e){const t=Xe(),n=sd(e||[]),[r,i]=(0,w.useState)({}),[s,o]=(0,w.useState)(n.map(P=>r[P])),u=a((P,de)=>{!de||i(L=>{const F=rd({},L);return F[P]=de,o(n.map(at=>F[at])),F})},"setRem"),l=a(P=>id(this,null,function*(){u(P,yield t.rem.findOne(P))}),"refetchRem"),c=(0,w.useRef)([]),m=(0,w.useRef)(new Map);return(0,w.useEffect)(()=>{const P=ha(n,c.current),de=ha(c.current,n);for(const L of P){const F=a(()=>l(L),"listener");m.current.set(L,F),t.event.addListener(x.RemChanged,L,F),l(L)}for(const L of de)t.event.removeListener(x.RemChanged,L,m.current.get(L));o(n.map(L=>r[L])),c.current=n},[n.length,...n]),(0,w.useEffect)(()=>()=>{for(const P of c.current)t.event.removeListener(x.RemChanged,P,m.current.get(P))},[]),s}a(ad,"useGetRemsByIdsReactive");var pa=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"storage_hooks_async");function Ur(e,t,n,r,i,s){const[o,u]=(0,w.useState)(s),l=a(()=>pa(this,null,function*(){t&&u((yield r(t))||s)}),"refetchValue");return(0,w.useEffect)(()=>{l()},[t]),zr(n,t,m=>{u(m)}),[o,a(m=>pa(this,null,function*(){yield i(t,m)}),"setValue")]}a(Ur,"useStorageStateInternal");function od(e,t){const n=Xe();return Ur(n,e,x.StorageSessionChange,n.storage.getSession,n.storage.setSession,t)}a(od,"useSessionStorageState");function ud(e,t){const n=Xe();return Ur(n,e,x.StorageLocalChange,n.storage.getLocal,n.storage.setLocal,t)}a(ud,"useLocalStorageState");function ld(e,t){const n=Xe();return Ur(n,e,x.StorageSyncedChange,n.storage.getSynced,n.storage.setSynced,t)}a(ld,"useSyncedStorageState");var ma=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"react_hooks_async");function cd(e,t){const[n,r]=(0,w.useState)(void 0);return(0,w.useEffect)(()=>{ma(this,null,function*(){return r(yield e())})},t),n}a(cd,"useRunAsync");function dd(e,t){return ma(this,null,function*(){const n=[];for(const r of e)(yield t(r))&&n.push(r);return n})}a(dd,"filterAsync");const fd=["card","editor","focus","messaging","powerup","rem","richText","settings","storage","widget","window","search"],re=a(e=>({event:x.RemChanged,key:typeof e=="string"?e:typeof e=="object"?e._id:void 0}),"remReactiveDep"),He=a(e=>({event:e,key:void 0}),"noKeyDep"),ga={allRemInDocumentOrPortal:{resultDeps:e=>e.map(re)},deepRemsBeingReferenced:{resultDeps:e=>e.map(re)},getAliases:{resultDeps:e=>e.map(re)},getDescendants:{resultDeps:e=>e.map(re)},getSources:{resultDeps:e=>e.map(re)},getTagRems:{resultDeps:e=>e.map(re)},getParentRem:{resultDeps:e=>[re(e)]},getChildrenRem:{resultDeps:e=>e.map(re)},getPortalDirectlyIncludedRem:{resultDeps:e=>e.map(re)},portalsAndDocumentsIn:{resultDeps:e=>e.map(re)},remsBeingReferenced:{resultDeps:e=>e.map(re)},remsReferencingThis:{resultDeps:e=>e.map(re)},siblingRem:{resultDeps:e=>e.map(re)},taggedRem:{resultDeps:e=>e.map(re)}},va={rem:{findByName:{resultDeps:e=>[re(e)]},findOne:{argsDeps:e=>[re(e[0])]},findMany:{argsDeps:e=>e[0].map(re)},getAll:{resultDeps:e=>e.map(re)}},powerup:{getPowerupSlotByCode:{resultDeps:e=>[re(e)]},getPowerupByCode:{resultDeps:e=>[re(e)]}},settings:{getSetting:{argsDeps:e=>[{event:x.SettingChanged,key:e[0]}]}},card:{},storage:{getLocal:{argsDeps:e=>[{event:x.StorageLocalChange,key:e[0]}]},getSession:{argsDeps:e=>[{event:x.StorageSessionChange,key:e[0]}]},getSynced:{argsDeps:e=>[{event:x.StorageSyncedChange,key:e[0]}]}},window:{getCurrentWindowTree:{argsDeps:()=>[He(x.CurrentWindowTreeChange)]},getFocusedPaneId:{argsDeps:()=>[He(x.FocusedPaneChange)]}},editor:{getFocusedEditorText:{argsDeps:()=>[He(x.FocusedRemChange),He(x.EditorTextEdited)]},getSelection:{argsDeps:()=>[He(x.EditorSelectionChanged)]},getSelectedRem:{argsDeps:()=>[He(x.EditorSelectionChanged)]},getSelectedText:{argsDeps:()=>[He(x.EditorSelectionChanged)]},getCaretPosition:{argsDeps:()=>[He(x.EditorSelectionChanged)]}},focus:{getFocusedRem:{argsDeps:()=>[He(x.FocusedRemChange)],resultDeps:e=>[re(e)]},getFocusedPortal:{argsDeps:()=>[He(x.FocusedPortalChange)],resultDeps:e=>[re(e)]}}};var Cn=a((e,t,n)=>new Promise((r,i)=>{var s=a(l=>{try{u(n.next(l))}catch(c){i(c)}},"fulfilled"),o=a(l=>{try{u(n.throw(l))}catch(c){i(c)}},"rejected"),u=a(l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o),"step");u((n=n.apply(e,t)).next())}),"useTracker_async");const Dt=!1;function hd(e){return fd.includes(e)}a(hd,"isNamespacedProp");const pd=a((e,t)=>Array.isArray(e)&&e[0]instanceof ze?(Dt&&console.log("wrapping result array in Rem proxy"),e.map(n=>_a(n,t))):e&&e instanceof ze?(Dt&&console.log("wrapping result in Rem proxy"),_a(e,t)):e,"wrapResult"),ya=a((e,t,n,r)=>new Proxy(e,{apply:(i,s,o)=>Cn(void 0,null,function*(){const u=yield i.apply(s,o);return r(t,s,n,o,u),pd(u,r)})}),"wrapFunctionCall");function _a(e,t){return new Proxy(e,{get(n,r){var i;return typeof n[r]=="function"&&((i=ga)==null?void 0:i[r])?ya(n[r],void 0,r,t):n[r]}})}a(_a,"interceptReactiveRemCalls");function md(e,t,n){return new Proxy(t,{get(r,i){var s,o;return typeof i=="string"&&typeof r[i]=="function"&&((o=(s=va)==null?void 0:s[e])==null?void 0:o[i])?ya(r[i],e,i,n):r[i]}})}a(md,"interceptReactiveAPICalls");function gd(e,t){return new Proxy(e,{get(n,r){return hd(r)?md(r,n[r],t):n[r]}})}a(gd,"interceptAPINamespaceAccesses");function wa(e){return new Set(e==null?void 0:e.map(({reactiveDeps:t})=>t.map(qr)).flat())}a(wa,"subscriptionsToSubscriptionSet");function qr(e){const{event:t,key:n}=e;return`${t}.${n}`}a(qr,"reactiveDepToKey");const vd=a(e=>{const t=[];return{proxy:gd(e,(r,i,s,o,u)=>{var l,c,m,P,de,L;const F=r?(c=(l=va)==null?void 0:l[r])==null?void 0:c[s]:(m=ga)==null?void 0:m[s],at=[...((P=F.thisDeps)==null?void 0:P.call(F,i))||[],...((de=F.argsDeps)==null?void 0:de.call(F,o))||[],...((L=F.resultDeps)==null?void 0:L.call(F,u))||[]];t.push({methodName:s,args:o,reactiveDeps:at})}),subscriptions:t}},"wrapApiWithListen"),$r=a((e,t,n,r,i)=>Cn(void 0,null,function*(){const s=vd(e);return yield a(()=>Cn(void 0,null,function*(){s.subscriptions.length;const u=yield t(s.proxy);Dt&&console.log("useReactiveAPI result",u),r(u)}),"changeHandler")(),yd(e,n,i,s.subscriptions),s.subscriptions}),"createReactiveApi");function yd(e,t,n,r){const i=wa(n||[]),s=wa(r);n==null||n.forEach(({reactiveDeps:o})=>{for(const u of o)if(!s.has(qr(u))){const{event:l,key:c}=u;Dt&&console.log("removeListener",l,c),e.event.removeListener(l,c,t)}}),r==null||r.forEach(({reactiveDeps:o})=>{for(const u of o)if(!i.has(qr(u))){const{event:l,key:c}=u;Dt&&console.log("addListener",l,c),e.event.addListener(l,c,t)}})}a(yd,"updateListeners");function _d(e,t=[]){const n=Xe(),[r,i]=Vi().useState(),s=(0,w.useRef)(!1),o=(0,w.useRef)(!1),u=(0,w.useRef)(),l=(0,w.useRef)(e);l.current=e;const c=a(()=>{Dt&&console.log("useReactiveAPI RUN",s.current,o.current,u.current,t),s.current?o.current=!0:(s.current=!0,a(()=>Cn(this,null,function*(){u.current=yield $r(n,l.current,c,i,u.current||[]),s.current=!1,o.current&&(o.current=!1,c())}),"effect")())},"run");return Vi().useEffect(c,t),r}a(_d,"useTracker");const wd=/^[-_a-zA-Z0-9]+$/,Ed=h.nativeEnum(zn),Wd=h.nativeEnum(qe),Nt=h.object({level:Ed}),Rd=h.object({type:h.literal(qe.KnowledgeBaseInfo)}).merge(Nt),Pd=h.object({type:h.literal(qe.All)}).merge(Nt),Sd=h.object({type:h.literal(qe.DescendantsOfName),remName:h.string()}).merge(Nt),bd=h.object({type:h.literal(qe.DescendantsOfId),remId:h.string()}).merge(Nt),xd=h.object({type:h.literal(qe.Powerup),powerupCode:h.string()}).merge(Nt),Td=h.object({type:h.literal(qe.FocusedSubtree)}).merge(Nt),Od=h.union([Pd,Sd,bd,xd,Td,Rd]),Ea=h.object({major:h.number().gte(0),minor:h.number().gte(0),patch:h.number().gte(0)}),Ra=h.object({id:h.string().min(5).max(100).refine(e=>wd.test(e),"Plugin ids may consist only of lowercase Latin letters a-z, A-Z, hyphens, underscores, and digits 0-9"),name:h.string().min(3).max(100),version:Ea,manifestVersion:h.literal(1),requestNative:h.boolean(),requiredScopes:h.array(Od),repoUrl:h.string().url(),author:h.string().min(3).max(100),enableOnMobile:h.boolean(),theme:h.union([h.literal("dark"),h.literal("light")]).array().optional(),minimumRemNoteVersion:Ea.optional(),description:h.string().max(200).optional(),projectUrl:h.string().url().optional(),supportUrl:h.string().url().optional(),changelogUrl:h.string().url().optional(),unlisted:h.boolean().optional()}),Ad=Ra.merge(h.object({repoUrl:h.string().url().optional()})),zd=a(e=>`${e.field}: ${e.message}`,"formatValidationError"),Pa=a(e=>{const t=e.errors,n=[];for(const r of t){const{code:i,message:s,path:o}=r,l={field:o.join(".")?o.join("."):"Root Object",message:`${s} (${i})`};"expected"in r&&(l.expected=r.expected),"received"in r&&(l.received=r.received),n.push(l)}return n},"prettifyZodErrors"),Cd=a(e=>{const t=Ra.safeParse(e);return t.success?t:{success:!1,errors:Pa(t.error)}},"parseManifest"),Ud=a(e=>{const t=Ad.safeParse(e);return t.success?t:{success:!1,errors:Pa(t.error)}},"parseSnippetManifest")}(),kt}()});
