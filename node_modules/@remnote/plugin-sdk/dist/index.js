var wo=Object.defineProperty,Xf=Object.defineProperties;var Kf=Object.getOwnPropertyDescriptors;var yo=Object.getOwnPropertySymbols;var Qf=Object.prototype.hasOwnProperty,Yf=Object.prototype.propertyIsEnumerable;var _o=(ye,Y,J)=>Y in ye?wo(ye,Y,{enumerable:!0,configurable:!0,writable:!0,value:J}):ye[Y]=J,p=(ye,Y)=>{for(var J in Y||(Y={}))Qf.call(Y,J)&&_o(ye,J,Y[J]);if(yo)for(var J of yo(Y))Yf.call(Y,J)&&_o(ye,J,Y[J]);return ye},P=(ye,Y)=>Xf(ye,Kf(Y)),a=(ye,Y)=>wo(ye,"name",{value:Y,configurable:!0});var ot=(ye,Y,J)=>new Promise((En,ee)=>{var Xt=j=>{try{T(J.next(j))}catch(se){ee(se)}},M=j=>{try{T(J.throw(j))}catch(se){ee(se)}},T=j=>j.done?En(j.value):Promise.resolve(j.value).then(Xt,M);T((J=J.apply(ye,Y)).next())});a(function(Y,J){typeof exports=="object"&&typeof module=="object"?module.exports=J(require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","react-dom"],J):typeof exports=="object"?exports.rn=J(require("react"),require("react-dom")):Y.rn=J(Y.React,Y.ReactDOM)},"webpackUniversalModuleDefinition")(self,function(ye,Y){return function(){var J={579:function(M){var T=1e3,j=T*60,se=j*60,ce=se*24,Ae=ce*7,v=ce*365.25;M.exports=function(S,O){O=O||{};var H=typeof S;if(H==="string"&&S.length>0)return we(S);if(H==="number"&&isFinite(S))return O.long?B(S):Q(S);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(S))};function we(S){if(S=String(S),!(S.length>100)){var O=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(S);if(!!O){var H=parseFloat(O[1]),b=(O[2]||"ms").toLowerCase();switch(b){case"years":case"year":case"yrs":case"yr":case"y":return H*v;case"weeks":case"week":case"w":return H*Ae;case"days":case"day":case"d":return H*ce;case"hours":case"hour":case"hrs":case"hr":case"h":return H*se;case"minutes":case"minute":case"mins":case"min":case"m":return H*j;case"seconds":case"second":case"secs":case"sec":case"s":return H*T;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return H;default:return}}}}a(we,"parse");function Q(S){var O=Math.abs(S);return O>=ce?Math.round(S/ce)+"d":O>=se?Math.round(S/se)+"h":O>=j?Math.round(S/j)+"m":O>=T?Math.round(S/T)+"s":S+"ms"}a(Q,"fmtShort");function B(S){var O=Math.abs(S);return O>=ce?z(S,O,ce,"day"):O>=se?z(S,O,se,"hour"):O>=j?z(S,O,j,"minute"):O>=T?z(S,O,T,"second"):S+" ms"}a(B,"fmtLong");function z(S,O,H,b){var L=O>=H*1.5;return Math.round(S/H)+" "+b+(L?"s":"")}a(z,"plural")},700:function(M,T,j){T.formatArgs=ce,T.save=Ae,T.load=v,T.useColors=se,T.storage=we(),T.destroy=(()=>{let B=!1;return()=>{B||(B=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),T.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function se(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}a(se,"useColors");function ce(B){if(B[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+B[0]+(this.useColors?"%c ":" ")+"+"+M.exports.humanize(this.diff),!this.useColors)return;const z="color: "+this.color;B.splice(1,0,z,"color: inherit");let S=0,O=0;B[0].replace(/%[a-zA-Z%]/g,H=>{H!=="%%"&&(S++,H==="%c"&&(O=S))}),B.splice(O,0,z)}a(ce,"formatArgs"),T.log=console.debug||console.log||(()=>{});function Ae(B){try{B?T.storage.setItem("debug",B):T.storage.removeItem("debug")}catch(z){}}a(Ae,"save");function v(){let B;try{B=T.storage.getItem("debug")}catch(z){}return!B&&typeof process!="undefined"&&"env"in process&&(B=process.env.DEBUG),B}a(v,"load");function we(){try{return localStorage}catch(B){}}a(we,"localstorage"),M.exports=j(144)(T);const{formatters:Q}=M.exports;Q.j=function(B){try{return JSON.stringify(B)}catch(z){return"[UnexpectedJSONParseError]: "+z.message}}},144:function(M,T,j){function se(ce){v.debug=v,v.default=v,v.coerce=O,v.disable=B,v.enable=Q,v.enabled=z,v.humanize=j(579),v.destroy=H,Object.keys(ce).forEach(b=>{v[b]=ce[b]}),v.names=[],v.skips=[],v.formatters={};function Ae(b){let L=0;for(let q=0;q<b.length;q++)L=(L<<5)-L+b.charCodeAt(q),L|=0;return v.colors[Math.abs(L)%v.colors.length]}a(Ae,"selectColor"),v.selectColor=Ae;function v(b){let L,q=null,We,Kt;function A(...Ee){if(!A.enabled)return;const k=A,lt=Number(new Date),y=lt-(L||lt);k.diff=y,k.prev=L,k.curr=lt,L=lt,Ee[0]=v.coerce(Ee[0]),typeof Ee[0]!="string"&&Ee.unshift("%O");let De=0;Ee[0]=Ee[0].replace(/%([a-zA-Z%])/g,(Qt,be)=>{if(Qt==="%%")return"%";De++;const ut=v.formatters[be];if(typeof ut=="function"){const xn=Ee[De];Qt=ut.call(k,xn),Ee.splice(De,1),De--}return Qt}),v.formatArgs.call(k,Ee),(k.log||v.log).apply(k,Ee)}return a(A,"debug"),A.namespace=b,A.useColors=v.useColors(),A.color=v.selectColor(b),A.extend=we,A.destroy=v.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:()=>q!==null?q:(We!==v.namespaces&&(We=v.namespaces,Kt=v.enabled(b)),Kt),set:Ee=>{q=Ee}}),typeof v.init=="function"&&v.init(A),A}a(v,"createDebug");function we(b,L){const q=v(this.namespace+(typeof L=="undefined"?":":L)+b);return q.log=this.log,q}a(we,"extend");function Q(b){v.save(b),v.namespaces=b,v.names=[],v.skips=[];let L;const q=(typeof b=="string"?b:"").split(/[\s,]+/),We=q.length;for(L=0;L<We;L++)!q[L]||(b=q[L].replace(/\*/g,".*?"),b[0]==="-"?v.skips.push(new RegExp("^"+b.slice(1)+"$")):v.names.push(new RegExp("^"+b+"$")))}a(Q,"enable");function B(){const b=[...v.names.map(S),...v.skips.map(S).map(L=>"-"+L)].join(",");return v.enable(""),b}a(B,"disable");function z(b){if(b[b.length-1]==="*")return!0;let L,q;for(L=0,q=v.skips.length;L<q;L++)if(v.skips[L].test(b))return!1;for(L=0,q=v.names.length;L<q;L++)if(v.names[L].test(b))return!0;return!1}a(z,"enabled");function S(b){return b.toString().substring(2,b.toString().length-2).replace(/\.\*\?$/,"*")}a(S,"toNamespace");function O(b){return b instanceof Error?b.stack||b.message:b}a(O,"coerce");function H(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return a(H,"destroy"),v.enable(v.load()),v}a(se,"setup"),M.exports=se},914:function(M){"use strict";/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var T=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;function ce(v){if(v==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(v)}a(ce,"toObject");function Ae(){try{if(!Object.assign)return!1;var v=new String("abc");if(v[5]="de",Object.getOwnPropertyNames(v)[0]==="5")return!1;for(var we={},Q=0;Q<10;Q++)we["_"+String.fromCharCode(Q)]=Q;var B=Object.getOwnPropertyNames(we).map(function(S){return we[S]});if(B.join("")!=="0123456789")return!1;var z={};return"abcdefghijklmnopqrst".split("").forEach(function(S){z[S]=S}),Object.keys(Object.assign({},z)).join("")==="abcdefghijklmnopqrst"}catch(S){return!1}}a(Ae,"shouldUseNative"),M.exports=Ae()?Object.assign:function(v,we){for(var Q,B=ce(v),z,S=1;S<arguments.length;S++){Q=Object(arguments[S]);for(var O in Q)j.call(Q,O)&&(B[O]=Q[O]);if(T){z=T(Q);for(var H=0;H<z.length;H++)se.call(Q,z[H])&&(B[z[H]]=Q[z[H]])}}return B}},222:function(M,T,j){"use strict";var se;/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */j(914);var ce=j(359),Ae=60103;if(se=60107,typeof Symbol=="function"&&Symbol.for){var v=Symbol.for;Ae=v("react.element"),se=v("react.fragment")}var we=ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Q=Object.prototype.hasOwnProperty,B={key:!0,ref:!0,__self:!0,__source:!0};function z(S,O,H){var b,L={},q=null,We=null;H!==void 0&&(q=""+H),O.key!==void 0&&(q=""+O.key),O.ref!==void 0&&(We=O.ref);for(b in O)Q.call(O,b)&&!B.hasOwnProperty(b)&&(L[b]=O[b]);if(S&&S.defaultProps)for(b in O=S.defaultProps,O)L[b]===void 0&&(L[b]=O[b]);return{$$typeof:Ae,type:S,key:q,ref:We,props:L,_owner:we.current}}a(z,"q"),T.jsx=z,T.jsxs=z},568:function(M,T,j){"use strict";M.exports=j(222)},359:function(M){"use strict";M.exports=ye},318:function(M){"use strict";M.exports=Y}},En={};function ee(M){var T=En[M];if(T!==void 0)return T.exports;var j=En[M]={exports:{}};return J[M](j,j.exports,ee),j.exports}a(ee,"__webpack_require__"),function(){ee.n=function(M){var T=M&&M.__esModule?function(){return M.default}:function(){return M};return ee.d(T,{a:T}),T}}(),function(){ee.d=function(M,T){for(var j in T)ee.o(T,j)&&!ee.o(M,j)&&Object.defineProperty(M,j,{enumerable:!0,get:T[j]})}}(),function(){ee.o=function(M,T){return Object.prototype.hasOwnProperty.call(M,T)}}(),function(){ee.r=function(M){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})}}();var Xt={};return function(){"use strict";ee.r(Xt),ee.d(Xt,{AppEvents:function(){return A},AppNamespace:function(){return Sr},BuiltInPowerupCodes:function(){return wt},Card:function(){return _t},CardNamespace:function(){return rr},CheckboxMatcher:function(){return ur},ComponentFocusableItemType:function(){return Bi},DEPRECATED_RICH_TEXT_ELEMENT_TYPES:function(){return ze},DEPRECATED_RICH_TEXT_ELEMENT_TYPES_TO_NEW_FORMATTING:function(){return Cl},DEPRECATED_RICH_TEXT_FORMATTING_TYPES:function(){return Ol},DateMatcher:function(){return on},DateMatcherTypesToDisplayValue:function(){return Il},DateNamespace:function(){return vr},DocumentViewer:function(){return Za},EditorEvents:function(){return B},EditorNamespace:function(){return _r},EmbedComponentType:function(){return Le},EventNamespace:function(){return kr},FocusEvents:function(){return Kt},FocusNamespace:function(){return wr},FocusPropsType:function(){return Wi},GlobalEvent:function(){return we},KnowledgeBaseNamespace:function(){return Ir},LegacySearchPortalSingleSelectQueryExpression:function(){return rs},LoadingSpinner:function(){return $a},MessagingEvents:function(){return H},MessagingNamespace:function(){return Er},MoveUnit:function(){return zi},MultiSelectMatcher:function(){return fr},MultiSelectMatcherTypesToDisplayValue:function(){return Ll},NonRelativeMatcherTypes:function(){return Nl},NumberMatcher:function(){return dr},NumberMatcherTypesToDisplayValue:function(){return Ml},PDFWebReader:function(){return Wa},PORTAL_TYPE:function(){return Ui},PageType:function(){return qi},PluginAccessScopeType:function(){return Je},PluginActionPermissionLevel:function(){return ir},PluginCommandMenuLocation:function(){return Zi},PowerupEvent:function(){return S},PowerupNamespace:function(){return xr},PowerupSlotCodeMap:function(){return Wt},PreviewRemCards:function(){return qa},PropertyLocation:function(){return lr},PropertyType:function(){return sr},Query:function(){return ws},QueryExpressionType:function(){return he},QueryNodeType:function(){return te},QueryRemType:function(){return Yi},Queue:function(){return za},QueueEvent:function(){return Q},QueueInteractionScore:function(){return Hi},QueueItemType:function(){return os},QueueItemTypeHumanReadable:function(){return Vl},QueueNamespace:function(){return Lr},REM_TYPE:function(){return tt},RICH_TEXT_ELEMENT_TYPE:function(){return Tl},RICH_TEXT_FORMATTING:function(){return et},RNPlugin:function(){return Vr},ReactRNPlugin:function(){return zn},ReaderNamespace:function(){return Fr},RegisterPowerupOptions:function(){return jl},RegisterPropertyOptions:function(){return gr},RelativeDateMatcher:function(){return Cn},RelativeDateMatcherToLabel:function(){return Dl},RelativeDateModifier:function(){return hr},RelativeDatePeriod:function(){return pr},Rem:function(){return Ue},RemColor:function(){return On},RemEvent:function(){return z},RemHierarchyEditorTree:function(){return Ua},RemNamespace:function(){return Jn},RemRichTextEditor:function(){return Ha},RemType:function(){return ji},RemTypeTinyGraph:function(){return Vi},RemViewer:function(){return Ba},RichText:function(){return Va},RichTextEditor:function(){return ja},RichTextNamespace:function(){return Rr},SchedulerNamespace:function(){return Mr},SearchNamespace:function(){return Pr},SearchPortalCheckboxQueryExpression:function(){return is},SearchPortalDateQueryExpression:function(){return mr},SearchPortalGroupQueryNode:function(){return Xi},SearchPortalMultiSelectQueryExpression:function(){return ns},SearchPortalNumberQueryExpression:function(){return ts},SearchPortalQuery:function(){return Dn},SearchPortalQueryExpression:function(){return as},SearchPortalRefQueryExpression:function(){return Qi},SearchPortalRemTypeQueryExpression:function(){return Ji},SearchPortalSingleSelectQueryExpression:function(){return ss},SearchPortalSlotQueryNode:function(){return Ki},SearchPortalTextQueryExpression:function(){return es},SearchPortalUnaryQueryNode:function(){return Gi},SelectSourceType:function(){return or},SelectionType:function(){return Tn},SetRemType:function(){return Fi},SettingEvents:function(){return b},SettingsNamespace:function(){return Or},SidebarEvents:function(){return O},SingleSelectMatcher:function(){return An},SingleSelectMatcherTypesToDisplayValue:function(){return Fl},SpecialPluginCallback:function(){return $i},StorageEvents:function(){return L},StorageNamespace:function(){return Cr},TextMatcher:function(){return cr},TextMatcherTypesToDisplayValue:function(){return kl},TextMatchersAllowedWithoutPrimaryQuery:function(){return Al},WidgetEvents:function(){return q},WidgetLocation:function(){return Li},WidgetNamespace:function(){return Ar},WindowEvents:function(){return We},WindowNamespace:function(){return Dr},createReactiveApi:function(){return _i},declareIndexPlugin:function(){return hf},filterAsync:function(){return Pf},isAppEvent:function(){return Ee},makeNamespacedCall:function(){return ar},numberValidatorSig:function(){return Pl},parseManifest:function(){return zf},remTypeTinyGraphToNormal:function(){return Sl},remTypeToTinyGraphType:function(){return xl},renderWidget:function(){return Ya},richTextFormatNameCodeMap:function(){return Mi},stringValidatorSig:function(){return Rl},useAPIEventListener:function(){return gi},useGetRemsByIdsReactive:function(){return Ef},useLocalStorageState:function(){return Sf},useOnMessageBroadcast:function(){return pf},usePlugin:function(){return st},useRunAsync:function(){return Rf},useSessionStorageState:function(){return xf},useSyncedStorageState:function(){return bf},useTracker:function(){return If}});var M={};ee.r(M),ee.d(M,{VERSION:function(){return bs},after:function(){return od},all:function(){return xa},allKeys:function(){return gn},any:function(){return Sa},assign:function(){return Fn},before:function(){return ha},bind:function(){return da},bindAll:function(){return ed},chain:function(){return Jc},chunk:function(){return Id},clone:function(){return Mc},collect:function(){return bt},compact:function(){return Pd},compose:function(){return ad},constant:function(){return Zs},contains:function(){return it},countBy:function(){return wd},create:function(){return Ic},debounce:function(){return id},default:function(){return Md},defaults:function(){return na},defer:function(){return nd},delay:function(){return fa},detect:function(){return ai},difference:function(){return Ca},drop:function(){return Bn},each:function(){return rt},escape:function(){return Wc},every:function(){return xa},extend:function(){return ta},extendOwn:function(){return Fn},filter:function(){return zt},find:function(){return ai},findIndex:function(){return si},findKey:function(){return pa},findLastIndex:function(){return ga},findWhere:function(){return cd},first:function(){return ui},flatten:function(){return Td},foldl:function(){return oi},foldr:function(){return Ea},forEach:function(){return rt},functions:function(){return Xr},get:function(){return sa},groupBy:function(){return yd},has:function(){return Fc},head:function(){return ui},identity:function(){return Yr},include:function(){return it},includes:function(){return it},indexBy:function(){return _d},indexOf:function(){return _a},initial:function(){return Oa},inject:function(){return oi},intersection:function(){return Ad},invert:function(){return ea},invoke:function(){return fd},isArguments:function(){return Ur},isArray:function(){return xt},isArrayBuffer:function(){return Fs},isBoolean:function(){return Is},isDataView:function(){return Mn},isDate:function(){return hc},isElement:function(){return fc},isEmpty:function(){return bc},isEqual:function(){return Rc},isError:function(){return mc},isFinite:function(){return _c},isFunction:function(){return Se},isMap:function(){return Oc},isMatch:function(){return qs},isNaN:function(){return Ws},isNull:function(){return dc},isNumber:function(){return Ms},isObject:function(){return Et},isRegExp:function(){return pc},isSet:function(){return Ac},isString:function(){return Wr},isSymbol:function(){return Ls},isTypedArray:function(){return zs},isUndefined:function(){return ks},isWeakMap:function(){return Cc},isWeakSet:function(){return Dc},iteratee:function(){return ei},keys:function(){return pe},last:function(){return Rd},lastIndexOf:function(){return ud},map:function(){return bt},mapObject:function(){return jc},matcher:function(){return yn},matches:function(){return yn},max:function(){return ba},memoize:function(){return td},methods:function(){return Xr},min:function(){return pd},mixin:function(){return Aa},negate:function(){return ii},noop:function(){return oa},now:function(){return wn},object:function(){return Nd},omit:function(){return bd},once:function(){return ld},pairs:function(){return Nc},partial:function(){return jn},partition:function(){return Ed},pick:function(){return Ta},pluck:function(){return li},property:function(){return Jr},propertyOf:function(){return Vc},random:function(){return ti},range:function(){return kd},reduce:function(){return oi},reduceRight:function(){return Ea},reject:function(){return dd},rest:function(){return Bn},restArguments:function(){return Re},result:function(){return Kc},sample:function(){return Pa},select:function(){return zt},shuffle:function(){return gd},size:function(){return xd},some:function(){return Sa},sortBy:function(){return vd},sortedIndex:function(){return va},tail:function(){return Bn},take:function(){return ui},tap:function(){return Lc},template:function(){return Xc},templateSettings:function(){return Uc},throttle:function(){return rd},times:function(){return Bc},toArray:function(){return Ra},toPath:function(){return ia},transpose:function(){return di},unescape:function(){return Hc},union:function(){return Cd},uniq:function(){return ci},unique:function(){return ci},uniqueId:function(){return Yc},unzip:function(){return di},values:function(){return Ut},where:function(){return hd},without:function(){return Od},wrap:function(){return sd},zip:function(){return Dd}});var T=Object.defineProperty,j=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable,Ae=a((e,t,n)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"__defNormalProp"),v=a((e,t)=>{for(var n in t||(t={}))se.call(t,n)&&Ae(e,n,t[n]);if(j)for(var n of j(t))ce.call(t,n)&&Ae(e,n,t[n]);return e},"__spreadValues");const we={GlobalOpenRem:"global.open-rem",URLChange:"global.url-change"},Q={QueueLoadCard:"queue.load-card",QueueCompleteCard:"queue.complete-card",QueueEnter:"queue.enter",QueueExit:"queue.exit",RevealAnswer:"queue.reveal-answer"},B={EditorSelectionChanged:"editor.selection-changed",EditorTextEdited:"editor.text-edited"},z={RemChanged:"rem.changed",GlobalRemChanged:"global.rem.changed"},S={PowerupSlotChanged:"powerup.slot.changed",ClickRemReference:"powerup.click-rem-reference",MouseOverLink:"powerup.mouse-enter-link",MouseOutLink:"powerup.mouse-out-link"},O={ClickSidebarItem:"sidebar.click-item"},H={MessageBroadcast:"messaging.broadcast"},b={SettingChanged:"setting.changed"},L={StorageSessionChange:"storage.session.changed",StorageSyncedChange:"storage.synced.changed",StorageLocalChange:"storage.local.changed"},q={FakeEmbedComponentDimensionChange:"widget.virtual-embed-dimension-change",FakeEmbedDOMEvent:"widget.virtual-embed-dom-event",StealKeyEvent:"widget.steal-key-event"},We={FocusedPaneChange:"window.focusedPane.changed",CurrentWindowTreeChange:"window.PaneIdWindowTree.changed"},Kt={FocusedRemChange:"window.focusedRem.changed",FocusedPortalChange:"window.focusedPortal.changed"},A=v(v(v(v(v(v(v(v(v(v(v(v({onActivate:"onActivate",onDeactivate:"onDeactivate",setDarkMode:"setDarkMode",setCustomCSS:"setCustomCSS"},We),H),O),S),z),we),Q),L),q),B),b),Kt);function Ee(e){return Object.values(A).includes(e)}a(Ee,"isAppEvent");var k;(function(e){e.assertEqual=i=>i;function t(i){}a(t,"assertIs"),e.assertIs=t;function n(i){throw new Error}a(n,"assertNever"),e.assertNever=n,e.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},e.getValidEnumValues=i=>{const s=e.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of s)o[l]=i[l];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(s){return i[s]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},e.find=(i,s)=>{for(const o of i)if(s(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}a(r,"joinValues"),e.joinValues=r,e.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(k||(k={}));var lt;(function(e){e.mergeShapes=(t,n)=>p(p({},t),n)})(lt||(lt={}));const y=k.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),De=a(e=>{switch(typeof e){case"undefined":return y.undefined;case"string":return y.string;case"number":return isNaN(e)?y.nan:y.number;case"boolean":return y.boolean;case"function":return y.function;case"bigint":return y.bigint;case"symbol":return y.symbol;case"object":return Array.isArray(e)?y.array:e===null?y.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?y.promise:typeof Map!="undefined"&&e instanceof Map?y.map:typeof Set!="undefined"&&e instanceof Set?y.set:typeof Date!="undefined"&&e instanceof Date?y.date:y.object;default:return y.unknown}},"getParsedType"),m=k.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Qt=a(e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson");class be extends Error{constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const n=t||function(s){return s.message},r={_errors:[]},i=a(s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,u=0;for(;u<o.path.length;){const c=o.path[u];u===o.path.length-1?(l[c]=l[c]||{_errors:[]},l[c]._errors.push(n(o))):l[c]=l[c]||{_errors:[]},l=l[c],u++}}},"processError");return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,k.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}a(be,"ZodError"),be.create=e=>new be(e);const ut=a((e,t)=>{let n;switch(e.code){case m.invalid_type:e.received===y.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case m.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,k.jsonStringifyReplacer)}`;break;case m.unrecognized_keys:n=`Unrecognized key(s) in object: ${k.joinValues(e.keys,", ")}`;break;case m.invalid_union:n="Invalid input";break;case m.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${k.joinValues(e.options)}`;break;case m.invalid_enum_value:n=`Invalid enum value. Expected ${k.joinValues(e.options)}, received '${e.received}'`;break;case m.invalid_arguments:n="Invalid function arguments";break;case m.invalid_return_type:n="Invalid function return type";break;case m.invalid_date:n="Invalid date";break;case m.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:k.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case m.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case m.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case m.custom:n="Invalid input";break;case m.invalid_intersection_types:n="Intersection results could not be merged";break;case m.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case m.not_finite:n="Number must be finite";break;default:n=t.defaultError,k.assertNever(e)}return{message:n}},"errorMap");let xn=ut;function Eo(e){xn=e}a(Eo,"setErrorMap");function Sn(){return xn}a(Sn,"getErrorMap");const bn=a(e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,s=[...n,...i.path||[]],o=P(p({},i),{path:s});let l="";const u=r.filter(c=>!!c).slice().reverse();for(const c of u)l=c(o,{data:t,defaultError:l}).message;return P(p({},i),{path:s,message:i.message||l})},"makeIssue"),xo=[];function _(e,t){const n=bn({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,Sn(),ut].filter(r=>!!r)});e.common.issues.push(n)}a(_,"addIssueToContext");class me{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return C;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static mergeObjectAsync(t,n){return ot(this,null,function*(){const r=[];for(const i of n)r.push({key:yield i.key,value:yield i.value});return me.mergeObjectSync(t,r)})}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return C;s.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),s.value!=="__proto__"&&(typeof o.value!="undefined"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:t.value,value:r}}}a(me,"ParseStatus");const C=Object.freeze({status:"aborted"}),xi=a(e=>({status:"dirty",value:e}),"DIRTY"),xe=a(e=>({status:"valid",value:e}),"OK"),Gn=a(e=>e.status==="aborted","isAborted"),Xn=a(e=>e.status==="dirty","isDirty"),Yt=a(e=>e.status==="valid","isValid"),Rn=a(e=>typeof Promise!="undefined"&&e instanceof Promise,"isAsync");var x;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(x||(x={}));class je{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}a(je,"ParseInputLazyPath");const Si=a((e,t)=>{if(Yt(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new be(e.common.issues);return this._error=n,this._error}}},"handleResult");function D(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:a((o,l)=>o.code!=="invalid_type"?{message:l.defaultError}:typeof l.data=="undefined"?{message:r!=null?r:l.defaultError}:{message:n!=null?n:l.defaultError},"customMap"),description:i}}a(D,"processCreateParams");class N{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return De(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:De(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new me,ctx:{common:t.parent.common,data:t.data,parsedType:De(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Rn(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:De(t)},s=this._parseSync({data:t,path:i.path,parent:i});return Si(i,s)}parseAsync(t,n){return ot(this,null,function*(){const r=yield this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error})}safeParseAsync(t,n){return ot(this,null,function*(){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:De(t)},i=this._parse({data:t,path:r.path,parent:r}),s=yield Rn(i)?i:Promise.resolve(i);return Si(r,s)})}refine(t,n){const r=a(i=>typeof n=="string"||typeof n=="undefined"?{message:n}:typeof n=="function"?n(i):n,"getIssueProperties");return this._refinement((i,s)=>{const o=t(i),l=a(()=>s.addIssue(p({code:m.custom},r(i))),"setError");return typeof Promise!="undefined"&&o instanceof Promise?o.then(u=>u?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new Me({schema:this,typeName:R.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return He.create(this,this._def)}nullable(){return ht.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ie.create(this,this._def)}promise(){return yt.create(this,this._def)}or(t){return kt.create([this,t],this._def)}and(t){return It.create(this,t,this._def)}transform(t){return new Me(P(p({},D(this._def)),{schema:this,typeName:R.ZodEffects,effect:{type:"transform",transform:t}}))}default(t){const n=typeof t=="function"?t:()=>t;return new Vt(P(p({},D(this._def)),{innerType:this,defaultValue:n,typeName:R.ZodDefault}))}brand(){return new Qn(p({typeName:R.ZodBranded,type:this},D(this._def)))}catch(t){const n=typeof t=="function"?t:()=>t;return new rn(P(p({},D(this._def)),{innerType:this,catchValue:n,typeName:R.ZodCatch}))}describe(t){const n=this.constructor;return new n(P(p({},this._def),{description:t}))}pipe(t){return Bt.create(this,t)}readonly(){return an.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}a(N,"ZodType");const So=/^c[^\s-]{8,}$/i,bo=/^[a-z][a-z0-9]*$/,Ro=/[0-9A-HJKMNP-TV-Z]{26}/,Po=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,To=/^([A-Z0-9_+-]+\.?)*[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Oo=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u"),Co=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Ao=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Do=a(e=>e.precision?e.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`):e.precision===0?e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$"),"datetimeRegex");function No(e,t){return!!((t==="v4"||!t)&&Co.test(e)||(t==="v6"||!t)&&Ao.test(e))}a(No,"isValidIP");class ke extends N{constructor(){super(...arguments),this._regex=(t,n,r)=>this.refinement(i=>t.test(i),p({validation:n,code:m.invalid_string},x.errToObj(r))),this.nonempty=t=>this.min(1,x.errToObj(t)),this.trim=()=>new ke(P(p({},this._def),{checks:[...this._def.checks,{kind:"trim"}]})),this.toLowerCase=()=>new ke(P(p({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]})),this.toUpperCase=()=>new ke(P(p({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==y.string){const s=this._getOrReturnCtx(t);return _(s,{code:m.invalid_type,expected:y.string,received:s.parsedType}),C}const r=new me;let i;for(const s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(i=this._getOrReturnCtx(t,i),_(i,{code:m.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")t.data.length>s.value&&(i=this._getOrReturnCtx(t,i),_(i,{code:m.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=t.data.length>s.value,l=t.data.length<s.value;(o||l)&&(i=this._getOrReturnCtx(t,i),o?_(i,{code:m.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&_(i,{code:m.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")To.test(t.data)||(i=this._getOrReturnCtx(t,i),_(i,{validation:"email",code:m.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")Oo.test(t.data)||(i=this._getOrReturnCtx(t,i),_(i,{validation:"emoji",code:m.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")Po.test(t.data)||(i=this._getOrReturnCtx(t,i),_(i,{validation:"uuid",code:m.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")So.test(t.data)||(i=this._getOrReturnCtx(t,i),_(i,{validation:"cuid",code:m.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")bo.test(t.data)||(i=this._getOrReturnCtx(t,i),_(i,{validation:"cuid2",code:m.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")Ro.test(t.data)||(i=this._getOrReturnCtx(t,i),_(i,{validation:"ulid",code:m.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(t.data)}catch(o){i=this._getOrReturnCtx(t,i),_(i,{validation:"url",code:m.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),_(i,{validation:"regex",code:m.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(t,i),_(i,{code:m.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(i=this._getOrReturnCtx(t,i),_(i,{code:m.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(i=this._getOrReturnCtx(t,i),_(i,{code:m.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?Do(s).test(t.data)||(i=this._getOrReturnCtx(t,i),_(i,{code:m.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="ip"?No(t.data,s.version)||(i=this._getOrReturnCtx(t,i),_(i,{validation:"ip",code:m.invalid_string,message:s.message}),r.dirty()):k.assertNever(s);return{status:r.value,value:t.data}}_addCheck(t){return new ke(P(p({},this._def),{checks:[...this._def.checks,t]}))}email(t){return this._addCheck(p({kind:"email"},x.errToObj(t)))}url(t){return this._addCheck(p({kind:"url"},x.errToObj(t)))}emoji(t){return this._addCheck(p({kind:"emoji"},x.errToObj(t)))}uuid(t){return this._addCheck(p({kind:"uuid"},x.errToObj(t)))}cuid(t){return this._addCheck(p({kind:"cuid"},x.errToObj(t)))}cuid2(t){return this._addCheck(p({kind:"cuid2"},x.errToObj(t)))}ulid(t){return this._addCheck(p({kind:"ulid"},x.errToObj(t)))}ip(t){return this._addCheck(p({kind:"ip"},x.errToObj(t)))}datetime(t){var n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:t}):this._addCheck(p({kind:"datetime",precision:typeof(t==null?void 0:t.precision)=="undefined"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1},x.errToObj(t==null?void 0:t.message)))}regex(t,n){return this._addCheck(p({kind:"regex",regex:t},x.errToObj(n)))}includes(t,n){return this._addCheck(p({kind:"includes",value:t,position:n==null?void 0:n.position},x.errToObj(n==null?void 0:n.message)))}startsWith(t,n){return this._addCheck(p({kind:"startsWith",value:t},x.errToObj(n)))}endsWith(t,n){return this._addCheck(p({kind:"endsWith",value:t},x.errToObj(n)))}min(t,n){return this._addCheck(p({kind:"min",value:t},x.errToObj(n)))}max(t,n){return this._addCheck(p({kind:"max",value:t},x.errToObj(n)))}length(t,n){return this._addCheck(p({kind:"length",value:t},x.errToObj(n)))}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}a(ke,"ZodString"),ke.create=e=>{var t;return new ke(p({checks:[],typeName:R.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1},D(e)))};function ko(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(e.toFixed(i).replace(".","")),o=parseInt(t.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}a(ko,"floatSafeRemainder");class Xe extends N{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==y.number){const s=this._getOrReturnCtx(t);return _(s,{code:m.invalid_type,expected:y.number,received:s.parsedType}),C}let r;const i=new me;for(const s of this._def.checks)s.kind==="int"?k.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),_(r,{code:m.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),_(r,{code:m.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),_(r,{code:m.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?ko(t.data,s.value)!==0&&(r=this._getOrReturnCtx(t,r),_(r,{code:m.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),_(r,{code:m.not_finite,message:s.message}),i.dirty()):k.assertNever(s);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,x.toString(n))}gt(t,n){return this.setLimit("min",t,!1,x.toString(n))}lte(t,n){return this.setLimit("max",t,!0,x.toString(n))}lt(t,n){return this.setLimit("max",t,!1,x.toString(n))}setLimit(t,n,r,i){return new Xe(P(p({},this._def),{checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:x.toString(i)}]}))}_addCheck(t){return new Xe(P(p({},this._def),{checks:[...this._def.checks,t]}))}int(t){return this._addCheck({kind:"int",message:x.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:x.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:x.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:x.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:x.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:x.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:x.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:x.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:x.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&k.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}a(Xe,"ZodNumber"),Xe.create=e=>new Xe(p({checks:[],typeName:R.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1},D(e)));class Ke extends N{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==y.bigint){const s=this._getOrReturnCtx(t);return _(s,{code:m.invalid_type,expected:y.bigint,received:s.parsedType}),C}let r;const i=new me;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(r=this._getOrReturnCtx(t,r),_(r,{code:m.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(r=this._getOrReturnCtx(t,r),_(r,{code:m.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),_(r,{code:m.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):k.assertNever(s);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,x.toString(n))}gt(t,n){return this.setLimit("min",t,!1,x.toString(n))}lte(t,n){return this.setLimit("max",t,!0,x.toString(n))}lt(t,n){return this.setLimit("max",t,!1,x.toString(n))}setLimit(t,n,r,i){return new Ke(P(p({},this._def),{checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:x.toString(i)}]}))}_addCheck(t){return new Ke(P(p({},this._def),{checks:[...this._def.checks,t]}))}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:x.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:x.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:x.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:x.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:x.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}a(Ke,"ZodBigInt"),Ke.create=e=>{var t;return new Ke(p({checks:[],typeName:R.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1},D(e)))};class Ct extends N{_parse(t){if(this._def.coerce&&(t.data=Boolean(t.data)),this._getType(t)!==y.boolean){const r=this._getOrReturnCtx(t);return _(r,{code:m.invalid_type,expected:y.boolean,received:r.parsedType}),C}return xe(t.data)}}a(Ct,"ZodBoolean"),Ct.create=e=>new Ct(p({typeName:R.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1},D(e)));class ct extends N{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==y.date){const s=this._getOrReturnCtx(t);return _(s,{code:m.invalid_type,expected:y.date,received:s.parsedType}),C}if(isNaN(t.data.getTime())){const s=this._getOrReturnCtx(t);return _(s,{code:m.invalid_date}),C}const r=new me;let i;for(const s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(i=this._getOrReturnCtx(t,i),_(i,{code:m.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(i=this._getOrReturnCtx(t,i),_(i,{code:m.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):k.assertNever(s);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new ct(P(p({},this._def),{checks:[...this._def.checks,t]}))}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:x.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:x.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}a(ct,"ZodDate"),ct.create=e=>new ct(p({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:R.ZodDate},D(e)));class Jt extends N{_parse(t){if(this._getType(t)!==y.symbol){const r=this._getOrReturnCtx(t);return _(r,{code:m.invalid_type,expected:y.symbol,received:r.parsedType}),C}return xe(t.data)}}a(Jt,"ZodSymbol"),Jt.create=e=>new Jt(p({typeName:R.ZodSymbol},D(e)));class At extends N{_parse(t){if(this._getType(t)!==y.undefined){const r=this._getOrReturnCtx(t);return _(r,{code:m.invalid_type,expected:y.undefined,received:r.parsedType}),C}return xe(t.data)}}a(At,"ZodUndefined"),At.create=e=>new At(p({typeName:R.ZodUndefined},D(e)));class Dt extends N{_parse(t){if(this._getType(t)!==y.null){const r=this._getOrReturnCtx(t);return _(r,{code:m.invalid_type,expected:y.null,received:r.parsedType}),C}return xe(t.data)}}a(Dt,"ZodNull"),Dt.create=e=>new Dt(p({typeName:R.ZodNull},D(e)));class gt extends N{constructor(){super(...arguments),this._any=!0}_parse(t){return xe(t.data)}}a(gt,"ZodAny"),gt.create=e=>new gt(p({typeName:R.ZodAny},D(e)));class dt extends N{constructor(){super(...arguments),this._unknown=!0}_parse(t){return xe(t.data)}}a(dt,"ZodUnknown"),dt.create=e=>new dt(p({typeName:R.ZodUnknown},D(e)));class Ze extends N{_parse(t){const n=this._getOrReturnCtx(t);return _(n,{code:m.invalid_type,expected:y.never,received:n.parsedType}),C}}a(Ze,"ZodNever"),Ze.create=e=>new Ze(p({typeName:R.ZodNever},D(e)));class en extends N{_parse(t){if(this._getType(t)!==y.undefined){const r=this._getOrReturnCtx(t);return _(r,{code:m.invalid_type,expected:y.void,received:r.parsedType}),C}return xe(t.data)}}a(en,"ZodVoid"),en.create=e=>new en(p({typeName:R.ZodVoid},D(e)));class Ie extends N{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==y.array)return _(n,{code:m.invalid_type,expected:y.array,received:n.parsedType}),C;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(_(n,{code:o?m.too_big:m.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(_(n,{code:m.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(_(n,{code:m.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new je(n,o,n.path,l)))).then(o=>me.mergeArray(r,o));const s=[...n.data].map((o,l)=>i.type._parseSync(new je(n,o,n.path,l)));return me.mergeArray(r,s)}get element(){return this._def.type}min(t,n){return new Ie(P(p({},this._def),{minLength:{value:t,message:x.toString(n)}}))}max(t,n){return new Ie(P(p({},this._def),{maxLength:{value:t,message:x.toString(n)}}))}length(t,n){return new Ie(P(p({},this._def),{exactLength:{value:t,message:x.toString(n)}}))}nonempty(t){return this.min(1,t)}}a(Ie,"ZodArray"),Ie.create=(e,t)=>new Ie(p({type:e,minLength:null,maxLength:null,exactLength:null,typeName:R.ZodArray},D(t)));function Nt(e){if(e instanceof G){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=He.create(Nt(r))}return new G(P(p({},e._def),{shape:()=>t}))}else return e instanceof Ie?new Ie(P(p({},e._def),{type:Nt(e.element)})):e instanceof He?He.create(Nt(e.unwrap())):e instanceof ht?ht.create(Nt(e.unwrap())):e instanceof Ve?Ve.create(e.items.map(t=>Nt(t))):e}a(Nt,"deepPartialify");class G extends N{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=k.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==y.object){const c=this._getOrReturnCtx(t);return _(c,{code:m.invalid_type,expected:y.object,received:c.parsedType}),C}const{status:r,ctx:i}=this._processInputParams(t),{shape:s,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ze&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||l.push(c);const u=[];for(const c of o){const g=s[c],E=i.data[c];u.push({key:{status:"valid",value:c},value:g._parse(new je(i,E,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof Ze){const c=this._def.unknownKeys;if(c==="passthrough")for(const g of l)u.push({key:{status:"valid",value:g},value:{status:"valid",value:i.data[g]}});else if(c==="strict")l.length>0&&(_(i,{code:m.unrecognized_keys,keys:l}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const g of l){const E=i.data[g];u.push({key:{status:"valid",value:g},value:c._parse(new je(i,E,i.path,g)),alwaysSet:g in i.data})}}return i.common.async?Promise.resolve().then(()=>ot(this,null,function*(){const c=[];for(const g of u){const E=yield g.key;c.push({key:E,value:yield g.value,alwaysSet:g.alwaysSet})}return c})).then(c=>me.mergeObjectSync(r,c)):me.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(t){return x.errToObj,new G(p(P(p({},this._def),{unknownKeys:"strict"}),t!==void 0?{errorMap:(n,r)=>{var i,s,o,l;const u=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=x.errToObj(t).message)!==null&&l!==void 0?l:u}:{message:u}}}:{}))}strip(){return new G(P(p({},this._def),{unknownKeys:"strip"}))}passthrough(){return new G(P(p({},this._def),{unknownKeys:"passthrough"}))}extend(t){return new G(P(p({},this._def),{shape:()=>p(p({},this._def.shape()),t)}))}merge(t){return new G({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>p(p({},this._def.shape()),t._def.shape()),typeName:R.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new G(P(p({},this._def),{catchall:t}))}pick(t){const n={};return k.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new G(P(p({},this._def),{shape:()=>n}))}omit(t){const n={};return k.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new G(P(p({},this._def),{shape:()=>n}))}deepPartial(){return Nt(this)}partial(t){const n={};return k.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];t&&!t[r]?n[r]=i:n[r]=i.optional()}),new G(P(p({},this._def),{shape:()=>n}))}required(t){const n={};return k.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof He;)s=s._def.innerType;n[r]=s}}),new G(P(p({},this._def),{shape:()=>n}))}keyof(){return bi(k.objectKeys(this.shape))}}a(G,"ZodObject"),G.create=(e,t)=>new G(p({shape:()=>e,unknownKeys:"strip",catchall:Ze.create(),typeName:R.ZodObject},D(t))),G.strictCreate=(e,t)=>new G(p({shape:()=>e,unknownKeys:"strict",catchall:Ze.create(),typeName:R.ZodObject},D(t))),G.lazycreate=(e,t)=>new G(p({shape:e,unknownKeys:"strip",catchall:Ze.create(),typeName:R.ZodObject},D(t)));class kt extends N{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=s.map(l=>new be(l.ctx.common.issues));return _(n,{code:m.invalid_union,unionErrors:o}),C}if(a(i,"handleResults"),n.common.async)return Promise.all(r.map(s=>ot(this,null,function*(){const o=P(p({},n),{common:P(p({},n.common),{issues:[]}),parent:null});return{result:yield s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}}))).then(i);{let s;const o=[];for(const u of r){const c=P(p({},n),{common:P(p({},n.common),{issues:[]}),parent:null}),g=u._parseSync({data:n.data,path:n.path,parent:c});if(g.status==="valid")return g;g.status==="dirty"&&!s&&(s={result:g,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const l=o.map(u=>new be(u));return _(n,{code:m.invalid_union,unionErrors:l}),C}}get options(){return this._def.options}}a(kt,"ZodUnion"),kt.create=(e,t)=>new kt(p({options:e,typeName:R.ZodUnion},D(t)));const Pn=a(e=>e instanceof Lt?Pn(e.schema):e instanceof Me?Pn(e.innerType()):e instanceof Ft?[e.value]:e instanceof Qe?e.options:e instanceof jt?Object.keys(e.enum):e instanceof Vt?Pn(e._def.innerType):e instanceof At?[void 0]:e instanceof Dt?[null]:null,"getDiscriminator");class tn extends N{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==y.object)return _(n,{code:m.invalid_type,expected:y.object,received:n.parsedType}),C;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(_(n,{code:m.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),C)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const i=new Map;for(const s of n){const o=Pn(s.shape[t]);if(!o)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(l)}`);i.set(l,s)}}return new tn(p({typeName:R.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i},D(r)))}}a(tn,"ZodDiscriminatedUnion");function Kn(e,t){const n=De(e),r=De(t);if(e===t)return{valid:!0,data:e};if(n===y.object&&r===y.object){const i=k.objectKeys(t),s=k.objectKeys(e).filter(l=>i.indexOf(l)!==-1),o=p(p({},e),t);for(const l of s){const u=Kn(e[l],t[l]);if(!u.valid)return{valid:!1};o[l]=u.data}return{valid:!0,data:o}}else if(n===y.array&&r===y.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let s=0;s<e.length;s++){const o=e[s],l=t[s],u=Kn(o,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return n===y.date&&r===y.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}a(Kn,"mergeValues");class It extends N{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=a((s,o)=>{if(Gn(s)||Gn(o))return C;const l=Kn(s.value,o.value);return l.valid?((Xn(s)||Xn(o))&&n.dirty(),{status:n.value,value:l.data}):(_(r,{code:m.invalid_intersection_types}),C)},"handleParsed");return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}a(It,"ZodIntersection"),It.create=(e,t,n)=>new It(p({left:e,right:t,typeName:R.ZodIntersection},D(n)));class Ve extends N{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==y.array)return _(r,{code:m.invalid_type,expected:y.array,received:r.parsedType}),C;if(r.data.length<this._def.items.length)return _(r,{code:m.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),C;!this._def.rest&&r.data.length>this._def.items.length&&(_(r,{code:m.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new je(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>me.mergeArray(n,o)):me.mergeArray(n,s)}get items(){return this._def.items}rest(t){return new Ve(P(p({},this._def),{rest:t}))}}a(Ve,"ZodTuple"),Ve.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ve(p({items:e,typeName:R.ZodTuple,rest:null},D(t)))};class Mt extends N{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==y.object)return _(r,{code:m.invalid_type,expected:y.object,received:r.parsedType}),C;const i=[],s=this._def.keyType,o=this._def.valueType;for(const l in r.data)i.push({key:s._parse(new je(r,l,r.path,l)),value:o._parse(new je(r,r.data[l],r.path,l))});return r.common.async?me.mergeObjectAsync(n,i):me.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof N?new Mt(p({keyType:t,valueType:n,typeName:R.ZodRecord},D(r))):new Mt(p({keyType:ke.create(),valueType:t,typeName:R.ZodRecord},D(n)))}}a(Mt,"ZodRecord");class nn extends N{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==y.map)return _(r,{code:m.invalid_type,expected:y.map,received:r.parsedType}),C;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([l,u],c)=>({key:i._parse(new je(r,l,r.path,[c,"key"])),value:s._parse(new je(r,u,r.path,[c,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(()=>ot(this,null,function*(){for(const u of o){const c=yield u.key,g=yield u.value;if(c.status==="aborted"||g.status==="aborted")return C;(c.status==="dirty"||g.status==="dirty")&&n.dirty(),l.set(c.value,g.value)}return{status:n.value,value:l}}))}else{const l=new Map;for(const u of o){const c=u.key,g=u.value;if(c.status==="aborted"||g.status==="aborted")return C;(c.status==="dirty"||g.status==="dirty")&&n.dirty(),l.set(c.value,g.value)}return{status:n.value,value:l}}}}a(nn,"ZodMap"),nn.create=(e,t,n)=>new nn(p({valueType:t,keyType:e,typeName:R.ZodMap},D(n)));class ft extends N{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==y.set)return _(r,{code:m.invalid_type,expected:y.set,received:r.parsedType}),C;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(_(r,{code:m.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(_(r,{code:m.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(u){const c=new Set;for(const g of u){if(g.status==="aborted")return C;g.status==="dirty"&&n.dirty(),c.add(g.value)}return{status:n.value,value:c}}a(o,"finalizeSet");const l=[...r.data.values()].map((u,c)=>s._parse(new je(r,u,r.path,c)));return r.common.async?Promise.all(l).then(u=>o(u)):o(l)}min(t,n){return new ft(P(p({},this._def),{minSize:{value:t,message:x.toString(n)}}))}max(t,n){return new ft(P(p({},this._def),{maxSize:{value:t,message:x.toString(n)}}))}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}a(ft,"ZodSet"),ft.create=(e,t)=>new ft(p({valueType:e,minSize:null,maxSize:null,typeName:R.ZodSet},D(t)));class vt extends N{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==y.function)return _(n,{code:m.invalid_type,expected:y.function,received:n.parsedType}),C;function r(l,u){return bn({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Sn(),ut].filter(c=>!!c),issueData:{code:m.invalid_arguments,argumentsError:u}})}a(r,"makeArgsIssue");function i(l,u){return bn({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Sn(),ut].filter(c=>!!c),issueData:{code:m.invalid_return_type,returnTypeError:u}})}a(i,"makeReturnsIssue");const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof yt){const l=this;return xe(function(...u){return ot(this,null,function*(){const c=new be([]),g=yield l._def.args.parseAsync(u,s).catch(I=>{throw c.addIssue(r(u,I)),c}),E=yield Reflect.apply(o,this,g);return yield l._def.returns._def.type.parseAsync(E,s).catch(I=>{throw c.addIssue(i(E,I)),c})})})}else{const l=this;return xe(function(...u){const c=l._def.args.safeParse(u,s);if(!c.success)throw new be([r(u,c.error)]);const g=Reflect.apply(o,this,c.data),E=l._def.returns.safeParse(g,s);if(!E.success)throw new be([i(g,E.error)]);return E.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new vt(P(p({},this._def),{args:Ve.create(t).rest(dt.create())}))}returns(t){return new vt(P(p({},this._def),{returns:t}))}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new vt(p({args:t||Ve.create([]).rest(dt.create()),returns:n||dt.create(),typeName:R.ZodFunction},D(r)))}}a(vt,"ZodFunction");class Lt extends N{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}a(Lt,"ZodLazy"),Lt.create=(e,t)=>new Lt(p({getter:e,typeName:R.ZodLazy},D(t)));class Ft extends N{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return _(n,{received:n.data,code:m.invalid_literal,expected:this._def.value}),C}return{status:"valid",value:t.data}}get value(){return this._def.value}}a(Ft,"ZodLiteral"),Ft.create=(e,t)=>new Ft(p({value:e,typeName:R.ZodLiteral},D(t)));function bi(e,t){return new Qe(p({values:e,typeName:R.ZodEnum},D(t)))}a(bi,"createZodEnum");class Qe extends N{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return _(n,{expected:k.joinValues(r),received:n.parsedType,code:m.invalid_type}),C}if(this._def.values.indexOf(t.data)===-1){const n=this._getOrReturnCtx(t),r=this._def.values;return _(n,{received:n.data,code:m.invalid_enum_value,options:r}),C}return xe(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t){return Qe.create(t)}exclude(t){return Qe.create(this.options.filter(n=>!t.includes(n)))}}a(Qe,"ZodEnum"),Qe.create=bi;class jt extends N{_parse(t){const n=k.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==y.string&&r.parsedType!==y.number){const i=k.objectValues(n);return _(r,{expected:k.joinValues(i),received:r.parsedType,code:m.invalid_type}),C}if(n.indexOf(t.data)===-1){const i=k.objectValues(n);return _(r,{received:r.data,code:m.invalid_enum_value,options:i}),C}return xe(t.data)}get enum(){return this._def.values}}a(jt,"ZodNativeEnum"),jt.create=(e,t)=>new jt(p({values:e,typeName:R.ZodNativeEnum},D(t)));class yt extends N{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==y.promise&&n.common.async===!1)return _(n,{code:m.invalid_type,expected:y.promise,received:n.parsedType}),C;const r=n.parsedType===y.promise?n.data:Promise.resolve(n.data);return xe(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}a(yt,"ZodPromise"),yt.create=(e,t)=>new yt(p({type:e,typeName:R.ZodPromise},D(t)));class Me extends N{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===R.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null,s={addIssue:o=>{_(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(l=>this._def.schema._parseAsync({data:l,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(i.type==="refinement"){const o=a(l=>{const u=i.refinement(l,s);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l},"executeRefinement");if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?C:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?C:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Yt(o))return o;const l=i.transform(o.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Yt(o)?Promise.resolve(i.transform(o.value,s)).then(l=>({status:n.value,value:l})):o);k.assertNever(i)}}a(Me,"ZodEffects"),Me.create=(e,t,n)=>new Me(p({schema:e,typeName:R.ZodEffects,effect:t},D(n))),Me.createWithPreprocess=(e,t,n)=>new Me(p({schema:t,effect:{type:"preprocess",transform:e},typeName:R.ZodEffects},D(n)));class He extends N{_parse(t){return this._getType(t)===y.undefined?xe(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}a(He,"ZodOptional"),He.create=(e,t)=>new He(p({innerType:e,typeName:R.ZodOptional},D(t)));class ht extends N{_parse(t){return this._getType(t)===y.null?xe(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}a(ht,"ZodNullable"),ht.create=(e,t)=>new ht(p({innerType:e,typeName:R.ZodNullable},D(t)));class Vt extends N{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===y.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}a(Vt,"ZodDefault"),Vt.create=(e,t)=>new Vt(p({innerType:e,typeName:R.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default},D(t)));class rn extends N{_parse(t){const{ctx:n}=this._processInputParams(t),r=P(p({},n),{common:P(p({},n.common),{issues:[]})}),i=this._def.innerType._parse({data:r.data,path:r.path,parent:p({},r)});return Rn(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new be(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new be(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}a(rn,"ZodCatch"),rn.create=(e,t)=>new rn(p({innerType:e,typeName:R.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch},D(t)));class sn extends N{_parse(t){if(this._getType(t)!==y.nan){const r=this._getOrReturnCtx(t);return _(r,{code:m.invalid_type,expected:y.nan,received:r.parsedType}),C}return{status:"valid",value:t.data}}}a(sn,"ZodNaN"),sn.create=e=>new sn(p({typeName:R.ZodNaN},D(e)));const Io=Symbol("zod_brand");class Qn extends N{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}a(Qn,"ZodBranded");class Bt extends N{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return a(()=>ot(this,null,function*(){const s=yield this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?C:s.status==="dirty"?(n.dirty(),xi(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})}),"handleAsync")();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?C:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new Bt({in:t,out:n,typeName:R.ZodPipeline})}}a(Bt,"ZodPipeline");class an extends N{_parse(t){const n=this._def.innerType._parse(t);return Yt(n)&&(n.value=Object.freeze(n.value)),n}}a(an,"ZodReadonly"),an.create=(e,t)=>new an(p({innerType:e,typeName:R.ZodReadonly},D(t)));const Ri=a((e,t={},n)=>e?gt.create().superRefine((r,i)=>{var s,o;if(!e(r)){const l=typeof t=="function"?t(r):typeof t=="string"?{message:t}:t,u=(o=(s=l.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,c=typeof l=="string"?{message:l}:l;i.addIssue(P(p({code:"custom"},c),{fatal:u}))}}):gt.create(),"custom"),Mo={object:G.lazycreate};var R;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(R||(R={}));const Lo=a((e,t={message:`Input not instance of ${e.name}`})=>Ri(n=>n instanceof e,t),"instanceOfType"),Pi=ke.create,Ti=Xe.create,Fo=sn.create,jo=Ke.create,Oi=Ct.create,Vo=ct.create,Bo=Jt.create,Wo=At.create,Zo=Dt.create,Ho=gt.create,Uo=dt.create,zo=Ze.create,$o=en.create,qo=Ie.create,Go=G.create,Xo=G.strictCreate,Ko=kt.create,Qo=tn.create,Yo=It.create,Jo=Ve.create,el=Mt.create,tl=nn.create,nl=ft.create,rl=vt.create,il=Lt.create,sl=Ft.create,al=Qe.create,ol=jt.create,ll=yt.create,Ci=Me.create,ul=He.create,cl=ht.create,dl=Me.createWithPreprocess,fl=Bt.create;var d=Object.freeze({__proto__:null,defaultErrorMap:ut,setErrorMap:Eo,getErrorMap:Sn,makeIssue:bn,EMPTY_PATH:xo,addIssueToContext:_,ParseStatus:me,INVALID:C,DIRTY:xi,OK:xe,isAborted:Gn,isDirty:Xn,isValid:Yt,isAsync:Rn,get util(){return k},get objectUtil(){return lt},ZodParsedType:y,getParsedType:De,ZodType:N,ZodString:ke,ZodNumber:Xe,ZodBigInt:Ke,ZodBoolean:Ct,ZodDate:ct,ZodSymbol:Jt,ZodUndefined:At,ZodNull:Dt,ZodAny:gt,ZodUnknown:dt,ZodNever:Ze,ZodVoid:en,ZodArray:Ie,ZodObject:G,ZodUnion:kt,ZodDiscriminatedUnion:tn,ZodIntersection:It,ZodTuple:Ve,ZodRecord:Mt,ZodMap:nn,ZodSet:ft,ZodFunction:vt,ZodLazy:Lt,ZodLiteral:Ft,ZodEnum:Qe,ZodNativeEnum:jt,ZodPromise:yt,ZodEffects:Me,ZodTransformer:Me,ZodOptional:He,ZodNullable:ht,ZodDefault:Vt,ZodCatch:rn,ZodNaN:sn,BRAND:Io,ZodBranded:Qn,ZodPipeline:Bt,ZodReadonly:an,custom:Ri,Schema:N,ZodSchema:N,late:Mo,get ZodFirstPartyTypeKind(){return R},coerce:{string:e=>ke.create(P(p({},e),{coerce:!0})),number:e=>Xe.create(P(p({},e),{coerce:!0})),boolean:e=>Ct.create(P(p({},e),{coerce:!0})),bigint:e=>Ke.create(P(p({},e),{coerce:!0})),date:e=>ct.create(P(p({},e),{coerce:!0}))},any:Ho,array:qo,bigint:jo,boolean:Oi,date:Vo,discriminatedUnion:Qo,effect:Ci,enum:al,function:rl,instanceof:Lo,intersection:Yo,lazy:il,literal:sl,map:tl,nan:Fo,nativeEnum:ol,never:zo,null:Zo,nullable:cl,number:Ti,object:Go,oboolean:a(()=>Oi().optional(),"oboolean"),onumber:a(()=>Ti().optional(),"onumber"),optional:ul,ostring:a(()=>Pi().optional(),"ostring"),pipeline:fl,preprocess:dl,promise:ll,record:el,set:nl,strictObject:Xo,string:Pi,symbol:Bo,transformer:Ci,tuple:Jo,undefined:Wo,union:Ko,unknown:Uo,void:$o,NEVER:C,ZodIssueCode:m,quotelessJson:Qt,ZodError:be}),hl=Object.defineProperty,pl=a((e,t,n)=>t in e?hl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"base_defNormalProp"),Ai=a((e,t,n)=>(pl(e,typeof t!="symbol"?t+"":t,n),n),"__publicField");class ae{constructor(t,n){Ai(this,"_call"),Ai(this,"call"),this._call=t,this.call=ar(this._call,n)}}a(ae,"NamespaceBase");function de(e){return typeof e=="string"?e:e instanceof Ue?e._id:e}a(de,"getRemId");const Di=a(e=>e.map(de),"getRemIds");var ml=Object.defineProperty,Ni=Object.getOwnPropertySymbols,gl=Object.prototype.hasOwnProperty,vl=Object.prototype.propertyIsEnumerable,Yn=a((e,t,n)=>t in e?ml(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"rem_defNormalProp"),yl=a((e,t)=>{for(var n in t||(t={}))gl.call(t,n)&&Yn(e,n,t[n]);if(Ni)for(var n of Ni(t))vl.call(t,n)&&Yn(e,n,t[n]);return e},"rem_spreadValues"),f=a((e,t,n)=>(Yn(e,typeof t!="symbol"?t+"":t,n),n),"rem_publicField"),h=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"__async");class Ue{constructor(t,n){f(this,"_id"),f(this,"createdAt"),f(this,"localUpdatedAt"),f(this,"updatedAt"),f(this,"parent"),f(this,"children"),f(this,"type"),f(this,"text"),f(this,"backText"),f(this,"_callMethod"),f(this,"call",(r,i)=>h(this,null,function*(){return yield this._callMethod(r,yl({remId:this._id},i),er)})),f(this,"callAndReturnRem",(r,i)=>h(this,null,function*(){const s=yield this.call(r,i);if(s)return new Ue(s,this._callMethod.bind(this))})),f(this,"callAndReturnManyRem",(r,i)=>h(this,null,function*(){const s=yield this.call(r,i);return s?s.map(o=>new Ue(o,this._callMethod.bind(this))):[]})),f(this,"setTableFilter",r=>h(this,null,function*(){return yield this.call("setTableFilter",{filter:r})})),f(this,"isTable",()=>h(this,null,function*(){return yield this.call("isTable",{})})),f(this,"allRemInFolderQueue",()=>h(this,null,function*(){return((yield this.call("allRemInFolderQueue",{}))||[]).map(i=>new Ue(i,this._callMethod.bind(this)))})),f(this,"positionAmongstSiblings",r=>h(this,null,function*(){return this.call("positionAmongstSiblings",{portalId:r})})),f(this,"positionAmongstVisibleSiblings",r=>h(this,null,function*(){return this.call("positionAmongstVisibleSiblings",{portalId:r})})),f(this,"hasPowerup",r=>h(this,null,function*(){return yield this.call("hasPowerup",{powerupCode:r})})),f(this,"getHiddenExplicitlyIncludedState",r=>h(this,null,function*(){return yield this.call("getHiddenExplicitlyIncludedState",{portalId:r})})),f(this,"setHiddenExplicitlyIncludedState",(r,i)=>h(this,null,function*(){return yield this.call("setHiddenExplicitlyIncludedState",{hiddenExplicitlyIncludedState:r,portalId:i})})),f(this,"getLastPracticed",()=>h(this,null,function*(){return yield this.call("getLastPracticed",{})})),f(this,"addPowerup",r=>h(this,null,function*(){return yield this.call("addPowerup",{powerupCode:r})})),f(this,"getLastTimeMovedTo",()=>h(this,null,function*(){return yield this.call("getLastTimeMovedTo",{})})),f(this,"getSchemaVersion",()=>h(this,null,function*(){return yield this.call("getSchemaVersion",{})})),f(this,"embeddedQueueViewMode",()=>h(this,null,function*(){return yield this.call("embeddedQueueViewMode",{})})),f(this,"isCollapsed",r=>h(this,null,function*(){return yield this.call("isCollapsed",{portalId:r})})),f(this,"setIsCollapsed",(r,i)=>h(this,null,function*(){return yield this.call("setIsCollapsed",{isCollapsed:r,portalId:i})})),f(this,"timesSelectedInSearch",()=>h(this,null,function*(){return yield this.call("timesSelectedInSearch",{})})),f(this,"getPortalType",()=>h(this,null,function*(){return yield this.call("getPortalType",{})})),f(this,"getPortalDirectlyIncludedRem",()=>h(this,null,function*(){return yield this.call("getPortalDirectlyIncludedRem",{})})),f(this,"getType",()=>h(this,null,function*(){return yield this.call("getType",{})})),f(this,"setPowerupProperty",(r,i,s)=>h(this,null,function*(){const o=Object.values(wt).includes(r)?Wt[r][i]:i;return yield this.call("setPowerupProperty",{powerupCode:r,powerupSlot:o,value:s})})),f(this,"getPowerupProperty",(r,i)=>h(this,null,function*(){const s=Object.values(wt).includes(r)?Wt[r][i]:i;return yield this.call("getPowerupProperty",{powerupCode:r,powerupSlot:s})})),f(this,"getPowerupPropertyAsRem",(r,i)=>h(this,null,function*(){const s=Object.values(wt).includes(r)?Wt[r][i]:i;return yield this.callAndReturnRem("getPowerupPropertyAsRem",{powerupCode:r,powerupSlot:s})})),f(this,"getTagPropertyAsRem",r=>h(this,null,function*(){return yield this.callAndReturnRem("getTagPropertyAsRem",{propertyId:r})})),f(this,"getPowerupPropertyAsRichText",(r,i)=>h(this,null,function*(){const s=Object.values(wt).includes(r)?Wt[r][i]:i;return yield this.call("getPowerupPropertyAsRichText",{powerupCode:r,powerupSlot:s})})),f(this,"setText",r=>h(this,null,function*(){return yield this.call("setText",{text:r})})),f(this,"setBackText",r=>h(this,null,function*(){return yield this.call("setBackText",{backText:r})})),f(this,"getTagPropertyValue",r=>h(this,null,function*(){return yield this.call("getTagPropertyValue",{propertyId:r})})),f(this,"getPropertyType",()=>h(this,null,function*(){return yield this.call("getPropertyType",{})})),f(this,"setTagPropertyValue",(r,i)=>h(this,null,function*(){return yield this.call("setTagPropertyValue",{propertyId:r,value:i})})),f(this,"removeTag",(r,i=!1)=>h(this,null,function*(){return yield this.call(i?"removeTagAndSlots":"removeTag",{tagId:r})})),f(this,"removePowerup",r=>h(this,null,function*(){return yield this.call("removePowerup",{powerupCode:r})})),f(this,"addTag",r=>h(this,null,function*(){const i=de(r);return yield this.call("addTag",{tagId:i})})),f(this,"remove",()=>h(this,null,function*(){return yield this.call("remove",{})})),f(this,"getTagRems",()=>h(this,null,function*(){return this.callAndReturnManyRem("getTagRems",{})})),f(this,"addToPortal",r=>h(this,null,function*(){const i=de(r);return yield this.call("addToPortal",{portalId:i})})),f(this,"removeFromPortal",r=>h(this,null,function*(){const i=de(r);return yield this.call("removeFromPortal",{portalId:i})})),f(this,"setParent",(r,i)=>h(this,null,function*(){const s=de(r);return yield this.call("setParent",{parentId:s,positionAmongstSiblings:i})})),f(this,"getOrCreateAliasWithText",r=>h(this,null,function*(){return yield this.callAndReturnRem("getOrCreateAliasWithText",{aliasText:r})})),f(this,"getChildrenRem",()=>h(this,null,function*(){return yield this.callAndReturnManyRem("getChildrenRem")})),f(this,"allRemInDocumentOrPortal",()=>h(this,null,function*(){return yield this.callAndReturnManyRem("allRemInDocumentOrPortal")})),f(this,"expand",(r,i)=>h(this,null,function*(){const s=de(r);return yield this.call("expand",{portalId:s,recurse:i})})),f(this,"collapse",r=>h(this,null,function*(){const i=de(r);return yield this.call("collapse",{portalId:i})})),f(this,"siblingRem",()=>h(this,null,function*(){return yield this.callAndReturnManyRem("siblingRem")})),f(this,"visibleSiblingRem",r=>h(this,null,function*(){return yield this.callAndReturnManyRem("visibleSiblingRem",{portalId:r})})),f(this,"taggedRem",()=>h(this,null,function*(){return yield this.callAndReturnManyRem("taggedRem")})),f(this,"ancestorTagRem",()=>h(this,null,function*(){return yield this.callAndReturnManyRem("ancestorTagRem")})),f(this,"descendantTagRem",()=>h(this,null,function*(){return yield this.callAndReturnManyRem("descendantTagRem")})),f(this,"getDescendants",()=>h(this,null,function*(){return yield this.callAndReturnManyRem("getDescendants")})),f(this,"getCards",()=>h(this,null,function*(){const r=yield this.call("getCards");return(r==null?void 0:r.map(i=>new _t(i,this._callMethod)))||[]})),f(this,"getAliases",()=>h(this,null,function*(){return yield this.callAndReturnManyRem("getAliases")})),f(this,"getParentRem",()=>h(this,null,function*(){return yield this.callAndReturnRem("getParentRem")})),f(this,"portalsAndDocumentsIn",()=>h(this,null,function*(){return yield this.callAndReturnManyRem("portalsAndDocumentsIn")})),f(this,"merge",r=>h(this,null,function*(){return yield this.call("merge",{remIdToMergeIntoThisOne:r})})),f(this,"mergeAndSetAlias",r=>h(this,null,function*(){const i=de(r);return yield this.call("mergeAndSetAlias",{remIdToMergeIntoThisOne:i})})),f(this,"indent",r=>h(this,null,function*(){const i=de(r);return yield this.call("indent",{portalId:i})})),f(this,"outdent",r=>h(this,null,function*(){const i=de(r);return yield this.call("outdent",{portalId:i})})),f(this,"setType",r=>h(this,null,function*(){return yield this.call("setType",{type:r})})),f(this,"remsReferencingThis",()=>h(this,null,function*(){return yield this.callAndReturnManyRem("remsReferencingThis")})),f(this,"remsBeingReferenced",()=>h(this,null,function*(){return yield this.callAndReturnManyRem("remsBeingReferenced")})),f(this,"deepRemsBeingReferenced",()=>h(this,null,function*(){return yield this.callAndReturnManyRem("deepRemsBeingReferenced")})),f(this,"getSources",()=>h(this,null,function*(){return yield this.callAndReturnManyRem("getSources")})),f(this,"addSource",r=>h(this,null,function*(){const i=de(r);return yield this.call("addSource",{sourceId:i})})),f(this,"removeSource",r=>h(this,null,function*(){const i=de(r);return yield this.call("removeSource",{sourceId:i})})),f(this,"isDocument",()=>h(this,null,function*(){return yield this.call("isDocument")})),f(this,"setIsDocument",r=>h(this,null,function*(){return yield this.call("setIsDocument",{isDocument:r})})),f(this,"isListItem",()=>h(this,null,function*(){return yield this.call("isListItem")})),f(this,"setIsListItem",r=>h(this,null,function*(){return yield this.call("setIsListItem",{isListItem:r})})),f(this,"isCardItem",()=>h(this,null,function*(){return yield this.call("isMultilineCard")})),f(this,"setIsCardItem",r=>h(this,null,function*(){return yield this.call("setIsMultilineCard",{isCardItem:r})})),f(this,"isQuote",()=>h(this,null,function*(){return yield this.call("isQuote")})),f(this,"setIsQuote",r=>h(this,null,function*(){yield this.call("setIsQuote",{isQuote:r})})),f(this,"isCode",()=>h(this,null,function*(){return yield this.call("isCode")})),f(this,"setIsCode",r=>h(this,null,function*(){yield this.call("setIsCode",{isCode:r})})),f(this,"isTodo",()=>h(this,null,function*(){return yield this.call("isTodo")})),f(this,"setIsTodo",r=>h(this,null,function*(){yield this.call("setIsTodo",{isTodo:r})})),f(this,"getTodoStatus",()=>h(this,null,function*(){return yield this.call("getTodoStatus")})),f(this,"setTodoStatus",r=>h(this,null,function*(){return yield this.call("setTodoStatus",{todoStatus:r})})),f(this,"getFontSize",()=>h(this,null,function*(){return yield this.call("getFontSize")})),f(this,"setFontSize",r=>h(this,null,function*(){return yield this.call("setFontSize",{fontSize:r})})),f(this,"getHighlightColor",()=>h(this,null,function*(){return yield this.call("getHighlightColor")})),f(this,"setHighlightColor",r=>h(this,null,function*(){return yield this.call("setHighlightColor",{highlightColor:r})})),f(this,"isPowerup",()=>h(this,null,function*(){return yield this.call("isPowerup")})),f(this,"isPowerupEnum",()=>h(this,null,function*(){return yield this.call("isPowerupEnum")})),f(this,"isPowerupPropertyListItem",()=>h(this,null,function*(){return yield this.call("isPowerupPropertyListItem")})),f(this,"isPowerupSlot",()=>h(this,null,function*(){return yield this.call("isPowerupSlot")})),f(this,"isPowerupProperty",()=>h(this,null,function*(){return yield this.call("isPowerupProperty")})),f(this,"isSlot",()=>h(this,null,function*(){return yield this.call("isSlot")})),f(this,"setIsSlot",r=>h(this,null,function*(){return yield this.call("setIsSlot",{isSlot:r})})),f(this,"isProperty",()=>h(this,null,function*(){return yield this.call("isSlot")})),f(this,"setIsProperty",r=>h(this,null,function*(){return yield this.call("setIsSlot",{isSlot:r})})),f(this,"openRemInContext",()=>h(this,null,function*(){yield this.call("openRemInContext")})),f(this,"openRemAsPage",()=>h(this,null,function*(){yield this.call("openRemAsPage")})),f(this,"getEnablePractice",()=>h(this,null,function*(){return yield this.call("getEnablePractice")})),f(this,"getPracticeDirection",()=>h(this,null,function*(){return yield this.call("getPracticeDirection")})),f(this,"setEnablePractice",r=>h(this,null,function*(){return yield this.call("setEnablePractice",{enablePractice:r})})),f(this,"setPracticeDirection",r=>h(this,null,function*(){return yield this.call("setPracticeDirection",{direction:r})})),f(this,"copyPortalReferenceToClipboard",()=>h(this,null,function*(){return yield this.call("copyPortalReferenceToClipboard")})),f(this,"copyTagReferenceToClipboard",()=>h(this,null,function*(){return yield this.call("copyTagReferenceToClipboard")})),f(this,"copyReferenceToClipboard",()=>h(this,null,function*(){return yield this.call("copyReferenceToClipboard")})),f(this,"scrollToReaderHighlight",()=>h(this,null,function*(){return yield this.call("scrollToReaderHighlight")})),this._id=t._id,this.parent=t.parent,this.children=t.children,this.type=t.type,this.text=t.text,this.backText=t.backText,this.updatedAt=t.u,this.localUpdatedAt=t.o,this.createdAt=t.createdAt,this._callMethod=n}}a(Ue,"Rem");class Jn extends ae{constructor(t){super(t,er),f(this,"findOne",n=>h(this,null,function*(){if(!n)return;const r=yield this.call("findOne",{remId:n});if(r)return new fe(r,this.call)})),f(this,"createSingleRemWithMarkdown",(n,r)=>h(this,null,function*(){const i=yield this.call("createSingleRemWithMarkdown",{markdown:n,parentId:r});return i&&new fe(i,this.call)})),f(this,"createTreeWithMarkdown",(n,r)=>h(this,null,function*(){return((yield this.call("createTreeWithMarkdown",{markdown:n,parentId:r}))||[]).map(s=>new fe(s,this.call))})),f(this,"findByName",(n,r)=>h(this,null,function*(){const i=yield this.call("findByName",{name:n,parentId:r});if(i)return new fe(i,this.call)})),f(this,"moveRems",(n,r,i,s)=>h(this,null,function*(){const o=Di(n),l=de(r),u=de(s);yield this.call("moveRems",{portalId:u,remIds:o,newParentId:l,positionAmongstSiblings:i})})),f(this,"getAll",()=>h(this,null,function*(){return((yield this.call("getAll",{}))||[]).map(r=>new fe(r,this._call))})),f(this,"findMany",n=>h(this,null,function*(){const r=Di(n),i=yield this.call("findMany",{remIds:r});if(i)return i.map(s=>new fe(s,this._call))})),f(this,"createPortal",()=>h(this,null,function*(){const n=yield this.call("createPortal",{});return n?new fe(n,this._call):void 0})),f(this,"createLinkRem",(n,r=!0)=>h(this,null,function*(){const i=yield this.call("createLinkRem",{url:n,addTitle:r});if(i)return new fe(i,this._call)})),f(this,"createTable",n=>h(this,null,function*(){const r=de(n),i=yield this.call("createTable",{existingTagId:r});if(i)return new fe(i,this._call)})),f(this,"createRem",()=>h(this,null,function*(){const n=yield this.call("createRem",{});if(n)return new fe(n,this._call)}))}}a(Jn,"RemNamespace");const fe=Ue,er="rem";var _l=Object.defineProperty,ki=Object.getOwnPropertySymbols,wl=Object.prototype.hasOwnProperty,El=Object.prototype.propertyIsEnumerable,tr=a((e,t,n)=>t in e?_l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"card_defNormalProp"),Ii=a((e,t)=>{for(var n in t||(t={}))wl.call(t,n)&&tr(e,n,t[n]);if(ki)for(var n of ki(t))El.call(t,n)&&tr(e,n,t[n]);return e},"card_spreadValues"),ge=a((e,t,n)=>(tr(e,typeof t!="symbol"?t+"":t,n),n),"card_publicField"),Ye=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"card_async");const nr="card";class rr extends ae{constructor(t){super(t,nr),ge(this,"findOne",n=>Ye(this,null,function*(){if(!n)return;const r=yield this.call("findOne",{id:n});return r?new _t(r,this._call):void 0})),ge(this,"getAll",()=>Ye(this,null,function*(){const n=yield this.call("getAll",{});return(n==null?void 0:n.map(r=>new _t(r,this._call)))||[]})),ge(this,"findMany",n=>Ye(this,null,function*(){const r=yield this.call("findMany",{ids:n});return(r==null?void 0:r.map(i=>new _t(i,this._call)))||[]}))}}a(rr,"CardNamespace");class _t extends ae{constructor(t,n){super(n,nr),ge(this,"_id"),ge(this,"remId"),ge(this,"type"),ge(this,"createdAt"),ge(this,"repetitionHistory"),ge(this,"nextRepetitionTime"),ge(this,"timesWrongInRow"),ge(this,"lastRepetitionTime"),ge(this,"callCard",(i,s)=>Ye(this,null,function*(){return yield this._call(i,Ii({id:this._id},s),nr)})),ge(this,"callRem",(i,s)=>Ye(this,null,function*(){return yield this._call(i,Ii({},s),er)})),ge(this,"getType",()=>Ye(this,null,function*(){return yield this.callCard("getType",{id:this._id})})),ge(this,"getRem",()=>Ye(this,null,function*(){return yield this.callRem("findOne",{remId:this.remId})})),ge(this,"remove",()=>Ye(this,null,function*(){return yield this.callCard("remove",{})})),ge(this,"updateCardRepetitionStatus",i=>Ye(this,null,function*(){return yield this.callCard("updateCardRepetitionStatus",{score:i})})),this._id=t._id,this.remId=t.remId;const r=t.cardType;this.type=r==="f"?"forward":r==="b"?"backward":{clozeId:r},this.createdAt=t.createdAt,this.repetitionHistory=t.history,this.nextRepetitionTime=t.activeNextTime,this.timesWrongInRow=t.timesWrongInRow}}a(_t,"Card");var Tn=(e=>(e.Rem="Rem",e.Text="Text",e.PDF="PDF",e.WebReader="WebReader",e))(Tn||{});const Mi={quote:"q",underline:"u",bold:"b",italic:"l"};var On=(e=>(e[e.undefined=0]="undefined",e[e.Red=1]="Red",e[e.Orange=2]="Orange",e[e.Yellow=3]="Yellow",e[e.Green=4]="Green",e[e.Blue=6]="Blue",e[e.Purple=5]="Purple",e[e.Gray=7]="Gray",e[e.Brown=8]="Brown",e[e.Pink=9]="Pink",e))(On||{}),ir=(e=>(e.Read="Read",e.ReadCreate="ReadCreate",e.ReadCreateModify="ReadCreateModify",e.ReadCreateModifyDelete="ReadCreateModifyDelete",e))(ir||{}),Je=(e=>(e.All="All",e.DescendantsOfName="DescendantsOfName",e.DescendantsOfId="DescendantsOfId",e.Powerup="Powerup",e.FocusedSubtree="FocusedSubtree",e.KnowledgeBaseInfo="KnowledgeBaseInfo",e))(Je||{}),Li=(e=>(e.FloatingWidget="FloatingWidget",e.PaneHeader="PaneHeader",e.Index="Index",e.TopBar="TopBar",e.QueueToolbar="QueueToolbar",e.DocumentAboveToolbar="AboveDocumentToolbar",e.DocumentBelowToolbar="DocumentBelowToolbar",e.DocumentBelowEditor="DocumentBelowEditor",e.DocumentBelowTitle="DocumentBelowTitle",e.SidebarEnd="SidebarEnd",e.RemReferencePopupStart="RemReferencePopupStart",e.RemReferencePopupRight="RemReferencePopupRight",e.Pane="Pane",e.FlashcardAnswerButtons="FlashcardAnswerButtons",e.FlashcardAnswer="FlashcardAnswer",e.Flashcard="Flashcard",e.FlashcardExtraDetail="FlashcardExtraDetail",e.FlashcardUnder="FlashcardUnder",e.RightSidebar="RightSidebar",e.LeftSidebar="LeftSidebar",e.Popup="Popup",e.UnderRemEditor="UnderRemEditor",e.RightSideOfEditor="RightSideOfEditor",e.SelectedTextMenu="SelectedTextMenu",e.PDFHighlightToolbarLocation="PDFHighlightToolbarLocation",e.PDFHighlightPopupLocation="PDFHighlightPopupLocation",e.DeckPage="DeckPage",e.LearningProgressPage="LearningProgressPage",e))(Li||{}),wt=(e=>(e.Aliases="l",e.AutoSort="a",e.AppliedTemplates="at",e.AutoTemplate="m",e.CustomCSS="c",e.DailyDocument="d",e.DisableCards="u",e.Divider="dv",e.Document="o",e.DocumentSidebar="s",e.EditLater="e",e.Emoji="j",e.ExtraCardDetail="x",e.Header="r",e.Highlight="h",e.Link="b",e.List="i",e.MultiLineCard="w",e.PDFPageNumber="pn",e.PDFHighlight="n",e.QuickAdd="q",e.Quote="qt",e.RestoredFromTrash="rt",e.Slot="y",e.Sources="os",e.SuperPrivate="k",e.UsedAsTag="g",e.Todo="t",e.UploadedFile="f",e.WebHighlight="p",e.Website="z",e.Code="cd",e.TypeInAnswer="ty",e.Deck="de",e.SearchPortal="sp",e.Collection="ct",e.HTMLHighlight="hh",e.HideQueueAncestors="ha",e.ImportedDocument="id",e.SavedDocuments="sd",e))(wt||{});const Wt={ha:{},l:{Aliases:"a"},ct:{Template:"t"},a:{SortDirection:"d"},cd:{Language:"l",DontWrap:"w",DontBoundHeight:"b"},m:{},c:{},d:{Timestamp:"s",Date:"d"},u:{},o:{Status:"s",DeprecatedSource:"o"},s:{},dv:{},e:{Message:"m"},j:{},x:{},r:{Size:"s"},h:{Color:"c"},b:{URL:"u",Title:"t",ReadPercent:"r",LastReadDate:"d",FileURL:"f"},i:{},w:{},n:{Data:"d",PdfId:"p"},hh:{Data:"d",HTMLId:"h"},pn:{},q:{},qt:{},rt:{Date:"d"},y:{SelectTag:"t",ExtraSlotsOnFrontOfCard:"f",ExtraSlotsOnBackOfCard:"b"},os:{Sources:"os"},at:{Templates:"t"},sp:{Query:"q",Filter:"f",AutomaticBacklinkSearchPortalFor:"b",DontIncludeNestedDescendants:"s"},k:{},g:{AutoActivate:"a",Pinned:"p",CollapseConfigure:"c",PrimaryColumnName:"n"},t:{Status:"s"},f:{Type:"t",URL:"u",Name:"n",Authors:"a",Keywords:"k",Title:"i",ViewerData:"v",ReadPercent:"r",LastReadDate:"d",HasNoTextLayer:"tl",Theme:"h"},p:{Data:"d",Url:"w"},z:{Hostname:"u"},ty:{},de:{Topics:"t",Status:"s",MaxNewCardsPerDay:"m",MaxTotalCardsPerDay:"c",ExamSchedulerDate:"e",ExamSchedulerDesiredStability:"eds",ExamSchedulerMaxNewCardsPerDay:"emnc",ExamSchedulerMaxTotalCardsPerDay:"emtc"},id:{},sd:{}};var Fi=(e=>(e[e.DEFAULT_TYPE=void 0]="DEFAULT_TYPE",e[e.CONCEPT=1]="CONCEPT",e[e.DESCRIPTOR=2]="DESCRIPTOR",e))(Fi||{}),ji=(e=>(e[e.DEFAULT_TYPE=void 0]="DEFAULT_TYPE",e[e.CONCEPT=1]="CONCEPT",e[e.DESCRIPTOR=2]="DESCRIPTOR",e[e.PORTAL=6]="PORTAL",e))(ji||{}),Vi=(e=>(e[e.DEFAULT_TYPE=0]="DEFAULT_TYPE",e[e.CONCEPT=1]="CONCEPT",e[e.DESCRIPTOR=2]="DESCRIPTOR",e[e.PORTAL=3]="PORTAL",e))(Vi||{});function xl(e){switch(e){case tt.CONCEPT:return 1;case tt.DESCRIPTOR:return 2;case tt.PORTAL:return 3;default:return 0}}a(xl,"remTypeToTinyGraphType");function Sl(e){switch(e){case 1:return tt.CONCEPT;case 2:return tt.DESCRIPTOR;case 3:return tt.PORTAL;default:return tt.DEFAULT_TYPE}}a(Sl,"remTypeTinyGraphToNormal");var Bi=(e=>(e.MultipleWindows="multipleWindows",e.MultipleWindowsPanel="multipleWindowsPanel",e.Dropdown="Dropdown",e.Breadcrumbs="Breadcrumbs",e.FloatingDiscussion="floatingDiscussion",e.WindowManager="windowManager",e.WindowPane="windowPane",e.MobileTabBar="MobileTabBar",e.Document="document",e.NotificationPanel="notificationPanel",e.EmojiPicker="EmojiPicker",e.HierarchyEditorTree="hierarchyEditorTree",e.ChangeCodeLanguage="ChangeCodeLanguage",e.HierarchyEditorTreePortal="hierarchyEditorTreePortal",e.HierarchyEditorTreeRem="hierarchyEditorTreeRem",e.RichTextEditor="richTextEditor",e.RichTextEditorItem="richTextEditorItem",e.RichTextEditorAliasPopup="richTextEditorAliasPopup",e.TableCellList="tableCellList",e.TableCellPopup="tableCellPopup",e.Table="Table",e.ColumnConfigurationMenu="columnConfigurationMenu",e.Popup="popup",e.Omnibar="omnibar",e.QuickAdd="quickAdd",e.Date="date",e.Queue="queue",e.TypeAnswerBox="typeAnswerBox",e.QueryBuilder="queryBuilder",e.PublishedKnowledgeBase="publishedKnowledgeBase",e.ArticleViewer="articleViewer",e.Article="article",e.FullPageSearch="fullPageSearch",e.ExtraDate="extraDate",e.DropToOpenAsDocument="dropToOpenAsDocument",e.TableSearch="TableSearch",e.PDF="pdf",e.PdfPageNumber="pdfPageNumber",e.NotesPopup="notesPopup",e.PDFUploader="pdfUploader",e.Reader="reader",e.RemSearchPopup="remSearchPopup",e.Debugger="debugger",e.SelectRem="selectRem",e.ExpressionSelect="ExpressionSelect",e.HiddenChildren="hiddenChildren",e.TableTitle="tableTitle",e.TableTagTitle="tableTagTitle",e.TableColumnTitle="tableColumnTitle",e.Toolbar="toolbar",e.Title="title",e.ArticleQueue="articleQueue",e.UserDocument="userDocument",e.DocumentSidebar="documentSidebar",e.RightSidebar="rightSidebar",e.Documents="documents",e.AudioVideo="audioVideo",e.ImageNode="imageNode",e.QueryNodeEditor="queryNodeEditor",e.LinkBox="linkBox",e.SelectedTextMenu="selectedTextMenu",e.RemReferenceNode="remReferenceNode",e.DeckTopicsList="deckTopics",e.DeckTopic="deckTopic",e.AddDeckTopic="addDeckTopic",e.DocSources="docSources",e.DocTags="docTags",e.AddSources="addSources",e.AddTags="addTags",e.InlineLink="inlineLink",e.ImageSelector="imageSelector",e.Latex="latex",e.Image="image",e.Cloze="cloze",e.Alias="alias",e.QueueFolderDropdownSelector="queueFolderDropdownSelector",e.CustomEditLaterMessage="customEditLaterMessage",e.DocumentParents="documentParents",e.AreaHighlight="areaHighlight",e.WindowOne="windowOne",e.WindowTwo="windowTwo",e.Replace="replace",e.Find="find",e.Tag="tag",e.TagBar="tagBar",e.Menu="menu",e.Screenshot="screenshot",e.HelpMessage="helpMessage",e.AddNode="addNode",e.EditEdge="editEdge",e.Controls="controls",e.DocumentSource="documentSource",e.Merge="merge",e.HierarchyEditorTemplateFields="hierarchyEditorTemplateFields",e.SearchExistingTable="searchExistingTable",e.FieldKey="fieldKey",e.PluginRemRichTextEditor="pluginRemRichTextEditor",e.PluginRichTextViewer="pluginRichTextViewer",e.RemHierarchyEditorTree="remHierarchyEditorTree",e.PluginQueue="pluginQueue",e.RichTextEditorFakeEmbed="richTextEditorFakeEmbed",e.DocumentHeader="documentHeader",e.TemplateValueEditor="TemplateValueEditor",e.TemplateValueTextEditor="TemplateValueTextEditor",e.Key="key",e.Value="value",e.CtrlF="ctrlF",e.CtrlFFind="ctrlFind",e.CtrlFReplace="ctrlReplace",e.CtrlFFilter="ctrlFilter",e.SearchResult="searchResult",e.SearchResultItem="searchResultItem",e.FocusableInput="focusableInput",e.UpvoteDownvoteFeedback="UpvoteDownvoteFeedback",e.RightSidebarHelpInput="RightSidebarHelpInput",e.LeftSidebarTutorial="LeftSidebarTutorial",e.Tab="tab",e))(Bi||{}),Wi=(e=>(e.Text="text",e.SelectedRange="selectedRange",e))(Wi||{}),bl=(e=>(e.Global="global",e.RemFocused="rem-focused",e.RemSelected="rem-selected",e))(bl||{}),sr=(e=>(e[e.IMPLICIT_TEXT=void 0]="IMPLICIT_TEXT",e.TITLE="title",e.NUMBER="number",e.TEXT="text",e.CHECKBOX="checkbox",e.DATE="date",e.MULTI_SELECT="multi_select",e.SINGLE_SELECT="single_select",e.CREATED_AT="created_at",e.LAST_UPDATED="last_updated",e.IMAGE="image",e.URL="url",e.DEFINITION="definition",e))(sr||{}),Zi=(e=>(e.PropertyConfigMenu="PropertyConfigMenu",e.QueueMenu="QueueMenu",e.ReaderMenu="ReaderMenu",e.PDFHighlightPopupLocation="PDFHighlightPopupLocation",e.DocumentMenu="DocumentMenu",e))(Zi||{});const Rl=d.union([d.object({type:d.literal("email")}),d.object({type:d.literal("url")}),d.object({type:d.literal("regex"),arg:d.string()}),d.object({type:d.literal("startsWith"),arg:d.string()}),d.object({type:d.literal("endsWith"),arg:d.string()}),d.object({type:d.literal("min"),arg:d.number().positive()}),d.object({type:d.literal("max"),arg:d.number().positive()}),d.object({type:d.literal("length"),arg:d.number().positive()})]),Pl=d.union([d.object({type:d.literal("gte"),arg:d.number()}),d.object({type:d.literal("min"),arg:d.number()}),d.object({type:d.literal("gt"),arg:d.number()}),d.object({type:d.literal("lt"),arg:d.number()}),d.object({type:d.literal("lte"),arg:d.number()}),d.object({type:d.literal("int")}),d.object({type:d.literal("multipleOf"),arg:d.number()}),d.object({type:d.literal("step"),arg:d.number()}),d.object({type:d.literal("positive")}),d.object({type:d.literal("negative")}),d.object({type:d.literal("max"),arg:d.number()})]);var Hi=(e=>(e[e.TOO_EARLY=.01]="TOO_EARLY",e[e.AGAIN=0]="AGAIN",e[e.HARD=.5]="HARD",e[e.GOOD=1]="GOOD",e[e.EASY=1.5]="EASY",e[e.VIEWED_AS_LEECH=2]="VIEWED_AS_LEECH",e[e.RESET=3]="RESET",e))(Hi||{});function ar(e,t){return(n,r)=>e(n,r,t)}a(ar,"makeNamespacedCall");var Le=(e=>(e.Queue="Queue",e.PreviewRemCards="ViewAsCard",e.LoadingSpinner="LoadingSpinner",e.RichTextEditor="RichTextEditor",e.RichText="RichTextViewer",e.RemRichTextEditor="RemRichTextEditor",e.RemViewer="RemViewer",e.RemHierarchyEditorTree="RemHierarchyEditorTree",e.PDFWebReader="PDFWebReader",e.DocumentViewer="DocumentViewer",e))(Le||{});const Tl={REM:"q",IMAGE:"i",AUDIO:"a",PLUGIN:"p",DRAWING:"r",GLOBAL_NAME:"g",DEPRECATED_CODE:"o",ANNOTATION:"n",TEXT:"m",LATEX:"x",CARD_DELIMITER:"s",FLASHCARD_ICON:"fi",ADD_ICON:"ai"},et={CLOZE:"cId",UNDERLINE:"u",BOLD:"b",ITALIC:"l",INLINE_LINK:"qId",INLINE_CODE:"q",QUOTE:"qt",HIDDEN_CLOZE:"hiddenCloze",REVEALED_CLOZE:"revealedCloze",HIGHLIGHT:"h",TEXT_COLOR:"tc",DEPRECATED_LINK:"url",CODE:"code",CODE_LANGUAGE:"language",COMMENT_ID:"c"},ze={UNDERLINE:"u",BOLD:"b",ITALIC:"t",INLINE_CODE:"c",CLOZE:"e",HIDDEN_CLOZE:"z",LINK:"l",HIGHLIGHT:"h",DATE:"d"},Ol={LATEX:"x"},Cl={[ze.UNDERLINE]:et.UNDERLINE,[ze.BOLD]:et.BOLD,[ze.ITALIC]:et.ITALIC,[ze.INLINE_CODE]:et.INLINE_CODE,[ze.CLOZE]:et.CLOZE,[ze.HIDDEN_CLOZE]:et.HIDDEN_CLOZE,[ze.LINK]:et.DEPRECATED_LINK,[ze.HIGHLIGHT]:et.HIGHLIGHT,[ze.DATE]:!0};var tt=(e=>(e[e.DEFAULT_TYPE=void 0]="DEFAULT_TYPE",e[e.CONCEPT=1]="CONCEPT",e[e.DESCRIPTOR=2]="DESCRIPTOR",e[e.DEPRECATED_BASIC_CARD=4]="DEPRECATED_BASIC_CARD",e[e.PORTAL=6]="PORTAL",e[e.DEPRECATED_SLOT=3]="DEPRECATED_SLOT",e[e.DEPRECATED_PATTERN=5]="DEPRECATED_PATTERN",e[e.DEPRECATED_COLLECTION=7]="DEPRECATED_COLLECTION",e[e.DEPRECATED_TEXT=8]="DEPRECATED_TEXT",e))(tt||{}),Ui=(e=>(e[e.PORTAL=void 0]="PORTAL",e[e.EMBEDDED_QUEUE=2]="EMBEDDED_QUEUE",e[e.SCAFFOLD=3]="SCAFFOLD",e[e.SEARCH_PORTAL=4]="SEARCH_PORTAL",e))(Ui||{}),zi=(e=>(e[e.OFFSET=0]="OFFSET",e[e.UNIT=1]="UNIT",e[e.CHARACTER=2]="CHARACTER",e[e.WORD=3]="WORD",e[e.WORD_START=4]="WORD_START",e[e.WORD_END=5]="WORD_END",e[e.LINE=6]="LINE",e))(zi||{}),$i=(e=>(e.SRSScheduleCard="SRSScheduleCard",e.GetNextCard="GetNextCard",e))($i||{}),or=(e=>(e[e.Enum=void 0]="Enum",e.AnyRem="any",e.Relation="relation",e))(or||{}),qi=(e=>(e.Queue="Queue",e))(qi||{}),lr=(e=>(e.RIGHT="right",e.BELOW="label",e.ONLY_DOCUMENT="only_document",e.ONLY_IN_TABLE="only_table",e[e.INLINE=void 0]="INLINE",e))(lr||{}),he=(e=>(e.Text="Text",e.Reference="Reference",e.Portal="Portal",e.Tag="Tag",e.TagWithoutInheritance="TagWithoutInheritance",e.Connection="Connection",e.IsDescendantOf="IsDescendantOf",e.InDocument="InDocument",e.RemType="RemType",e.Date="Date",e.MultiSelect="MultiSelect",e.SingleSelect="Single Select",e.LegacySingleSelect="SingleSelect",e.Checkbox="Checkbox",e.Number="NumberExpression",e))(he||{}),te=(e=>(e.Or="or",e.And="and",e.Not="not",e.Expression="expression",e.GetSlot="get_slot",e))(te||{});const Gi=d.object({exp:d.literal("not"),exp1:d.lazy(()=>Dn)}),Xi=d.object({exp:d.union([d.literal("and"),d.literal("or")]),exps:d.lazy(()=>Dn.array()),cannotRemove:d.boolean().optional()}),Ki=d.object({exp:d.literal("get_slot"),slotRemId:d.string(),exps:d.lazy(()=>Dn)}),Qi=d.object({exp:d.literal("expression"),refType:d.enum(["Reference","Portal","Tag","TagWithoutInheritance","IsDescendantOf","InDocument","Connection"]),remId:d.string(),cannotRemove:d.boolean().optional(),cannotAdd:d.boolean().optional()}),Yi=d.enum(["concept","descriptor","none"]),Ji=d.object({exp:d.literal("expression"),refType:d.literal("RemType"),remType:Yi});var ur=(e=>(e.Checked="checked",e.Unchecked="unchecked",e))(ur||{}),cr=(e=>(e.Contains="contains",e.DoesNotContain="doesNotContain",e.Is="is",e.IsNot="notIs",e.StartsWith="startsWith",e.EndsWith="endsWith",e.IsEmpty="notEmpty",e.IsNotEmpty="empty",e.DefaultContains="",e))(cr||{});const Al=["contains","is","startsWith","endsWith",""];var dr=(e=>(e.Is="is",e.IsNot="notIs",e.GreaterThan="greaterThan",e.LessThan="lessThan",e.GreaterThanOrEquals="greaterThanOrEquals",e.LessThanOrEquals="lessThanOrEquals",e.IsEmpty="notEmpty",e.IsNotEmpty="empty",e))(dr||{}),on=(e=>(e.Is="is",e.IsBefore="before",e.IsAfter="after",e.IsOnOrBefore="onOrBefore",e.IsOnOrAfter="onOrAfter",e.IsBetween="between",e.IsRelativeToToday="relativeToToday",e.IsEmpty="empty",e.IsNotEmpty="notEmpty",e))(on||{}),Cn=(e=>(e.Today="today",e.StartOfTheWeek="startoftheweek",e.StartOfTheMonth="startofthemonth",e.StartOfTheYear="startoftheyear",e.EndOfTheWeek="endoftheweek",e.EndOfTheMonth="endofthemonth",e.EndOfTheYear="endoftheyear",e))(Cn||{});const Dl={today:"Today",startoftheweek:"Start of the week",startofthemonth:"Start of the month",startoftheyear:"Start of the year",endoftheweek:"End of the week",endofthemonth:"End of the month",endoftheyear:"End of the year"};var fr=(e=>(e.Contains="contains",e.DoesNotContain="doesNotContains",e.IsEmpty="empty",e.IsNotEmpty="notEmpty",e))(fr||{}),An=(e=>(e.Is="is",e.IsNot="notIs",e.IsEmpty="empty",e.IsNotEmpty="notEmpty",e))(An||{});const Nl=Object.values(on).filter(e=>e!=="relativeToToday");var hr=(e=>(e.Past="past",e.Next="next",e.This="this",e))(hr||{}),pr=(e=>(e.Day="day",e.Week="week",e.Month="month",e.Year="year",e))(pr||{});const kl={[""]:"contains",contains:"contains",is:"is",notIs:"is not",doesNotContain:"does not contain",startsWith:"starts with",endsWith:"ends with",notEmpty:"is empty",empty:"is not empty"},Il={is:"is",empty:"is empty",notEmpty:"is not empty",after:"is after",before:"is before",between:"is between",onOrAfter:"is on or after",onOrBefore:"is on or before",relativeToToday:"is relative to today"},Ml={is:"is",notIs:"is not",notEmpty:"is empty",empty:"is not empty",greaterThan:"is greater than",lessThan:"is less than",greaterThanOrEquals:"is greater than or equals",lessThanOrEquals:"is less than or equals"},Ll={contains:"contains",doesNotContains:"does not contains",empty:"is empty",notEmpty:"is not empty"},Fl={is:"is",notIs:"is not",empty:"is empty",notEmpty:"is not empty"},es=d.object({exp:d.literal("expression"),refType:d.literal("Text"),text:d.string(),matcherType:d.nativeEnum(cr)}),ts=d.object({exp:d.literal("expression"),refType:d.literal("NumberExpression"),text:d.string(),matcherType:d.nativeEnum(dr)}),mr=d.object({exp:d.literal("expression"),refType:d.literal("Date"),date:d.string().optional(),optionalDate:d.string().optional(),dateRelativeMatcher:d.nativeEnum(Cn).optional(),optionalDateRelativeMatcher:d.nativeEnum(Cn).optional(),relativeDateModifier:d.nativeEnum(hr).optional(),relativePeriodOffset:d.number().optional(),relativeDatePeriod:d.nativeEnum(pr).optional(),matcherType:d.nativeEnum(on)}),ns=d.object({exp:d.literal("expression"),refType:d.literal("MultiSelect"),matcherType:d.nativeEnum(fr),remIds:d.array(d.string()).optional()}),rs=d.object({exp:d.literal("expression"),refType:d.literal("SingleSelect"),matcherType:d.nativeEnum(An),remId:d.string().optional()}),is=d.object({exp:d.literal("expression"),refType:d.literal("Checkbox"),value:d.nativeEnum(ur)}),ss=d.object({exp:d.literal("expression"),refType:d.literal("Single Select"),matcherType:d.nativeEnum(An),remIds:d.array(d.string()).optional()}),as=d.lazy(()=>d.union([Qi,es,ts,Ji,mr,ns,ss,rs,is,mr])),Dn=d.lazy(()=>d.union([Gi,Xi,Ki,as])),gr=d.object({code:d.string(),name:d.string(),onlyProgrammaticModifying:d.boolean().optional(),hidden:d.boolean().optional(),enumValues:d.record(d.string()).optional(),defaultEnumValue:d.string().optional(),propertyType:d.nativeEnum(sr).optional(),propertyLocation:d.nativeEnum(lr).optional(),selectSourceType:d.nativeEnum(or).optional(),dontPublishToSharedArticle:d.boolean().optional()}),jl=d.union([d.object({slots:gr.array()}),d.object({properties:gr.array()})]);var os=(e=>(e[e.ForwardCard=1]="ForwardCard",e[e.BackwardCard=2]="BackwardCard",e[e.EditInQueue=3]="EditInQueue",e[e.QueueNoticeCard=4]="QueueNoticeCard",e[e.ClozeCard=5]="ClozeCard",e[e.DocumentCard=6]="DocumentCard",e[e.SelectCluster=7]="SelectCluster",e[e.SubFolderSelector=8]="SubFolderSelector",e[e.DailyTargetGoalSelector=10]="DailyTargetGoalSelector",e[e.StreakGoalSelector=11]="StreakGoalSelector",e[e.AddExtraNewCards=12]="AddExtraNewCards",e[e.AddExtraStaleCards=13]="AddExtraStaleCards",e[e.SignUpToSaveProgress=14]="SignUpToSaveProgress",e[e.Plugin=15]="Plugin",e[e.DailyCheckpoint=16]="DailyCheckpoint",e[e.Checkpoint=17]="Checkpoint",e[e.Leech=18]="Leech",e[e.StartExamPractice=19]="StartExamPractice",e[e.EndExamPractice=20]="EndExamPractice",e))(os||{});const Vl={[1]:"Forward Card",[2]:"Backward Card",[3]:"Edit in Queue",[4]:"Queue Notice Card",[5]:"Cloze Card",[6]:"Document Card",[7]:"Select Cluster",[8]:"Subfolder Selector",[10]:"Daily Target Goal Selector",[11]:"Streak Goal Selector",[12]:"Add Extra New Cards",[13]:"Add Extra Stale Cards",[14]:"Sign Up to Save Progress",[15]:"Plugin",[16]:"Daily Checkpoint",[17]:"Checkpoint",[18]:"Leech",[19]:"Start Exam Practice",[20]:"End Exam Practice"};var Bl=ee(700),ls=ee.n(Bl),Wl=Object.defineProperty,Zl=a((e,t,n)=>t in e?Wl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"date_defNormalProp"),us=a((e,t,n)=>(Zl(e,typeof t!="symbol"?t+"":t,n),n),"date_publicField"),cs=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"date_async");const Hl="date";class vr extends ae{constructor(t){super(t,Hl),us(this,"getDailyDoc",n=>cs(this,null,function*(){const r=yield this.call("getDailyDoc",{date:n});if(r)return new fe(r,this._call)})),us(this,"getTodaysDoc",()=>cs(this,null,function*(){const n=yield this.call("getTodaysDoc",{});if(n)return new fe(n,this._call)}))}}a(vr,"DateNamespace");var Ul=Object.defineProperty,ds=Object.getOwnPropertySymbols,zl=Object.prototype.hasOwnProperty,$l=Object.prototype.propertyIsEnumerable,yr=a((e,t,n)=>t in e?Ul(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"editor_defNormalProp"),ql=a((e,t)=>{for(var n in t||(t={}))zl.call(t,n)&&yr(e,n,t[n]);if(ds)for(var n of ds(t))$l.call(t,n)&&yr(e,n,t[n]);return e},"editor_spreadValues"),oe=a((e,t,n)=>(yr(e,typeof t!="symbol"?t+"":t,n),n),"editor_publicField"),le=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"editor_async");const Gl="editor";class _r extends ae{constructor(t){super(t,Gl),oe(this,"setText",n=>le(this,null,function*(){return this.call("setText",{richText:n})})),oe(this,"copy",()=>le(this,null,function*(){return this.call("copy",{})})),oe(this,"cut",()=>le(this,null,function*(){return this.call("cut",{})})),oe(this,"deleteCharacters",(n,r)=>le(this,null,function*(){return this.call("deleteCharacters",{characters:n,direction:r})})),oe(this,"delete",()=>le(this,null,function*(){return this.call("delete",{})})),oe(this,"getSelectedRem",()=>le(this,null,function*(){const n=yield this.getSelection();return n&&n.type===Tn.Rem?n:void 0})),oe(this,"getSelectedText",()=>le(this,null,function*(){const n=yield this.getSelection();return n&&n.type===Tn.Text?n:void 0})),oe(this,"getSelection",()=>le(this,null,function*(){return this.call("getSelection",{})})),oe(this,"selectRem",(n,r)=>le(this,null,function*(){return this.call("setSelectedLines",{range:n,portalId:r})})),oe(this,"selectText",n=>le(this,null,function*(){return this.call("setSelectedRichText",ql({},n))})),oe(this,"collapseSelection",n=>le(this,null,function*(){return this.call("collapseSelection",{to:n})})),oe(this,"undo",()=>le(this,null,function*(){return this.call("undo",{})})),oe(this,"redo",()=>le(this,null,function*(){return this.call("redo",{})})),oe(this,"moveCaret",(n,r)=>le(this,null,function*(){return this.call("moveCaret",{amount:n,unit:r})})),oe(this,"moveCaretVertical",n=>le(this,null,function*(){return this.call("moveCaretVertical",{direction:n})})),oe(this,"getCaretPosition",()=>le(this,null,function*(){return this.call("getCaretPosition",{})})),oe(this,"insertPlainText",n=>le(this,null,function*(){return this.call("insertPlainText",{string:n})})),oe(this,"insertRichText",n=>le(this,null,function*(){return this.call("insertRichText",{richText:n})})),oe(this,"insertMarkdown",n=>le(this,null,function*(){return this.call("insertMarkdown",{markdown:n})})),oe(this,"getFocusedEditorText",()=>le(this,null,function*(){return this.call("getFocusedEditorText",{})}))}}a(_r,"EditorNamespace");var Xl=Object.defineProperty,Kl=a((e,t,n)=>t in e?Xl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"focus_defNormalProp"),fs=a((e,t,n)=>(Kl(e,typeof t!="symbol"?t+"":t,n),n),"focus_publicField"),hs=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"focus_async");const Ql="focus";class wr extends ae{constructor(t){super(t,Ql),fs(this,"getFocusedRem",()=>hs(this,null,function*(){const n=yield this.call("getFocusedRem",{});return n?new fe(n,this._call):void 0})),fs(this,"getFocusedPortal",()=>hs(this,null,function*(){const n=yield this.call("getFocusedPortal",{});return n?new fe(n,this._call):void 0}))}}a(wr,"FocusNamespace");var Yl=Object.defineProperty,Jl=a((e,t,n)=>t in e?Yl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"messaging_defNormalProp"),eu=a((e,t,n)=>(Jl(e,typeof t!="symbol"?t+"":t,n),n),"messaging_publicField"),tu=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"messaging_async");const nu="messaging";class Er extends ae{constructor(t){super(t,nu),eu(this,"broadcast",n=>tu(this,null,function*(){return console.log("Send broadcast"),this.call("broadcast",{message:n})}))}}a(Er,"MessagingNamespace");var ru=Object.defineProperty,iu=a((e,t,n)=>t in e?ru(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"powerup_defNormalProp"),ps=a((e,t,n)=>(iu(e,typeof t!="symbol"?t+"":t,n),n),"powerup_publicField"),ms=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"powerup_async");const su="powerup";class xr extends ae{constructor(t){super(t,su),ps(this,"getPowerupByCode",n=>ms(this,null,function*(){const r=yield this.call("getPowerupByCode",{powerupCode:n});if(r)return new fe(r,this._call)})),ps(this,"getPowerupSlotByCode",(n,r)=>ms(this,null,function*(){const i=Object.values(wt).includes(n)?Wt[n][r]:r,s=yield this.call("getPowerupSlotByCode",{powerupCode:n,powerupSlot:i});if(s)return new fe(s,this._call)}))}}a(xr,"PowerupNamespace");var au=Object.defineProperty,gs=Object.getOwnPropertySymbols,ou=Object.prototype.hasOwnProperty,lu=Object.prototype.propertyIsEnumerable,uu=a((e,t,n)=>t in e?au(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"app_defNormalProp"),cu=a((e,t)=>{var n={};for(var r in e)ou.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gs)for(var r of gs(e))t.indexOf(r)<0&&lu.call(e,r)&&(n[r]=e[r]);return n},"__objRest"),ue=a((e,t,n)=>(uu(e,typeof t!="symbol"?t+"":t,n),n),"app_publicField"),ve=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"app_async");const du="app";class Sr extends ae{constructor(t,n){super(t,du),ue(this,"plugin"),ue(this,"waitForInitialSync",()=>ve(this,null,function*(){yield this._call("waitForInitialSync",{})})),ue(this,"registerPowerup",r=>ve(this,null,function*(){yield this._call("registerPowerup",r)})),ue(this,"registerWidget",(r,i,s)=>ve(this,null,function*(){yield this._call("registerWidget",{fileName:r,location:i,options:s})})),ue(this,"unregisterWidget",(r,i)=>ve(this,null,function*(){yield this._call("unregisterWidget",{fileName:r,location:i})})),ue(this,"registerCommand",r=>ve(this,null,function*(){const i=r,{action:s}=i,o=cu(i,["action"]),l=r.id;this.plugin.model[l]=s,yield this._call("registerCommand",o)})),ue(this,"registerSidebarButton",r=>ve(this,null,function*(){const{id:i,name:s,action:o}=r;this.plugin.model[i]=o,yield this._call("registerSidebarButton",{id:i,name:s})})),ue(this,"registerRemMenuItem",r=>ve(this,null,function*(){const{id:i,name:s,action:o}=r;this.plugin.model[i]=o,yield this._call("registerRemMenuItem",{id:i,name:s})})),ue(this,"registerMenuItem",r=>ve(this,null,function*(){const{id:i,name:s,action:o,location:l}=r;this.plugin.model[i]=o,yield this._call("registerMenuItem",{id:i,name:s,location:l})})),ue(this,"unregisterMenuItem",r=>ve(this,null,function*(){yield this._call("unregisterMenuItem",{id:r})})),ue(this,"stealKeys",r=>ve(this,null,function*(){yield this._call("stealKeys",{keys:r})})),ue(this,"releaseKeys",r=>ve(this,null,function*(){yield this._call("releaseKeys",{keys:r})})),ue(this,"registerCSS",(r,i)=>ve(this,null,function*(){yield this._call("registerCSS",{id:r,css:i})})),ue(this,"registerStatusBarItem",(r,i)=>ve(this,null,function*(){yield this._call("registerStatusBarItem",{id:r,html:i})})),ue(this,"getOperatingSystem",()=>ve(this,null,function*(){return yield this._call("getOperatingSystem",{})})),ue(this,"getPlatform",()=>ve(this,null,function*(){return yield this._call("getPlatform",{})})),ue(this,"registerCallback",(r,i)=>{this.plugin.model[r]=i}),ue(this,"transaction",r=>ve(this,null,function*(){const i=Math.random().toString();this.registerCallback(i,r);const s=yield this._call("transaction",{id:i});return delete this.plugin.model[i],s})),ue(this,"toast",r=>ve(this,null,function*(){yield this._call("toast",{message:r,options:{}})})),this.plugin=n}}a(Sr,"AppNamespace");var fu=Object.defineProperty,hu=Object.defineProperties,pu=Object.getOwnPropertyDescriptors,vs=Object.getOwnPropertySymbols,mu=Object.prototype.hasOwnProperty,gu=Object.prototype.propertyIsEnumerable,br=a((e,t,n)=>t in e?fu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"rich_text_defNormalProp"),vu=a((e,t)=>{for(var n in t||(t={}))mu.call(t,n)&&br(e,n,t[n]);if(vs)for(var n of vs(t))gu.call(t,n)&&br(e,n,t[n]);return e},"rich_text_spreadValues"),yu=a((e,t)=>hu(e,pu(t)),"__spreadProps"),F=a((e,t,n)=>(br(e,typeof t!="symbol"?t+"":t,n),n),"rich_text_publicField"),$=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"rich_text_async");const _u="richText";class nt{constructor(t){F(this,"richText",[]),F(this,"richTextNamespace"),F(this,"code",(n,r)=>(this.richText.push({i:"m",code:!0,language:r,text:n}),this)),F(this,"image",(n,r,i)=>(this.richText.push({i:"i",url:n,width:r,height:i}),this)),F(this,"rem",n=>{const i={i:"q",_id:de(n)};return this.richText.push(i),this}),F(this,"text",(n,r=[])=>{if(r.length===0)return this.richText.push(n),this;const i=Object.fromEntries(r.map(s=>On[s]?["h",On[s]]:[Mi[s],!0])||[]);return this.richText.push(yu(vu({i:"m"},i),{text:n})),this}),F(this,"audio",n=>(this.richText.push({i:"a",url:n,onlyAudio:!0}),this)),F(this,"latex",(n,r=!1)=>(this.richText.push({i:"x",text:n,block:r}),this)),F(this,"video",n=>(this.richText.push({i:"a",url:n,onlyAudio:!1}),this)),F(this,"newline",()=>(this.richText.push(`
`),this)),F(this,"value",()=>this.richTextNamespace.normalize(this.richText)),this.richTextNamespace=t}}a(nt,"RichTextBuilder");class Rr extends ae{constructor(t){super(t,_u),F(this,"indexOfElementAt",(n,r)=>$(this,null,function*(){return this.call("indexOfElementAt",{richText:n,position:r})})),F(this,"normalize",n=>$(this,null,function*(){return this.call("normalize",{richText:n})})),F(this,"removeTextFormatFromRange",(n,r,i,s)=>$(this,null,function*(){return this.call("removeTextFormatFromRange",{text:n,start:r,end:i,format:s})})),F(this,"applyTextFormatToRange",(n,r,i,s)=>$(this,null,function*(){return this.call("applyTextFormatToRange",{text:n,start:r,end:i,format:s})})),F(this,"toggleTextFormatOnRange",(n,r,i,s)=>$(this,null,function*(){return this.call("toggleTextFormatOnRange",{text:n,start:r,end:i,format:s})})),F(this,"replaceAllRichText",(n,r,i)=>$(this,null,function*(){return this.call("replaceAllRichText",{richText:n,findText:r,replacementText:i})})),F(this,"splitRichText",(n,r)=>$(this,null,function*(){return this.call("splitRichText",{richText:n,splitText:r})})),F(this,"empty",(n,r)=>$(this,null,function*(){return this.call("empty",{richText:n,allowSpaces:r})})),F(this,"indexOf",(n,r,i)=>$(this,null,function*(){return this.call("indexOf",{richText:n,character:r,startChar:i})})),F(this,"toHTML",n=>$(this,null,function*(){return this.call("toHTML",{richText:n})})),F(this,"length",n=>$(this,null,function*(){return this.call("length",{richText:n})})),F(this,"trimEnd",n=>$(this,null,function*(){return this.call("trimEnd",{richText:n})})),F(this,"trimStart",n=>$(this,null,function*(){return this.call("trimStart",{richText:n})})),F(this,"trim",n=>$(this,null,function*(){return this.call("trim",{richText:n})})),F(this,"split",(n,r)=>$(this,null,function*(){return this.call("split",{richText:n,separationCharacter:r})})),F(this,"deepGetRemAndAliasIdsFromRichText",n=>$(this,null,function*(){return this.call("deepGetRemAndAliasIdsFromRichText",{richText:n})})),F(this,"deepGetRemIdsFromRichText",n=>$(this,null,function*(){return this.call("deepGetRemIdsFromRichText",{richText:n})})),F(this,"findAllExternalURLs",n=>$(this,null,function*(){return this.call("findAllExternalURLs",{richText:n})})),F(this,"getRemAndAliasIdsFromRichText",n=>$(this,null,function*(){return this.call("getRemAndAliasIdsFromRichText",{richText:n})})),F(this,"getRemIdsFromRichText",n=>$(this,null,function*(){return this.call("getRemIdsFromRichText",{richText:n})})),F(this,"equals",(n,r)=>$(this,null,function*(){return this.call("equals",{richText1:n,richText2:r})})),F(this,"substring",(n,r,i)=>$(this,null,function*(){return this.call("substring",{richText:n,start:r,end:i})})),F(this,"charAt",(n,r)=>$(this,null,function*(){return this.call("charAt",{richText:n,index:r})})),F(this,"toString",n=>$(this,null,function*(){return this.call("toString",{richText:n})})),F(this,"toMarkdown",n=>$(this,null,function*(){return this.call("toMarkdown",{richText:n})})),F(this,"parseFromMarkdown",n=>$(this,null,function*(){return this.call("parseFromMarkdown",{markdown:n})})),F(this,"parseAndInsertHtml",(n,r)=>$(this,null,function*(){const i=de(r);return this.call("parseAndInsertHtml",{html:n,remId:i})}))}get code(){return new nt(this).code}get image(){return new nt(this).image}get rem(){return new nt(this).rem}get text(){return new nt(this).text}get audio(){return new nt(this).audio}get latex(){return new nt(this).latex}get video(){return new nt(this).video}get newline(){return new nt(this).newline}}a(Rr,"RichTextNamespace");var wu=Object.defineProperty,Eu=a((e,t,n)=>t in e?wu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"search_defNormalProp"),xu=a((e,t,n)=>(Eu(e,typeof t!="symbol"?t+"":t,n),n),"search_publicField"),Su=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"search_async");const bu="search";class Pr extends ae{constructor(t){super(t,bu),xu(this,"search",(n,r,i)=>Su(this,null,function*(){const s=de(r);return((yield this.call("search",{queryText:n,searchContextRemId:s,options:i}))||[]).map(l=>new fe(l,this._call))}))}}a(Pr,"SearchNamespace");var Ru=Object.defineProperty,ys=Object.getOwnPropertySymbols,Pu=Object.prototype.hasOwnProperty,Tu=Object.prototype.propertyIsEnumerable,Tr=a((e,t,n)=>t in e?Ru(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"settings_defNormalProp"),Nn=a((e,t)=>{for(var n in t||(t={}))Pu.call(t,n)&&Tr(e,n,t[n]);if(ys)for(var n of ys(t))Tu.call(t,n)&&Tr(e,n,t[n]);return e},"settings_spreadValues"),ln=a((e,t,n)=>(Tr(e,typeof t!="symbol"?t+"":t,n),n),"settings_publicField"),un=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"settings_async");const Ou="settings";class Or extends ae{constructor(t){super(t,Ou),ln(this,"registerDropdownSetting",n=>un(this,null,function*(){return this.call("registerDropdownSetting",Nn({},n))})),ln(this,"registerBooleanSetting",n=>un(this,null,function*(){return this.call("registerBooleanSetting",Nn({},n))})),ln(this,"registerStringSetting",n=>un(this,null,function*(){return this.call("registerStringSetting",Nn({},n))})),ln(this,"registerNumberSetting",n=>un(this,null,function*(){return this.call("registerNumberSetting",Nn({},n))})),ln(this,"getSetting",n=>un(this,null,function*(){return yield this.call("getSetting",{settingId:n})}))}}a(Or,"SettingsNamespace");var Cu=Object.defineProperty,Au=a((e,t,n)=>t in e?Cu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"storage_defNormalProp"),Zt=a((e,t,n)=>(Au(e,typeof t!="symbol"?t+"":t,n),n),"storage_publicField"),Ht=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"storage_async");const Du="storage";class Cr extends ae{constructor(t){super(t,Du),Zt(this,"setSession",(n,r)=>Ht(this,null,function*(){return this.call("setSession",{key:n,value:r})})),Zt(this,"getSession",n=>Ht(this,null,function*(){if(!!n)return this.call("getSession",{key:n})})),Zt(this,"setSynced",(n,r)=>Ht(this,null,function*(){return this.call("setSynced",{key:n,value:r})})),Zt(this,"getSynced",n=>Ht(this,null,function*(){if(!!n)return this.call("getSynced",{key:n})})),Zt(this,"setLocal",(n,r)=>Ht(this,null,function*(){return this.call("setLocal",{key:n,value:r})})),Zt(this,"getLocal",n=>Ht(this,null,function*(){if(!!n)return this.call("getLocal",{key:n})}))}}a(Cr,"StorageNamespace");var Nu=Object.defineProperty,ku=a((e,t,n)=>t in e?Nu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"widget_defNormalProp"),cn=a((e,t,n)=>(ku(e,typeof t!="symbol"?t+"":t,n),n),"widget_publicField"),dn=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"widget_async");const Iu="widget";class Ar extends ae{constructor(t){super(t,Iu),cn(this,"getWidgetsAtLocation",(n,r)=>dn(this,null,function*(){return this.call("getWidgetsAtLocation",{location:n,remId:r})})),cn(this,"getDimensions",n=>dn(this,null,function*(){return this.call("getDimensions",{widgetInstanceId:n})})),cn(this,"openPopup",(n,r,i)=>dn(this,null,function*(){return this.call("openPopup",{widgetFileName:n,contextData:r,clickOutsideToClose:i})})),cn(this,"closePopup",(n=!0)=>dn(this,null,function*(){return this.call("closePopup",{restoreFocus:n})})),cn(this,"getWidgetContext",()=>dn(this,null,function*(){return this.call("getWidgetContext",{})}))}}a(Ar,"WidgetNamespace");var Mu=Object.defineProperty,Lu=a((e,t,n)=>t in e?Mu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"window_defNormalProp"),ne=a((e,t,n)=>(Lu(e,typeof t!="symbol"?t+"":t,n),n),"window_publicField"),re=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"window_async");const Fu="window";class Dr extends ae{constructor(t){super(t,Fu),ne(this,"stealKeys",(n,r)=>re(this,null,function*(){yield this.call("stealKeys",{keys:r,id:n})})),ne(this,"releaseKeys",(n,r)=>re(this,null,function*(){yield this.call("releaseKeys",{keys:r,id:n})})),ne(this,"openFloatingWidget",(n,r,i,s)=>re(this,null,function*(){return yield this.call("openFloatingWidget",{fileName:n,position:r,classContainer:i,closeWhenClickOutside:s})})),ne(this,"closeFloatingWidget",n=>re(this,null,function*(){return yield this.call("closeFloatingWidget",{floatingWidgetId:n})})),ne(this,"isFloatingWidgetOpen",n=>re(this,null,function*(){return yield this.call("isFloatingWidgetOpen",{floatingWidgetId:n})})),ne(this,"setFloatingWidgetPosition",(n,r)=>re(this,null,function*(){return yield this.call("setFloatingWidgetPosition",{floatingWidgetId:n,position:r})})),ne(this,"closeAllFloatingWidgets",()=>re(this,null,function*(){return yield this.call("closeAllFloatingWidgets",{})})),ne(this,"getCurrentWindowTree",()=>re(this,null,function*(){return yield this.call("getCurrentWindowTree",{})})),ne(this,"setRemWindowTree",n=>re(this,null,function*(){return yield this.call("setRemWindowTree",{tree:n})})),ne(this,"getLastFocusedPane",()=>re(this,null,function*(){return yield this.call("getLastFocusedPane",{})})),ne(this,"setCurrentWindowTreeFromString",n=>re(this,null,function*(){return yield this.call("setCurrentWindowTreeFromString",{treeString:n})})),ne(this,"getOpenPaneIds",()=>re(this,null,function*(){return yield this.call("getOpenPaneIds",{})})),ne(this,"getFocusedPaneId",()=>re(this,null,function*(){return yield this.call("getFocusedPaneId",{})})),ne(this,"setFocusedPaneId",n=>re(this,null,function*(){return yield this.call("setFocusedPaneId",{paneId:n})})),ne(this,"getURL",()=>re(this,null,function*(){return yield this.call("getURL",{})})),ne(this,"setURL",n=>re(this,null,function*(){return yield this.call("setURL",{url:n})})),ne(this,"openRem",n=>re(this,null,function*(){return yield this.call("openRem",{remId:n._id})})),ne(this,"getOpenPaneRemIds",()=>re(this,null,function*(){return yield this.call("getOpenPaneRemIds",{})})),ne(this,"getOpenPaneRemId",n=>re(this,null,function*(){if(n)return yield this.call("getOpenPaneRemId",{paneId:n})})),ne(this,"openWidgetInPane",(n,r)=>re(this,null,function*(){return yield this.call("openWidgetInPane",{fileName:n,contextData:r})})),ne(this,"openWidgetInRightSidebar",(n,r)=>re(this,null,function*(){return yield this.call("openWidgetInRightSidebar",{fileName:n,contextData:r})})),ne(this,"isOnPage",n=>re(this,null,function*(){return yield this.call("isOnPage",{page:n})}))}}a(Dr,"WindowNamespace");var ju=Object.defineProperty,Vu=a((e,t,n)=>t in e?ju(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"event_defNormalProp"),Nr=a((e,t,n)=>(Vu(e,typeof t!="symbol"?t+"":t,n),n),"event_publicField");const Bu="event";class kr extends ae{constructor(t,n){super(t,Bu),Nr(this,"plugin"),Nr(this,"addListener",(r,i,s)=>{r in this.plugin.listeners||(this.plugin.listeners[r]=new Map),this.plugin.listeners[r].get(i)||this.plugin.listeners[r].set(i,[]),!this.plugin.listeners[r].get(i).includes(s)&&(this.plugin.listeners[r].get(i).push(s),this._call("events.addListener",{eventId:r,listenerKey:i}))}),Nr(this,"removeListener",(r,i,s)=>{const o=this.plugin.listeners[r];if(!o)return;const l=o.get(i);if(!!l){if(s){const u=l.indexOf(s);if(u==-1)return;l.splice(u,1)}else l.splice(0,l.length);l.length===0&&(o.delete(i),this._call("events.removeListener",{eventId:r,listenerKey:i}))}}),this.plugin=n}}a(kr,"EventNamespace");var Wu=Object.defineProperty,Zu=a((e,t,n)=>t in e?Wu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"knowledge_base_defNormalProp"),kn=a((e,t,n)=>(Zu(e,typeof t!="symbol"?t+"":t,n),n),"knowledge_base_publicField"),_s=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"knowledge_base_async");const Hu="kb";class Ir{constructor(t){kn(this,"_call"),kn(this,"call"),kn(this,"getCurrentKnowledgeBaseData",()=>_s(this,null,function*(){return this.call("getCurrentKnowledgeBaseData",{})})),kn(this,"isPrimaryKnowledgeBase",()=>_s(this,null,function*(){return this.call("isPrimaryKnowledgeBase",{})})),this._call=t,this.call=ar(this._call,Hu)}}a(Ir,"KnowledgeBaseNamespace");const Uu="scheduler";class Mr extends ae{constructor(t){super(t,Uu)}registerCustomScheduler(t,n){return this.call("registerCustomScheduler",{name:t,parameters:n})}}a(Mr,"SchedulerNamespace");var zu=Object.defineProperty,$u=a((e,t,n)=>t in e?zu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"queue_defNormalProp"),fn=a((e,t,n)=>($u(e,typeof t!="symbol"?t+"":t,n),n),"queue_publicField"),hn=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"queue_async");const qu="queue";class Lr extends ae{constructor(t){super(t,qu),fn(this,"getCurrentCard",()=>hn(this,null,function*(){const n=yield this.call("getCurrentCard",{});return n?new _t(n,this._call):void 0})),fn(this,"getNumRemainingCards",()=>hn(this,null,function*(){return yield this.call("getNumRemainingCards",{})})),fn(this,"getCurrentStreak",()=>hn(this,null,function*(){return yield this.call("getCurrentStreak",{})})),fn(this,"removeCurrentCardFromQueue",(n=!0)=>hn(this,null,function*(){yield this.call("removeCurrentCardFromQueue",{addToBackStack:n})})),fn(this,"inLookbackMode",()=>hn(this,null,function*(){return yield this.call("inLookbackMode",{})}))}}a(Lr,"QueueNamespace");class ws{static and(t){return{exp:te.And,exps:t}}static or(t){return{exp:te.Or,exps:t}}static not(t){return{exp:te.Not,exp1:t}}static tableColumn(t,n){return{exp:te.GetSlot,slotRemId:t,exps:n}}static hasReferenceTo(t){return{exp:te.Expression,refType:he.Reference,remId:t}}static text(t,n){return{exp:te.Expression,refType:he.Text,text:n||"",matcherType:t}}static documentsThatContain(t){return{exp:te.Expression,refType:he.Portal,remId:t}}static isTaggedWith(t){return{exp:te.Expression,refType:he.Tag,remId:t}}static isDirectlyTaggedWith(t){return{exp:te.Expression,refType:he.TagWithoutInheritance,remId:t}}static isDescendantOf(t){return{exp:te.Expression,refType:he.IsDescendantOf,remId:t}}static isInDocument(t){return{exp:te.Expression,refType:he.InDocument,remId:t}}static hasAnyConnectionTo(t){return{exp:te.Expression,refType:he.Connection,remId:t}}static hasRemType(t){return{exp:te.Expression,refType:he.RemType,remType:t}}static tagWithoutInheritance(t){return{exp:te.Expression,refType:he.TagWithoutInheritance,remId:t}}static multiSelect(t,n){return{exp:te.Expression,refType:he.MultiSelect,matcherType:t,remIds:n}}static singleSelect(t,n){return{exp:te.Expression,refType:he.SingleSelect,matcherType:t,remIds:n}}static checkbox(t){return{exp:te.Expression,refType:he.Checkbox,value:t}}static date(t,n,r){return{exp:te.Expression,refType:he.Date,matcherType:t,date:typeof n=="string"||n==null?void 0:n.toISOString(),dateRelativeMatcher:typeof n=="string"?n:void 0,optionalDate:typeof r=="string"||r==null?void 0:r.toISOString(),optionalDateRelativeMatcher:typeof r=="string"?r:void 0}}static dateRelativeToToday(t,n,r){return{exp:te.Expression,refType:he.Date,matcherType:on.IsRelativeToToday,relativeDateModifier:t,relativePeriodOffset:r,relativeDatePeriod:n}}static number(t,n){return{exp:te.Expression,refType:he.Number,text:(n==null?void 0:n.toString())||"",matcherType:t}}}a(ws,"Query");var Gu=Object.defineProperty,Xu=a((e,t,n)=>t in e?Gu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"reader_defNormalProp"),Ku=a((e,t,n)=>(Xu(e,typeof t!="symbol"?t+"":t,n),n),"reader_publicField"),Es=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"reader_async");class Fr extends ae{constructor(t){super(t,"reader"),Ku(this,"callAndReturnRem",(n,r)=>Es(this,null,function*(){const i=yield this.call(n,r||{});if(i)return new fe(i,this._call)}))}addHighlight(){return Es(this,null,function*(){return this.callAndReturnRem("addHighlight")})}}a(Fr,"ReaderNamespace");var Qu=Object.defineProperty,xs=Object.getOwnPropertySymbols,Yu=Object.prototype.hasOwnProperty,Ju=Object.prototype.propertyIsEnumerable,jr=a((e,t,n)=>t in e?Qu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"plugin_base_defNormalProp"),ec=a((e,t)=>{for(var n in t||(t={}))Yu.call(t,n)&&jr(e,n,t[n]);if(xs)for(var n of xs(t))Ju.call(t,n)&&jr(e,n,t[n]);return e},"plugin_base_spreadValues"),W=a((e,t,n)=>(jr(e,typeof t!="symbol"?t+"":t,n),n),"plugin_base_publicField"),Fe=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"plugin_base_async");class Vr{constructor(){W(this,"apiCallPromise",{}),W(this,"model",{}),W(this,"listeners",{}),W(this,"usedMessageIds",1),W(this,"widgetInstanceId"),W(this,"inSandbox"),W(this,"isNative"),W(this,"rootURL"),W(this,"mountDiv"),W(this,"widgetBodyResizeObserver",null),W(this,"widgetOptions"),W(this,"manifest"),W(this,"id"),W(this,"app",new Sr(this._call.bind(this),this)),W(this,"editor",new _r(this._call.bind(this))),W(this,"event",new kr(this._call.bind(this),this)),W(this,"messaging",new Er(this._call.bind(this))),W(this,"focus",new wr(this._call.bind(this))),W(this,"date",new vr(this._call.bind(this))),W(this,"widget",new Ar(this._call.bind(this))),W(this,"window",new Dr(this._call.bind(this))),W(this,"powerup",new xr(this._call.bind(this))),W(this,"richText",new Rr(this._call.bind(this))),W(this,"rem",new Jn(this._call.bind(this))),W(this,"card",new rr(this._call.bind(this))),W(this,"storage",new Cr(this._call.bind(this))),W(this,"settings",new Or(this._call.bind(this))),W(this,"search",new Pr(this._call.bind(this))),W(this,"kb",new Ir(this._call.bind(this))),W(this,"scheduler",new Mr(this._call.bind(this))),W(this,"queue",new Lr(this._call.bind(this))),W(this,"reader",new Fr(this._call.bind(this))),window.onmessage=t=>{this._receive(t)},this.pluginLogger=ls()(`plugin:${this.id||"Plugin"}`),this.logApi=ls()(`plugin:API:${this.id||"Plugin"}`),this.logApi("START"),this.event.addListener(A.onActivate,void 0,this.receiveActivateMessage.bind(this)),this.event.addListener(A.onDeactivate,void 0,this.receiveDeactivateMessage.bind(this)),this.event.addListener(A.setDarkMode,void 0,this.setDarkMode.bind(this)),this.event.addListener(A.setCustomCSS,void 0,this.setCustomCSS.bind(this)),this._call("askToActivate",{})}pluginLogger(...t){}logApi(...t){}setDarkMode({darkMode:t}){this.inSandbox&&(document.body.classList.add(t?"dark":"light"),document.body.classList.remove(t?"light":"dark"))}setCustomCSS({cssBlocks:t,cssUrls:n}){const r=document.getElementsByTagName("head")[0];for(const i of[...r.children])i.classList.contains("custom-css")&&i.remove();for(const i of t){const s=document.createElement("style");s.classList.add("custom-css"),s.innerHTML=i,r.appendChild(s)}for(const i of n){const s=document.createElement("link");s.classList.add("custom-css"),s.rel="stylesheet",s.href=i,r.appendChild(s)}}track(t){let n=!1,r=!1,i=!1,s=[];const o=a(()=>{if(n){for(const{event:l,key:u}of s.flatMap(c=>c.reactiveDeps))this.event.removeListener(l,u,o);return}else r?i=!0:(r=!0,a(()=>Fe(this,null,function*(){s=yield _i(this,t,o,()=>{},s||[]),r=!1,i&&(i=!1,o())}),"effect")())},"run");return o(),()=>{n=!0}}loadManifest(){return Fe(this,null,function*(){if(!this.manifest)try{const t=yield fetch(this.rootURL+"manifest.json");if(t.ok){const n=yield t.json();this.manifest=n,this.id=n.id}}catch(t){console.log("Failed to load manifest.json",t)}})}receiveActivateMessage(t){return Fe(this,null,function*(){var n,r,i,s,o;if(!t.inSandbox&&!((n=window.activeWidgetIds)!=null&&n.has(t.widgetInstanceId))){console.error("Not activating widget",t.widgetInstanceId,"as it is already unmounted");return}if(!t.inSandbox&&!t.mountDiv)throw new Error("Native plugin didn't receive mountDiv");const l=t.inSandbox?this.createMountDiv():t.mountDiv;this.inSandbox=t.inSandbox,this.isNative=!t.inSandbox,this.widgetOptions=t.widgetOptions,this.widgetInstanceId=t.widgetInstanceId,this.rootURL=t.rootURL,this.mountDiv=l,yield this.loadManifest(),this.isNative&&(window.widgetIdToWidget[this.widgetInstanceId]=this),this.onActivate(l,t.rootURL);const u=(i=(r=t.widgetOptions)==null?void 0:r.dimensions)==null?void 0:i.height,c=(o=(s=t.widgetOptions)==null?void 0:s.dimensions)==null?void 0:o.width;if(c=="auto"&&t.inSandbox&&(l.style.display="inline-block"),(u==="auto"||c==="auto")&&this.autoAdjustWidgetContainerDimension(),t.inSandbox&&(u==="auto"&&(document.documentElement.style.overflowY="hidden"),c==="auto"&&(document.documentElement.style.overflowX="hidden")),t.inSandbox)for(const g of t.styleSheetHREFs){const E=document.createElement("link");E.href=g,E.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(E)}yield this._call("activateCompleted",{})})}receiveDeactivateMessage(t){return Fe(this,null,function*(){this.widgetBodyResizeObserver&&this.widgetBodyResizeObserver.disconnect(),this.onDeactivate()})}createMountDiv(){const t=document.createElement("div");return document.body.appendChild(t),t}log(...t){this.pluginLogger(t)}_call(t,n,r){return Fe(this,null,function*(){const i=this.usedMessageIds++;typeof r=="string"?t=r+"."+t:typeof r=="object"&&(t=[...r,t].join("."));const s={pluginId:this.id,widgetInstanceId:this.widgetInstanceId,methodName:t,args:n,messageId:i,isIntendedForRemNoteAPIMain:!0};this.logApi("Call",i);const o=this.isNative?window:window.parent,u=yield new Promise((c,g)=>{this.apiCallPromise[i]=c;try{o.postMessage(s,"*")}catch(E){console.error(`Failed to call plugin method with arguments: ${t} ${n}`)}});if(this.logApi("Got response",u),u!=null&&u.error)throw new Error("Plugin Error: "+u.error);return u==null?void 0:u.response})}_receive(t){return Fe(this,null,function*(){var n,r,i;if((n=t.data)!=null&&n.isIntendedForRemNoteAPIPlugin){const s=t.data;if("messageId"in s){const o=s.messageId;this.logApi("API _receive",o,s,this.apiCallPromise[o]),this.apiCallPromise[o](s),delete this.apiCallPromise[o]}else if("callbackId"in s){const o=this.model[s.callbackId];o||console.error(`Tried to execute callback ${s.callbackId}, but it was not registered`);const l=yield o==null?void 0:o(s.args);s.callbackReturnValueHandlerId&&this._call("handleCallbackResponse",{result:l,callbackReturnValueHandlerId:s.callbackReturnValueHandlerId},"callback")}else if("eventId"in s){if(!Ee(s.eventId))throw new Error("Invalid event "+s.eventId);(i=(r=this.listeners[s.eventId])==null?void 0:r.get(s.listenerKey))==null||i.forEach(o=>o(s.args))}}})}autoAdjustWidgetContainerDimension(){return Fe(this,null,function*(){const t=new ResizeObserver(r=>{for(let i of r)if(i.contentBoxSize){const s=window.getComputedStyle(i.target),o=parseFloat(s.getPropertyValue("margin-block-start"))||0,l=parseFloat(s.getPropertyValue("margin-block-end"))||0,u=parseFloat(s.getPropertyValue("margin-inline-start"))||0,c=parseFloat(s.getPropertyValue("margin-inline-end"))||0,g={height:i.contentBoxSize[0].blockSize+o+l,width:i.contentBoxSize[0].inlineSize+u+c};this._call("widgetEvents.updateWidgetContainerDimension",g)}}),n=this.inSandbox?this.mountDiv:this.mountDiv.firstChild;!n||(t.observe(n),this.widgetBodyResizeObserver=t)})}createFakeEmbedComponent(t){return Fe(this,null,function*(){return this._call("widgetEvents.createFakeEmbedComponent",t)})}unmountFakeEmbedComponent(t){return Fe(this,null,function*(){return this._call("widgetEvents.unmountFakeEmbedComponent",{id:t})})}updateFakeEmbedComponentRect(t,n){return Fe(this,null,function*(){return this._call("widgetEvents.updateFakeEmbedComponentRect",ec({id:t},n))})}updateFakeEmbedExternalProps(t,n){return Fe(this,null,function*(){return this._call("widgetEvents.updateFakeEmbedExternalProps",{id:t,externalProps:n})})}ping(){return Fe(this,null,function*(){return yield this._call("ping",{})})}}a(Vr,"RNPlugin");var X=ee(568);let tc=a(e=>crypto.getRandomValues(new Uint8Array(e)),"random"),nc=a((e,t,n)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*r*t/e.length);return(s=t)=>{let o="";for(;;){let l=n(i),u=i;for(;u--;)if(o+=e[l[u]&r]||"",o.length===s)return o}}},"customRandom"),ih=a((e,t=21)=>nc(e,t,tc),"customAlphabet"),rc=a((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),""),"nanoid");var w=ee(359),Ss=ee.n(w),bs="1.13.6",Rs=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},In=Array.prototype,Br=Object.prototype,Ps=typeof Symbol!="undefined"?Symbol.prototype:null,ic=In.push,pn=In.slice,mn=Br.toString,sc=Br.hasOwnProperty,Ts=typeof ArrayBuffer!="undefined",ac=typeof DataView!="undefined",oc=Array.isArray,Os=Object.keys,Cs=Object.create,As=Ts&&ArrayBuffer.isView,lc=isNaN,uc=isFinite,Ds=!{toString:null}.propertyIsEnumerable("toString"),Ns=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],cc=Math.pow(2,53)-1;function Re(e,t){return t=t==null?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var s=Array(t+1);for(i=0;i<t;i++)s[i]=arguments[i];return s[t]=r,e.apply(this,s)}}a(Re,"restArguments");function Et(e){var t=typeof e;return t==="function"||t==="object"&&!!e}a(Et,"isObject");function dc(e){return e===null}a(dc,"isNull");function ks(e){return e===void 0}a(ks,"isUndefined");function Is(e){return e===!0||e===!1||mn.call(e)==="[object Boolean]"}a(Is,"isBoolean");function fc(e){return!!(e&&e.nodeType===1)}a(fc,"isElement");function _e(e){var t="[object "+e+"]";return function(n){return mn.call(n)===t}}a(_e,"tagTester");var Wr=_e("String"),Ms=_e("Number"),hc=_e("Date"),pc=_e("RegExp"),mc=_e("Error"),Ls=_e("Symbol"),Fs=_e("ArrayBuffer"),js=_e("Function"),gc=Rs.document&&Rs.document.childNodes;typeof Int8Array!="object"&&typeof gc!="function"&&(js=a(function(e){return typeof e=="function"||!1},"isFunction"));var Se=js,Vs=_e("Object"),Bs=ac&&Vs(new DataView(new ArrayBuffer(8))),Zr=typeof Map!="undefined"&&Vs(new Map),vc=_e("DataView");function yc(e){return e!=null&&Se(e.getInt8)&&Fs(e.buffer)}a(yc,"ie10IsDataView");var Mn=Bs?yc:vc,xt=oc||_e("Array");function pt(e,t){return e!=null&&sc.call(e,t)}a(pt,"has");var Hr=_e("Arguments");(function(){Hr(arguments)||(Hr=a(function(e){return pt(e,"callee")},"isArguments"))})();var Ur=Hr;function _c(e){return!Ls(e)&&uc(e)&&!isNaN(parseFloat(e))}a(_c,"isFinite_isFinite");function Ws(e){return Ms(e)&&lc(e)}a(Ws,"isNaN_isNaN");function Zs(e){return function(){return e}}a(Zs,"constant");function Hs(e){return function(t){var n=e(t);return typeof n=="number"&&n>=0&&n<=cc}}a(Hs,"createSizePropertyCheck");function Us(e){return function(t){return t==null?void 0:t[e]}}a(Us,"shallowProperty");var Ln=Us("byteLength"),wc=Hs(Ln),Ec=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function xc(e){return As?As(e)&&!Mn(e):wc(e)&&Ec.test(mn.call(e))}a(xc,"isTypedArray");var zs=Ts?xc:Zs(!1),Pe=Us("length");function Sc(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return{contains:function(i){return t[i]===!0},push:function(i){return t[i]=!0,e.push(i)}}}a(Sc,"emulatedSet");function $s(e,t){t=Sc(t);var n=Ns.length,r=e.constructor,i=Se(r)&&r.prototype||Br,s="constructor";for(pt(e,s)&&!t.contains(s)&&t.push(s);n--;)s=Ns[n],s in e&&e[s]!==i[s]&&!t.contains(s)&&t.push(s)}a($s,"collectNonEnumProps");function pe(e){if(!Et(e))return[];if(Os)return Os(e);var t=[];for(var n in e)pt(e,n)&&t.push(n);return Ds&&$s(e,t),t}a(pe,"keys");function bc(e){if(e==null)return!0;var t=Pe(e);return typeof t=="number"&&(xt(e)||Wr(e)||Ur(e))?t===0:Pe(pe(e))===0}a(bc,"isEmpty");function qs(e,t){var n=pe(t),r=n.length;if(e==null)return!r;for(var i=Object(e),s=0;s<r;s++){var o=n[s];if(t[o]!==i[o]||!(o in i))return!1}return!0}a(qs,"isMatch");function U(e){if(e instanceof U)return e;if(!(this instanceof U))return new U(e);this._wrapped=e}a(U,"_"),U.VERSION=bs,U.prototype.value=function(){return this._wrapped},U.prototype.valueOf=U.prototype.toJSON=U.prototype.value,U.prototype.toString=function(){return String(this._wrapped)};function Gs(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Ln(e))}a(Gs,"toBufferView");var Xs="[object DataView]";function zr(e,t,n,r){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var i=typeof e;return i!=="function"&&i!=="object"&&typeof t!="object"?!1:Ks(e,t,n,r)}a(zr,"eq");function Ks(e,t,n,r){e instanceof U&&(e=e._wrapped),t instanceof U&&(t=t._wrapped);var i=mn.call(e);if(i!==mn.call(t))return!1;if(Bs&&i=="[object Object]"&&Mn(e)){if(!Mn(t))return!1;i=Xs}switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return Ps.valueOf.call(e)===Ps.valueOf.call(t);case"[object ArrayBuffer]":case Xs:return Ks(Gs(e),Gs(t),n,r)}var s=i==="[object Array]";if(!s&&zs(e)){var o=Ln(e);if(o!==Ln(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;s=!0}if(!s){if(typeof e!="object"||typeof t!="object")return!1;var l=e.constructor,u=t.constructor;if(l!==u&&!(Se(l)&&l instanceof l&&Se(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var c=n.length;c--;)if(n[c]===e)return r[c]===t;if(n.push(e),r.push(t),s){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!zr(e[c],t[c],n,r))return!1}else{var g=pe(e),E;if(c=g.length,pe(t).length!==c)return!1;for(;c--;)if(E=g[c],!(pt(t,E)&&zr(e[E],t[E],n,r)))return!1}return n.pop(),r.pop(),!0}a(Ks,"deepEq");function Rc(e,t){return zr(e,t)}a(Rc,"isEqual");function gn(e){if(!Et(e))return[];var t=[];for(var n in e)t.push(n);return Ds&&$s(e,t),t}a(gn,"allKeys");function $r(e){var t=Pe(e);return function(n){if(n==null)return!1;var r=gn(n);if(Pe(r))return!1;for(var i=0;i<t;i++)if(!Se(n[e[i]]))return!1;return e!==Js||!Se(n[qr])}}a($r,"ie11fingerprint");var qr="forEach",Qs="has",Gr=["clear","delete"],Ys=["get",Qs,"set"],Pc=Gr.concat(qr,Ys),Js=Gr.concat(Ys),Tc=["add"].concat(Gr,qr,Qs),Oc=Zr?$r(Pc):_e("Map"),Cc=Zr?$r(Js):_e("WeakMap"),Ac=Zr?$r(Tc):_e("Set"),Dc=_e("WeakSet");function Ut(e){for(var t=pe(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r}a(Ut,"values");function Nc(e){for(var t=pe(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r}a(Nc,"pairs");function ea(e){for(var t={},n=pe(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t}a(ea,"invert");function Xr(e){var t=[];for(var n in e)Se(e[n])&&t.push(n);return t.sort()}a(Xr,"functions");function Kr(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||n==null)return n;for(var i=1;i<r;i++)for(var s=arguments[i],o=e(s),l=o.length,u=0;u<l;u++){var c=o[u];(!t||n[c]===void 0)&&(n[c]=s[c])}return n}}a(Kr,"createAssigner");var ta=Kr(gn),Fn=Kr(pe),na=Kr(gn,!0);function kc(){return function(){}}a(kc,"ctor");function ra(e){if(!Et(e))return{};if(Cs)return Cs(e);var t=kc();t.prototype=e;var n=new t;return t.prototype=null,n}a(ra,"baseCreate");function Ic(e,t){var n=ra(e);return t&&Fn(n,t),n}a(Ic,"create");function Mc(e){return Et(e)?xt(e)?e.slice():ta({},e):e}a(Mc,"clone");function Lc(e,t){return t(e),e}a(Lc,"tap");function ia(e){return xt(e)?e:[e]}a(ia,"toPath"),U.toPath=ia;function vn(e){return U.toPath(e)}a(vn,"_toPath_toPath");function Qr(e,t){for(var n=t.length,r=0;r<n;r++){if(e==null)return;e=e[t[r]]}return n?e:void 0}a(Qr,"deepGet");function sa(e,t,n){var r=Qr(e,vn(t));return ks(r)?n:r}a(sa,"get");function Fc(e,t){t=vn(t);for(var n=t.length,r=0;r<n;r++){var i=t[r];if(!pt(e,i))return!1;e=e[i]}return!!n}a(Fc,"has_has");function Yr(e){return e}a(Yr,"identity");function yn(e){return e=Fn({},e),function(t){return qs(t,e)}}a(yn,"matcher");function Jr(e){return e=vn(e),function(t){return Qr(t,e)}}a(Jr,"property");function _n(e,t,n){if(t===void 0)return e;switch(n==null?3:n){case 1:return function(r){return e.call(t,r)};case 3:return function(r,i,s){return e.call(t,r,i,s)};case 4:return function(r,i,s,o){return e.call(t,r,i,s,o)}}return function(){return e.apply(t,arguments)}}a(_n,"optimizeCb");function aa(e,t,n){return e==null?Yr:Se(e)?_n(e,t,n):Et(e)&&!xt(e)?yn(e):Jr(e)}a(aa,"baseIteratee");function ei(e,t){return aa(e,t,1/0)}a(ei,"iteratee"),U.iteratee=ei;function Te(e,t,n){return U.iteratee!==ei?U.iteratee(e,t):aa(e,t,n)}a(Te,"cb");function jc(e,t,n){t=Te(t,n);for(var r=pe(e),i=r.length,s={},o=0;o<i;o++){var l=r[o];s[l]=t(e[l],l,e)}return s}a(jc,"mapObject");function oa(){}a(oa,"noop");function Vc(e){return e==null?oa:function(t){return sa(e,t)}}a(Vc,"propertyOf");function Bc(e,t,n){var r=Array(Math.max(0,e));t=_n(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r}a(Bc,"times");function ti(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}a(ti,"random_random");var wn=Date.now||function(){return new Date().getTime()};function la(e){var t=a(function(s){return e[s]},"escaper"),n="(?:"+pe(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(s){return s=s==null?"":""+s,r.test(s)?s.replace(i,t):s}}a(la,"createEscaper");var ua={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Wc=la(ua),Zc=ea(ua),Hc=la(Zc),Uc=U.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},ni=/(.)^/,zc={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},$c=/\\|'|\r|\n|\u2028|\u2029/g;function qc(e){return"\\"+zc[e]}a(qc,"escapeChar");var Gc=/^\s*(\w|\$)+\s*$/;function Xc(e,t,n){!t&&n&&(t=n),t=na({},t,U.templateSettings);var r=RegExp([(t.escape||ni).source,(t.interpolate||ni).source,(t.evaluate||ni).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(c,g,E,Oe,I){return s+=e.slice(i,I).replace($c,qc),i=I+c.length,g?s+=`'+
((__t=(`+g+`))==null?'':_.escape(__t))+
'`:E?s+=`'+
((__t=(`+E+`))==null?'':__t)+
'`:Oe&&(s+=`';
`+Oe+`
__p+='`),c}),s+=`';
`;var o=t.variable;if(o){if(!Gc.test(o))throw new Error("variable is not a bare identifier: "+o)}else s=`with(obj||{}){
`+s+`}
`,o="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var l;try{l=new Function(o,"_",s)}catch(c){throw c.source=s,c}var u=a(function(c){return l.call(this,c,U)},"template");return u.source="function("+o+`){
`+s+"}",u}a(Xc,"template");function Kc(e,t,n){t=vn(t);var r=t.length;if(!r)return Se(n)?n.call(e):n;for(var i=0;i<r;i++){var s=e==null?void 0:e[t[i]];s===void 0&&(s=n,i=r),e=Se(s)?s.call(e):s}return e}a(Kc,"result");var Qc=0;function Yc(e){var t=++Qc+"";return e?e+t:t}a(Yc,"uniqueId");function Jc(e){var t=U(e);return t._chain=!0,t}a(Jc,"chain");function ca(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var s=ra(e.prototype),o=e.apply(s,i);return Et(o)?o:s}a(ca,"executeBound");var ri=Re(function(e,t){var n=ri.placeholder,r=a(function(){for(var i=0,s=t.length,o=Array(s),l=0;l<s;l++)o[l]=t[l]===n?arguments[i++]:t[l];for(;i<arguments.length;)o.push(arguments[i++]);return ca(e,r,this,this,o)},"bound");return r});ri.placeholder=U;var jn=ri,da=Re(function(e,t,n){if(!Se(e))throw new TypeError("Bind must be called on a function");var r=Re(function(i){return ca(e,r,t,this,n.concat(i))});return r}),Ne=Hs(Pe);function St(e,t,n,r){if(r=r||[],!t&&t!==0)t=1/0;else if(t<=0)return r.concat(e);for(var i=r.length,s=0,o=Pe(e);s<o;s++){var l=e[s];if(Ne(l)&&(xt(l)||Ur(l)))if(t>1)St(l,t-1,n,r),i=r.length;else for(var u=0,c=l.length;u<c;)r[i++]=l[u++];else n||(r[i++]=l)}return r}a(St,"flatten");var ed=Re(function(e,t){t=St(t,!1,!1);var n=t.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=da(e[r],e)}return e});function td(e,t){var n=a(function(r){var i=n.cache,s=""+(t?t.apply(this,arguments):r);return pt(i,s)||(i[s]=e.apply(this,arguments)),i[s]},"memoize");return n.cache={},n}a(td,"memoize");var fa=Re(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),nd=jn(fa,U,1);function rd(e,t,n){var r,i,s,o,l=0;n||(n={});var u=a(function(){l=n.leading===!1?0:wn(),r=null,o=e.apply(i,s),r||(i=s=null)},"later"),c=a(function(){var g=wn();!l&&n.leading===!1&&(l=g);var E=t-(g-l);return i=this,s=arguments,E<=0||E>t?(r&&(clearTimeout(r),r=null),l=g,o=e.apply(i,s),r||(i=s=null)):!r&&n.trailing!==!1&&(r=setTimeout(u,E)),o},"throttled");return c.cancel=function(){clearTimeout(r),l=0,r=i=s=null},c}a(rd,"throttle");function id(e,t,n){var r,i,s,o,l,u=a(function(){var g=wn()-i;t>g?r=setTimeout(u,t-g):(r=null,n||(o=e.apply(l,s)),r||(s=l=null))},"later"),c=Re(function(g){return l=this,s=g,i=wn(),r||(r=setTimeout(u,t),n&&(o=e.apply(l,s))),o});return c.cancel=function(){clearTimeout(r),r=s=l=null},c}a(id,"debounce");function sd(e,t){return jn(t,e)}a(sd,"wrap");function ii(e){return function(){return!e.apply(this,arguments)}}a(ii,"negate");function ad(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}a(ad,"compose");function od(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}a(od,"after");function ha(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}a(ha,"before");var ld=jn(ha,2);function pa(e,t,n){t=Te(t,n);for(var r=pe(e),i,s=0,o=r.length;s<o;s++)if(i=r[s],t(e[i],i,e))return i}a(pa,"findKey");function ma(e){return function(t,n,r){n=Te(n,r);for(var i=Pe(t),s=e>0?0:i-1;s>=0&&s<i;s+=e)if(n(t[s],s,t))return s;return-1}}a(ma,"createPredicateIndexFinder");var si=ma(1),ga=ma(-1);function va(e,t,n,r){n=Te(n,r,1);for(var i=n(t),s=0,o=Pe(e);s<o;){var l=Math.floor((s+o)/2);n(e[l])<i?s=l+1:o=l}return s}a(va,"sortedIndex");function ya(e,t,n){return function(r,i,s){var o=0,l=Pe(r);if(typeof s=="number")e>0?o=s>=0?s:Math.max(s+l,o):l=s>=0?Math.min(s+1,l):s+l+1;else if(n&&s&&l)return s=n(r,i),r[s]===i?s:-1;if(i!==i)return s=t(pn.call(r,o,l),Ws),s>=0?s+o:-1;for(s=e>0?o:l-1;s>=0&&s<l;s+=e)if(r[s]===i)return s;return-1}}a(ya,"createIndexFinder");var _a=ya(1,si,va),ud=ya(-1,ga);function ai(e,t,n){var r=Ne(e)?si:pa,i=r(e,t,n);if(i!==void 0&&i!==-1)return e[i]}a(ai,"find");function cd(e,t){return ai(e,yn(t))}a(cd,"findWhere");function rt(e,t,n){t=_n(t,n);var r,i;if(Ne(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var s=pe(e);for(r=0,i=s.length;r<i;r++)t(e[s[r]],s[r],e)}return e}a(rt,"each");function bt(e,t,n){t=Te(t,n);for(var r=!Ne(e)&&pe(e),i=(r||e).length,s=Array(i),o=0;o<i;o++){var l=r?r[o]:o;s[o]=t(e[l],l,e)}return s}a(bt,"map");function wa(e){var t=a(function(n,r,i,s){var o=!Ne(n)&&pe(n),l=(o||n).length,u=e>0?0:l-1;for(s||(i=n[o?o[u]:u],u+=e);u>=0&&u<l;u+=e){var c=o?o[u]:u;i=r(i,n[c],c,n)}return i},"reducer");return function(n,r,i,s){var o=arguments.length>=3;return t(n,_n(r,s,4),i,o)}}a(wa,"createReduce");var oi=wa(1),Ea=wa(-1);function zt(e,t,n){var r=[];return t=Te(t,n),rt(e,function(i,s,o){t(i,s,o)&&r.push(i)}),r}a(zt,"filter");function dd(e,t,n){return zt(e,ii(Te(t)),n)}a(dd,"reject");function xa(e,t,n){t=Te(t,n);for(var r=!Ne(e)&&pe(e),i=(r||e).length,s=0;s<i;s++){var o=r?r[s]:s;if(!t(e[o],o,e))return!1}return!0}a(xa,"every");function Sa(e,t,n){t=Te(t,n);for(var r=!Ne(e)&&pe(e),i=(r||e).length,s=0;s<i;s++){var o=r?r[s]:s;if(t(e[o],o,e))return!0}return!1}a(Sa,"some");function it(e,t,n,r){return Ne(e)||(e=Ut(e)),(typeof n!="number"||r)&&(n=0),_a(e,t,n)>=0}a(it,"contains");var fd=Re(function(e,t,n){var r,i;return Se(t)?i=t:(t=vn(t),r=t.slice(0,-1),t=t[t.length-1]),bt(e,function(s){var o=i;if(!o){if(r&&r.length&&(s=Qr(s,r)),s==null)return;o=s[t]}return o==null?o:o.apply(s,n)})});function li(e,t){return bt(e,Jr(t))}a(li,"pluck");function hd(e,t){return zt(e,yn(t))}a(hd,"where");function ba(e,t,n){var r=-1/0,i=-1/0,s,o;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=Ne(e)?e:Ut(e);for(var l=0,u=e.length;l<u;l++)s=e[l],s!=null&&s>r&&(r=s)}else t=Te(t,n),rt(e,function(c,g,E){o=t(c,g,E),(o>i||o===-1/0&&r===-1/0)&&(r=c,i=o)});return r}a(ba,"max");function pd(e,t,n){var r=1/0,i=1/0,s,o;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=Ne(e)?e:Ut(e);for(var l=0,u=e.length;l<u;l++)s=e[l],s!=null&&s<r&&(r=s)}else t=Te(t,n),rt(e,function(c,g,E){o=t(c,g,E),(o<i||o===1/0&&r===1/0)&&(r=c,i=o)});return r}a(pd,"min");var md=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Ra(e){return e?xt(e)?pn.call(e):Wr(e)?e.match(md):Ne(e)?bt(e,Yr):Ut(e):[]}a(Ra,"toArray");function Pa(e,t,n){if(t==null||n)return Ne(e)||(e=Ut(e)),e[ti(e.length-1)];var r=Ra(e),i=Pe(r);t=Math.max(Math.min(t,i),0);for(var s=i-1,o=0;o<t;o++){var l=ti(o,s),u=r[o];r[o]=r[l],r[l]=u}return r.slice(0,t)}a(Pa,"sample");function gd(e){return Pa(e,1/0)}a(gd,"shuffle");function vd(e,t,n){var r=0;return t=Te(t,n),li(bt(e,function(i,s,o){return{value:i,index:r++,criteria:t(i,s,o)}}).sort(function(i,s){var o=i.criteria,l=s.criteria;if(o!==l){if(o>l||o===void 0)return 1;if(o<l||l===void 0)return-1}return i.index-s.index}),"value")}a(vd,"sortBy");function Vn(e,t){return function(n,r,i){var s=t?[[],[]]:{};return r=Te(r,i),rt(n,function(o,l){var u=r(o,l,n);e(s,o,u)}),s}}a(Vn,"group");var yd=Vn(function(e,t,n){pt(e,n)?e[n].push(t):e[n]=[t]}),_d=Vn(function(e,t,n){e[n]=t}),wd=Vn(function(e,t,n){pt(e,n)?e[n]++:e[n]=1}),Ed=Vn(function(e,t,n){e[n?0:1].push(t)},!0);function xd(e){return e==null?0:Ne(e)?e.length:pe(e).length}a(xd,"size");function Sd(e,t,n){return t in n}a(Sd,"keyInObj");var Ta=Re(function(e,t){var n={},r=t[0];if(e==null)return n;Se(r)?(t.length>1&&(r=_n(r,t[1])),t=gn(e)):(r=Sd,t=St(t,!1,!1),e=Object(e));for(var i=0,s=t.length;i<s;i++){var o=t[i],l=e[o];r(l,o,e)&&(n[o]=l)}return n}),bd=Re(function(e,t){var n=t[0],r;return Se(n)?(n=ii(n),t.length>1&&(r=t[1])):(t=bt(St(t,!1,!1),String),n=a(function(i,s){return!it(t,s)},"iteratee")),Ta(e,n,r)});function Oa(e,t,n){return pn.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))}a(Oa,"initial");function ui(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[0]:Oa(e,e.length-t)}a(ui,"first");function Bn(e,t,n){return pn.call(e,t==null||n?1:t)}a(Bn,"rest");function Rd(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[e.length-1]:Bn(e,Math.max(0,e.length-t))}a(Rd,"last");function Pd(e){return zt(e,Boolean)}a(Pd,"compact");function Td(e,t){return St(e,t,!1)}a(Td,"flatten_flatten");var Ca=Re(function(e,t){return t=St(t,!0,!0),zt(e,function(n){return!it(t,n)})}),Od=Re(function(e,t){return Ca(e,t)});function ci(e,t,n,r){Is(t)||(r=n,n=t,t=!1),n!=null&&(n=Te(n,r));for(var i=[],s=[],o=0,l=Pe(e);o<l;o++){var u=e[o],c=n?n(u,o,e):u;t&&!n?((!o||s!==c)&&i.push(u),s=c):n?it(s,c)||(s.push(c),i.push(u)):it(i,u)||i.push(u)}return i}a(ci,"uniq");var Cd=Re(function(e){return ci(St(e,!0,!0))});function Ad(e){for(var t=[],n=arguments.length,r=0,i=Pe(e);r<i;r++){var s=e[r];if(!it(t,s)){var o;for(o=1;o<n&&it(arguments[o],s);o++);o===n&&t.push(s)}}return t}a(Ad,"intersection");function di(e){for(var t=e&&ba(e,Pe).length||0,n=Array(t),r=0;r<t;r++)n[r]=li(e,r);return n}a(di,"unzip");var Dd=Re(di);function Nd(e,t){for(var n={},r=0,i=Pe(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n}a(Nd,"object");function kd(e,t,n){t==null&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),s=0;s<r;s++,e+=n)i[s]=e;return i}a(kd,"range");function Id(e,t){if(t==null||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(pn.call(e,r,r+=t));return n}a(Id,"chunk");function fi(e,t){return e._chain?U(t).chain():t}a(fi,"chainResult");function Aa(e){return rt(Xr(e),function(t){var n=U[t]=e[t];U.prototype[t]=function(){var r=[this._wrapped];return ic.apply(r,arguments),fi(this,n.apply(U,r))}}),U}a(Aa,"mixin"),rt(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=In[e];U.prototype[e]=function(){var n=this._wrapped;return n!=null&&(t.apply(n,arguments),(e==="shift"||e==="splice")&&n.length===0&&delete n[0]),fi(this,n)}}),rt(["concat","join","slice"],function(e){var t=In[e];U.prototype[e]=function(){var n=this._wrapped;return n!=null&&(n=t.apply(n,arguments)),fi(this,n)}});var Md=U,hi=Aa(M);hi._=hi;var Da=hi,Ld=Object.defineProperty,Fd=a((e,t,n)=>t in e?Ld(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"AncestorScrollDetector_defNormalProp"),pi=a((e,t,n)=>(Fd(e,typeof t!="symbol"?t+"":t,n),n),"AncestorScrollDetector_publicField");class Na{constructor(t){pi(this,"tree",new Map),pi(this,"rootNode"),pi(this,"handleScroll",n=>{if(!n.target)return;const r=n.target;if(!this.tree.get(r))return;r.querySelectorAll(".js-fake-embed").forEach(o=>{const l=this.tree.get(o);!l||l.callback&&l.callback(r)})}),this.rootNode=t}addListener(t,n){var r;if(!((r=this.rootNode)!=null&&r.contains(t))||this.tree.has(t))return;let i=t;for(this.tree.set(i,{node:i,children:new Map,leaf:!0,callback:n});i&&i.parentElement;){const s=this.tree.get(i.parentElement);if(s){s.children.set(i,!0);break}this.tree.set(i.parentElement,{node:i.parentElement,children:new Map([[i,!0]])}),i.parentElement.addEventListener("scroll",this.handleScroll),i=i.parentElement}}removeListener(t){const n=this.tree.get(t);if(!n||!n.leaf)return;let r=t;for(;r;){const i=this.tree.get(r);if(!i)break;const s=r.parentElement?this.tree.get(r.parentElement):null;if(r!==this.rootNode&&!s||s&&!s.children.has(r)||(s&&(s==null||s.children.delete(r)),i.children.size!==0)||(r.removeEventListener("scroll",this.handleScroll),this.tree.delete(r),!s))break;r=s.node}}}a(Na,"AncestorScrollDetector");const mi=(0,w.createContext)({}),jd=a(({root:e,children:t})=>{const n=(0,w.useMemo)(()=>new Na(e),[]);return(0,X.jsx)(mi.Provider,{value:n,children:t})},"AncestorScrollDetectorProvider"),Vd=a(()=>(0,w.useContext)(mi),"useAncestorScrollDetector"),ka=(0,w.createContext)(null),Bd=a(({plugin:e,children:t})=>(0,X.jsx)(ka.Provider,{value:e,children:t}),"PluginProvider"),st=a(()=>{const e=(0,w.useContext)(ka);if(!e)throw new Error("You must wrap any RemNote API hooks in a <PluginProvider/>");return e},"usePlugin"),Ia=(0,w.createContext)(null),Wd=a(({pluginRoot:e,children:t})=>(0,X.jsx)(Ia.Provider,{value:e,children:t}),"PluginRootProvider"),Zd=a(()=>(0,w.useContext)(Ia),"usePluginRootDivRef");function Hd(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(i){i(n)}),(r=e.get("*"))&&r.slice().map(function(i){i(t,n)})}}}a(Hd,"mitt");const Wn=Hd();var Zn=(e=>(e.PluginBodyResizeOrTreeRenders="PluginBodyResizeOrTreeRenders",e))(Zn||{});const Ud=a((e,t)=>{(0,w.useEffect)(()=>(Wn.on(e,t),()=>Wn.off(e,t)),[e,t])},"useEvent");function zd(e){const t=w.useRef(e),n=w.useRef(0);return Da.isEqual(e,t.current)||(t.current=e,n.current+=1),w.useMemo(()=>t.current,[n.current])}a(zd,"useDeepCompareMemoize");function $d(e,t){return w.useEffect(e,zd(t))}a($d,"useDeepCompareEffectNoCheck");var qd=Object.defineProperty,Gd=Object.defineProperties,Xd=Object.getOwnPropertyDescriptors,Hn=Object.getOwnPropertySymbols,Ma=Object.prototype.hasOwnProperty,La=Object.prototype.propertyIsEnumerable,Fa=a((e,t,n)=>t in e?qd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"FakeEmbed_defNormalProp"),Be=a((e,t)=>{for(var n in t||(t={}))Ma.call(t,n)&&Fa(e,n,t[n]);if(Hn)for(var n of Hn(t))La.call(t,n)&&Fa(e,n,t[n]);return e},"FakeEmbed_spreadValues"),Kd=a((e,t)=>Gd(e,Xd(t)),"FakeEmbed_spreadProps"),Qd=a((e,t)=>{var n={};for(var r in e)Ma.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Hn)for(var r of Hn(e))t.indexOf(r)<0&&La.call(e,r)&&(n[r]=e[r]);return n},"FakeEmbed_objRest"),Yd=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"FakeEmbed_async");const Jd=a(e=>typeof e=="string"&&/[0-9]{1,}%/.test(e)?parseInt(e.replace("%","")):void 0,"parsePercentage"),ef=a(e=>typeof e=="string"&&/[0-9]{1,}px/.test(e)?parseInt(e.replace("px","")):void 0,"parsePx"),Un=a((e,t)=>{const n=Jd(t),r=ef(t);return n?e*n/100:r||null},"dimensionToNumber"),tf=a(({maxWidth:e,maxHeight:t,width:n,height:r,constraintWidth:i,constraintHeight:s})=>{const o=typeof n=="string"&&n!=="auto"?Un(i,n):n,l=typeof e=="string"?Un(i,e):e,u=typeof r=="string"&&r!=="auto"?Un(s,r):r,c=typeof t=="string"?Un(s,t):t;return{width:o,maxWidth:l,height:u,maxHeight:c}},"calculateStyles");function nf(e){return e.clientHeight<e.scrollHeight}a(nf,"isVerticallyScrollable");function rf(e){return e.clientWidth<e.scrollWidth}a(rf,"isHorizontallScrollable");const sf=a(({componentType:e,externalProps:t,maxHeight:n=null,maxWidth:r=null,height:i="auto",width:s="auto",constraintRef:o="parent"})=>{var l,u,c,g,E,Oe;(((u=(l=window==null?void 0:window.Env)==null?void 0:l.deploy)==null?void 0:u.isDevelopment)||((g=(c=window==null?void 0:window.Env)==null?void 0:c.deploy)==null?void 0:g.isStaging)||((Oe=(E=window==null?void 0:window.Env)==null?void 0:E.app)==null?void 0:Oe.isCypress))&&(console.error("You imported the wrong component!"),alert("You imported the wrong component!"));const I=(0,w.useRef)(null),V=st(),mt=Zd(),Ce=(0,w.useRef)(),[Gt,$f]=(0,w.useState)(!1),wi=Vd(),qn=(0,w.useRef)(),at=(0,w.useRef)({height:i,width:s,maxHeight:n,maxWidth:r}),Rt=(0,w.useRef)(),ho=(0,w.useCallback)(Z=>{!I.current||Z.height===void 0||Z.width===void 0||V.isNative||(I.current.style.height=Z.height+"px",I.current.style.width=Z.width+"px")},[]),po=a(Z=>{var K;Z.type=="wheel"?qf(Z):(K=I.current)==null||K.dispatchEvent(new Event(Z.type,Kd(Be({},Z),{bubbles:!0})))},"onDOMEvent"),qf=(0,w.useCallback)(Z=>{if(!(!I.current||Z.deltaY===void 0||Z.deltaX===void 0)){if(Z.deltaY){let K=I.current;for(;K&&!nf(K);)K=K.parentElement;K&&(K.scrollTop+=Z.deltaY)}if(Z.deltaX){let K=I.current;for(;K&&!rf(K);)K=K.parentElement;K&&(K.scrollLeft+=Z.deltaX)}}},[]),mo=a(()=>{if(!Ce.current||!V)return;const Z=qn.current?tf({constraintWidth:qn.current.constraintWidth,constraintHeight:qn.current.constraintHeight,height:at.current.height,width:at.current.width,maxHeight:at.current.maxHeight,maxWidth:at.current.maxWidth}):{height:at.current.height,width:at.current.width,maxHeight:at.current.maxHeight,maxWidth:at.current.maxWidth};V.updateFakeEmbedComponentRect(Ce.current,Z)},"updateDimensions"),go=a(()=>{var Z;if(!(V!=null&&V.inSandbox)||!I.current||!Ce.current)return;const{top:K,left:Pt}=I.current.getBoundingClientRect(),Tt=((Z=mt==null?void 0:mt.current)==null?void 0:Z.getBoundingClientRect())||{top:0,left:0},Ge=K-Tt.top,Ot=Pt-Tt.left;Rt.current&&(Rt==null?void 0:Rt.current.top)===Ge&&(Rt==null?void 0:Rt.current.left)===Ot||(Rt.current={left:Ot,top:Ge},V.updateFakeEmbedComponentRect(Ce.current,{top:Ge,left:Ot}))},"handleResizeOrScrollEvent");(0,w.useEffect)(()=>{if(V||console.error("You must wrap your components in a <PluginProvider/> or a renderWidget call."),!V||!I.current)return;vo();const Z=rc();return Yd(void 0,null,function*(){var K;const{top:Pt,left:Tt}=I.current.getBoundingClientRect();Rt.current={top:Pt,left:Tt};const Ge=((K=mt==null?void 0:mt.current)==null?void 0:K.getBoundingClientRect())||{top:0,left:0},Ot=Pt-Ge.top,Ei=Tt-Ge.left;V.event.addListener(A.FakeEmbedComponentDimensionChange,Z,ho),V.event.addListener(A.FakeEmbedDOMEvent,Z,po),V.isNative&&window.nativePluginDivs.set("virtual-"+Z,I.current),yield V.createFakeEmbedComponent({id:Z,type:e,top:Ot,left:Ei,externalProps:t}),Ce.current=Z,$f(!0)}),()=>{!Ce.current||(V.unmountFakeEmbedComponent(Ce.current),V.isNative&&window.nativePluginDivs.delete("virtual-"+Z),V.event.removeListener(A.FakeEmbedComponentDimensionChange,Ce.current,ho),V.event.removeListener(A.FakeEmbedDOMEvent,Ce.current,po))}},[]);function vo(){try{JSON.stringify(t)}catch(Z){throw console.error("ExternalProps are not serializable.",t),new Error(`All props passed to a RemNote React Component must be JSON serializable. Check the devtools to see your props for your ${e} component.`)}}a(vo,"throwErrorIfExternalPropsAreNotSerializable");function Gf(){vo(),Ce.current&&V.updateFakeEmbedExternalProps(Ce.current,t)}return a(Gf,"updateExternalProps"),$d(Gf,[t]),(0,w.useEffect)(()=>{!Gt||(at.current={maxHeight:n,maxWidth:r,height:i,width:s},mo())},[n,r,s,i,Gt]),(0,w.useEffect)(()=>{var Z;if((V==null?void 0:V.inSandbox)&&Ce.current&&Gt&&o){const K=o==="parent"?(Z=I.current)==null?void 0:Z.parentElement:o.current;if(!K)return;const Pt=new ResizeObserver(Tt=>{for(const Ge of Tt)if(Ge.contentBoxSize){const Ot=Ge.contentBoxSize[0].inlineSize,Ei=Ge.contentBoxSize[0].blockSize;qn.current={constraintHeight:Ei,constraintWidth:Ot},mo()}});return Pt.observe(K),()=>Pt.disconnect()}},[o,Gt]),Ud(Zn.PluginBodyResizeOrTreeRenders,go),(0,w.useLayoutEffect)(()=>{if(!(!Gt||!I.current||!wi))return wi.addListener(I.current,Da.debounce(go,10)),()=>{I.current&&wi.removeListener(I.current)}},[Gt]),(0,w.useEffect)(()=>()=>{V&&Ce.current&&V.unmountFakeEmbedComponent(Ce.current)},[]),(0,X.jsx)("div",{ref:I,className:"js-fake-embed"})},"FakeEmbedHost"),$e=a(e=>{const t=e,{width:n,maxHeight:r,constraintRef:i,height:s,maxWidth:o,componentType:l}=t,u=Qd(t,["width","maxHeight","constraintRef","height","maxWidth","componentType"]);return(0,X.jsx)(sf,{componentType:l,externalProps:u,width:n,height:s,maxHeight:r,maxWidth:o,constraintRef:i})},"FakeEmbedHostConcrete");class ja extends w.Component{render(){return(0,X.jsx)($e,Be({componentType:Le.RichTextEditor},this.props))}}a(ja,"RichTextEditor");class Va extends w.Component{render(){return(0,X.jsx)($e,Be({componentType:Le.RichText},this.props))}}a(Va,"RichText");class Ba extends w.Component{render(){return(0,X.jsx)($e,Be({componentType:Le.RemViewer},this.props))}}a(Ba,"RemViewer");class Wa extends w.Component{render(){return(0,X.jsx)($e,Be({componentType:Le.PDFWebReader},this.props))}}a(Wa,"PDFWebReader");class Za extends w.Component{render(){return(0,X.jsx)($e,Be({componentType:Le.DocumentViewer},this.props))}}a(Za,"DocumentViewer");class Ha extends w.Component{render(){return(0,X.jsx)($e,Be({componentType:Le.RemRichTextEditor},this.props))}}a(Ha,"RemRichTextEditor");class Ua extends w.Component{render(){return(0,X.jsx)($e,Be({componentType:Le.RemHierarchyEditorTree},this.props))}}a(Ua,"RemHierarchyEditorTree");class za extends w.Component{render(){return(0,X.jsx)($e,Be({componentType:Le.Queue},this.props))}}a(za,"Queue");class $a extends w.Component{render(){return(0,X.jsx)($e,Be({componentType:Le.LoadingSpinner},this.props))}}a($a,"LoadingSpinner");class qa extends w.Component{render(){return(0,X.jsx)($e,Be({componentType:Le.PreviewRemCards},this.props))}}a(qa,"PreviewRemCards");var af=ee(318),Ga=ee.n(af);function Xa(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Xa(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}a(Xa,"r");function of(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Xa(e))&&(r&&(r+=" "),r+=t);return r}a(of,"clsx");var lf=of,uf=Object.defineProperty,cf=a((e,t,n)=>t in e?uf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"PluginRenderer_defNormalProp"),Ka=a((e,t,n)=>(cf(e,typeof t!="symbol"?t+"":t,n),n),"PluginRenderer_publicField"),Qa=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"PluginRenderer_async");const df=a(({plugin:e,children:t})=>{const n=(0,w.useRef)(null);(0,w.useEffect)(()=>{if(!n.current||!e.inSandbox)return;const l=new ResizeObserver(()=>{!n.current||Wn.emit(Zn.PluginBodyResizeOrTreeRenders)}),u=new MutationObserver((c,g)=>{for(const E of c)(E.type==="attributes"||E.type==="childList")&&Wn.emit(Zn.PluginBodyResizeOrTreeRenders)});return u.observe(n.current,{attributes:!0,childList:!0,subtree:!0}),l.observe(n.current),()=>{!n.current||(l.disconnect(),u.disconnect())}},[]);const r=e.inSandbox?{current:document.getElementsByTagName("html")[0]}:n,i=e.inSandbox?document.getElementsByTagName("html")[0]:e.mountDiv,s=e.inSandbox?jd:ff,o=(0,X.jsx)("div",{ref:n,className:lf("plugin rn-clr-content-primary font-inter",e.id==="demo-tabs"&&"fade-on-hide-ui"),"data-plugin-id":e.id,children:t});return(0,X.jsx)(Bd,{plugin:e,children:(0,X.jsx)(Wd,{pluginRoot:r,children:(0,X.jsx)(s,{root:i,children:o})})})},"PluginWrapper");function ff(e){return(0,X.jsx)(mi.Provider,{value:null,children:e.children})}a(ff,"NoScrollDetector");class zn extends Vr{constructor(t,n){super(),Ka(this,"initReact"),Ka(this,"onDeactivateReact"),this.initReact=t,this.onDeactivateReact=n}onActivate(t,n){return Qa(this,null,function*(){this.initReact(this,t,n)})}onDeactivate(){return Qa(this,null,function*(){this.onDeactivateReact(this)})}}a(zn,"ReactRNPlugin");const Ya=a(e=>{const t=a(n=>{const r=a((s,o,l)=>Ga().render((0,X.jsxs)(w.StrictMode,{children:[(0,X.jsx)(df,{plugin:s,children:(0,X.jsx)(e,{})}),(0,X.jsx)("link",{rel:"stylesheet",href:`${l}App.css`,as:"style",type:"text/css",crossOrigin:"anonymous"})]}),o),"initReact"),i=a(s=>{console.log("onDeactivateReact"),Ga().unmountComponentAtNode(s.mountDiv)},"onDeactivateReact");return n?(window.__plugin?(console.log("[HMR] Hot reloading RemNote plugin widget."),i(window.__plugin),r(window.__plugin,window.__plugin.mountDiv,window.__plugin.rootURL)):window.__plugin=new zn(r,i),window.__plugin):new zn(r,i)},"makePlugin");try{const n=new URL(IMPORT_META.url).searchParams,r=n.get("widgetName"),i=n.get("pluginId");window.nativePluginRenderers.set(`${i}.${r}`,t)}catch(n){t(!0)}},"renderWidget");function hf(e,t){function n(){const r=st();return(0,w.useEffect)(()=>(r&&e(r),()=>{r&&t(r)}),[r]),null}a(n,"IndexWidget"),Ya(n)}a(hf,"declareIndexPlugin");function pf(e){return gi(A.MessageBroadcast,void 0,e)}a(pf,"useOnMessageBroadcast");function gi(e,t,n){const r=st();(0,w.useEffect)(()=>(r.event.addListener(e,t,n),()=>{r.event.removeListener(e,t,n)}),[e,t,n])}a(gi,"useAPIEventListener");var mf=Object.defineProperty,Ja=Object.getOwnPropertySymbols,gf=Object.prototype.hasOwnProperty,vf=Object.prototype.propertyIsEnumerable,eo=a((e,t,n)=>t in e?mf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,"rem_hooks_defNormalProp"),yf=a((e,t)=>{for(var n in t||(t={}))gf.call(t,n)&&eo(e,n,t[n]);if(Ja)for(var n of Ja(t))vf.call(t,n)&&eo(e,n,t[n]);return e},"rem_hooks_spreadValues"),_f=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"rem_hooks_async");function to(e,t){const n=new Set(t);return e.filter(r=>!n.has(r))}a(to,"rem_hooks_difference");function wf(e){return e.filter(t=>t)}a(wf,"rem_hooks_compact");function Ef(e){const t=st(),n=wf(e||[]),[r,i]=(0,w.useState)({}),[s,o]=(0,w.useState)(n.map(E=>r[E])),l=a((E,Oe)=>{!Oe||i(I=>{const V=yf({},I);return V[E]=Oe,o(n.map(mt=>V[mt])),V})},"setRem"),u=a(E=>_f(this,null,function*(){l(E,yield t.rem.findOne(E))}),"refetchRem"),c=(0,w.useRef)([]),g=(0,w.useRef)(new Map);return(0,w.useEffect)(()=>{const E=to(n,c.current),Oe=to(c.current,n);for(const I of E){const V=a(()=>u(I),"listener");g.current.set(I,V),t.event.addListener(A.RemChanged,I,V),u(I)}for(const I of Oe)t.event.removeListener(A.RemChanged,I,g.current.get(I));o(n.map(I=>r[I])),c.current=n},[n.length,...n]),(0,w.useEffect)(()=>()=>{for(const E of c.current)t.event.removeListener(A.RemChanged,E,g.current.get(E))},[]),s}a(Ef,"useGetRemsByIdsReactive");var no=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"storage_hooks_async");function vi(e,t,n,r,i,s){const[o,l]=(0,w.useState)(s),u=a(()=>no(this,null,function*(){t&&l((yield r(t))||s)}),"refetchValue");return(0,w.useEffect)(()=>{u()},[t]),gi(n,t,g=>{l(g)}),[o,a(g=>no(this,null,function*(){yield i(t,g)}),"setValue")]}a(vi,"useStorageStateInternal");function xf(e,t){const n=st();return vi(n,e,A.StorageSessionChange,n.storage.getSession,n.storage.setSession,t)}a(xf,"useSessionStorageState");function Sf(e,t){const n=st();return vi(n,e,A.StorageLocalChange,n.storage.getLocal,n.storage.setLocal,t)}a(Sf,"useLocalStorageState");function bf(e,t){const n=st();return vi(n,e,A.StorageSyncedChange,n.storage.getSynced,n.storage.setSynced,t)}a(bf,"useSyncedStorageState");var ro=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"react_hooks_async");function Rf(e,t){const[n,r]=(0,w.useState)(void 0);return(0,w.useEffect)(()=>{ro(this,null,function*(){return r(yield e())})},t),n}a(Rf,"useRunAsync");function Pf(e,t){return ro(this,null,function*(){const n=[];for(const r of e)(yield t(r))&&n.push(r);return n})}a(Pf,"filterAsync");const Tf=["card","editor","focus","messaging","powerup","rem","richText","settings","storage","widget","window","search"],ie=a(e=>({event:A.RemChanged,key:typeof e=="string"?e:typeof e=="object"?e._id:void 0}),"remReactiveDep"),qe=a(e=>({event:e,key:void 0}),"noKeyDep"),io={allRemInDocumentOrPortal:{resultDeps:e=>e.map(ie)},deepRemsBeingReferenced:{resultDeps:e=>e.map(ie)},getAliases:{resultDeps:e=>e.map(ie)},getDescendants:{resultDeps:e=>e.map(ie)},getSources:{resultDeps:e=>e.map(ie)},getTagRems:{resultDeps:e=>e.map(ie)},getParentRem:{resultDeps:e=>[ie(e)]},getChildrenRem:{resultDeps:e=>e.map(ie)},getPortalDirectlyIncludedRem:{resultDeps:e=>e.map(ie)},portalsAndDocumentsIn:{resultDeps:e=>e.map(ie)},remsBeingReferenced:{resultDeps:e=>e.map(ie)},remsReferencingThis:{resultDeps:e=>e.map(ie)},siblingRem:{resultDeps:e=>e.map(ie)},taggedRem:{resultDeps:e=>e.map(ie)}},so={rem:{findByName:{resultDeps:e=>[ie(e)]},findOne:{argsDeps:e=>[ie(e[0])]},findMany:{argsDeps:e=>e[0].map(ie)},getAll:{resultDeps:e=>e.map(ie)}},powerup:{getPowerupSlotByCode:{resultDeps:e=>[ie(e)]},getPowerupByCode:{resultDeps:e=>[ie(e)]}},settings:{getSetting:{argsDeps:e=>[{event:A.SettingChanged,key:e[0]}]}},card:{},storage:{getLocal:{argsDeps:e=>[{event:A.StorageLocalChange,key:e[0]}]},getSession:{argsDeps:e=>[{event:A.StorageSessionChange,key:e[0]}]},getSynced:{argsDeps:e=>[{event:A.StorageSyncedChange,key:e[0]}]}},window:{getCurrentWindowTree:{argsDeps:()=>[qe(A.CurrentWindowTreeChange)]},getFocusedPaneId:{argsDeps:()=>[qe(A.FocusedPaneChange)]}},editor:{getFocusedEditorText:{argsDeps:()=>[qe(A.FocusedRemChange),qe(A.EditorTextEdited)]},getSelection:{argsDeps:()=>[qe(A.EditorSelectionChanged)]},getSelectedRem:{argsDeps:()=>[qe(A.EditorSelectionChanged)]},getSelectedText:{argsDeps:()=>[qe(A.EditorSelectionChanged)]},getCaretPosition:{argsDeps:()=>[qe(A.EditorSelectionChanged)]}},focus:{getFocusedRem:{argsDeps:()=>[qe(A.FocusedRemChange)],resultDeps:e=>[ie(e)]},getFocusedPortal:{argsDeps:()=>[qe(A.FocusedPortalChange)],resultDeps:e=>[ie(e)]}}};var $n=a((e,t,n)=>new Promise((r,i)=>{var s=a(u=>{try{l(n.next(u))}catch(c){i(c)}},"fulfilled"),o=a(u=>{try{l(n.throw(u))}catch(c){i(c)}},"rejected"),l=a(u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o),"step");l((n=n.apply(e,t)).next())}),"useTracker_async");const $t=!1;function Of(e){return Tf.includes(e)}a(Of,"isNamespacedProp");const Cf=a((e,t)=>Array.isArray(e)&&e[0]instanceof Ue?($t&&console.log("wrapping result array in Rem proxy"),e.map(n=>oo(n,t))):e&&e instanceof Ue?($t&&console.log("wrapping result in Rem proxy"),oo(e,t)):e,"wrapResult"),ao=a((e,t,n,r)=>new Proxy(e,{apply:(i,s,o)=>$n(void 0,null,function*(){const l=yield i.apply(s,o);return r(t,s,n,o,l),Cf(l,r)})}),"wrapFunctionCall");function oo(e,t){return new Proxy(e,{get(n,r){var i;return typeof n[r]=="function"&&((i=io)==null?void 0:i[r])?ao(n[r],void 0,r,t):n[r]}})}a(oo,"interceptReactiveRemCalls");function Af(e,t,n){return new Proxy(t,{get(r,i){var s,o;return typeof i=="string"&&typeof r[i]=="function"&&((o=(s=so)==null?void 0:s[e])==null?void 0:o[i])?ao(r[i],e,i,n):r[i]}})}a(Af,"interceptReactiveAPICalls");function Df(e,t){return new Proxy(e,{get(n,r){return Of(r)?Af(r,n[r],t):n[r]}})}a(Df,"interceptAPINamespaceAccesses");function lo(e){return new Set(e==null?void 0:e.map(({reactiveDeps:t})=>t.map(yi)).flat())}a(lo,"subscriptionsToSubscriptionSet");function yi(e){const{event:t,key:n}=e;return`${t}.${n}`}a(yi,"reactiveDepToKey");const Nf=a(e=>{const t=[];return{proxy:Df(e,(r,i,s,o,l)=>{var u,c,g,E,Oe,I;const V=r?(c=(u=so)==null?void 0:u[r])==null?void 0:c[s]:(g=io)==null?void 0:g[s],mt=[...((E=V.thisDeps)==null?void 0:E.call(V,i))||[],...((Oe=V.argsDeps)==null?void 0:Oe.call(V,o))||[],...((I=V.resultDeps)==null?void 0:I.call(V,l))||[]];t.push({methodName:s,args:o,reactiveDeps:mt})}),subscriptions:t}},"wrapApiWithListen"),_i=a((e,t,n,r,i)=>$n(void 0,null,function*(){const s=Nf(e);return yield a(()=>$n(void 0,null,function*(){s.subscriptions.length;const l=yield t(s.proxy);$t&&console.log("useReactiveAPI result",l),r(l)}),"changeHandler")(),kf(e,n,i,s.subscriptions),s.subscriptions}),"createReactiveApi");function kf(e,t,n,r){const i=lo(n||[]),s=lo(r);n==null||n.forEach(({reactiveDeps:o})=>{for(const l of o)if(!s.has(yi(l))){const{event:u,key:c}=l;$t&&console.log("removeListener",u,c),e.event.removeListener(u,c,t)}}),r==null||r.forEach(({reactiveDeps:o})=>{for(const l of o)if(!i.has(yi(l))){const{event:u,key:c}=l;$t&&console.log("addListener",u,c),e.event.addListener(u,c,t)}})}a(kf,"updateListeners");function If(e,t=[]){const n=st(),[r,i]=Ss().useState(),s=(0,w.useRef)(!1),o=(0,w.useRef)(!1),l=(0,w.useRef)(),u=(0,w.useRef)(e);u.current=e;const c=a(()=>{$t&&console.log("useReactiveAPI RUN",s.current,o.current,l.current,t),s.current?o.current=!0:(s.current=!0,a(()=>$n(this,null,function*(){l.current=yield _i(n,u.current,c,i,l.current||[]),s.current=!1,o.current&&(o.current=!1,c())}),"effect")())},"run");return Ss().useEffect(c,t),r}a(If,"useTracker");const Mf=/^[-_a-zA-Z0-9]+$/,Lf=d.nativeEnum(ir),sh=d.nativeEnum(Je),qt=d.object({level:Lf}),Ff=d.object({type:d.literal(Je.KnowledgeBaseInfo)}).merge(qt),jf=d.object({type:d.literal(Je.All)}).merge(qt),Vf=d.object({type:d.literal(Je.DescendantsOfName),remName:d.string()}).merge(qt),Bf=d.object({type:d.literal(Je.DescendantsOfId),remId:d.string()}).merge(qt),Wf=d.object({type:d.literal(Je.Powerup),powerupCode:d.string()}).merge(qt),Zf=d.object({type:d.literal(Je.FocusedSubtree)}).merge(qt),Hf=d.union([jf,Vf,Bf,Wf,Zf,Ff]),uo=d.object({major:d.number().gte(0),minor:d.number().gte(0),patch:d.number().gte(0)}),co=d.object({id:d.string().min(5).max(100).refine(e=>Mf.test(e),"Plugin ids may consist only of lowercase Latin letters a-z, A-Z, hyphens, underscores, and digits 0-9"),name:d.string().min(3).max(100),version:uo,manifestVersion:d.literal(1),requestNative:d.boolean(),requiredScopes:d.array(Hf),repoUrl:d.string().url(),author:d.string().min(3).max(100),enableOnMobile:d.boolean(),theme:d.union([d.literal("dark"),d.literal("light")]).array().optional(),minimumRemNoteVersion:uo.optional(),description:d.string().max(200).optional(),projectUrl:d.string().url().optional(),supportUrl:d.string().url().optional(),changelogUrl:d.string().url().optional(),unlisted:d.boolean().optional()}),Uf=co.merge(d.object({repoUrl:d.string().url().optional()})),ah=a(e=>`${e.field}: ${e.message}`,"formatValidationError"),fo=a(e=>{const t=e.errors,n=[];for(const r of t){const{code:i,message:s,path:o}=r,u={field:o.join(".")?o.join("."):"Root Object",message:`${s} (${i})`};"expected"in r&&(u.expected=r.expected),"received"in r&&(u.received=r.received),n.push(u)}return n},"prettifyZodErrors"),zf=a(e=>{const t=co.safeParse(e);return t.success?t:{success:!1,errors:fo(t.error)}},"parseManifest"),oh=a(e=>{const t=Uf.safeParse(e);return t.success?t:{success:!1,errors:fo(t.error)}},"parseSnippetManifest")}(),Xt}()});
